{"version":3,"sources":["webpack:///./src/images/svg/livechat-hover.svg","webpack:///./src/components/layout/livechat.js","webpack:///./src/images/svg/livechat.svg"],"names":["StyledLiveChat","styled","div","device","tabletS","is_livechat_query","URLSearchParams","window","location","search","get","toLowerCase","LC_API","open_chat_window","LiveChat","is_livechat_interactive","setLiveChatInteractive","React","useState","is_livechat_hover","setLivechatHover","is_logged_in","setLoggedIn","CustomerSdk","useRef","loadLiveChatScript","callback","livechat_script","document","createElement","innerHTML","body","appendChild","useEffect","lastCookie","cookie_interval","script_timeout","isBrowser","domain","hostname","includes","then","CSDK","current","checkCookie","cookie","currentCookie","client_information","Cookies","setInterval","setTimeout","LiveChatWidget","on","clearInterval","clearTimeout","customerSDK","init","licenseId","livechat_license_id","clientId","livechat_client_id","session_variables","loginid","landing_company_shortcode","currency","residence","email","JSON","parse","first_name","last_name","call","chatID","chatId","deactivateChat","className","onClick","onMouseEnter","onMouseLeave","src","alt"],"mappings":"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","file":"95-83890c00712f6b3fbfe0.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#85ACB0\",\n  d: \"M21 2H3a3 3 0 00-3 3v16l.006.114c.087.814 1.099 1.196 1.701.593L5.414 18H21a3 3 0 003-3V5a3 3 0 00-3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#85ACB0\",\n  d: \"M26 10v6c0 2.21-1.79 4-4 4H8v3a3 3 0 002.824 2.995L11 26h15.586l3.707 3.707c.602.603 1.614.22 1.701-.593L32 29V13a3 3 0 00-2.824-2.995L29 10h-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  d: \"M11 10a1 1 0 01.117 1.993L11 12H7a1 1 0 01-.117-1.993L7 10h4zm6-4a1 1 0 01.117 1.993L17 8H7a1 1 0 01-.117-1.993L7 6h10z\"\n}));\n\nfunction SvgLivechatHover(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 32,\n    height: 32\n  }, props), _ref);\n}\n\nexport default \"data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8ZyBmaWxsPSJub25lIj4KICAgICAgICA8cGF0aCBmaWxsPSIjODVBQ0IwIiBkPSJNMjEgMkgzQzEuMzQzIDIgMCAzLjM0MyAwIDV2MTZsLjAwNi4xMTRjLjA4Ny44MTQgMS4wOTkgMS4xOTYgMS43MDEuNTkzTDUuNDE0IDE4SDIxYzEuNjU3IDAgMy0xLjM0MyAzLTNWNWMwLTEuNjU3LTEuMzQzLTMtMy0zeiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM4NUFDQjAiIGQ9Ik0yNiAxMHY2YzAgMi4yMS0xLjc5IDQtNCA0SDh2M2MwIDEuNTk4IDEuMjQ5IDIuOTA0IDIuODI0IDIuOTk1TDExIDI2aDE1LjU4NmwzLjcwNyAzLjcwN2MuNjAyLjYwMyAxLjYxNC4yMiAxLjcwMS0uNTkzTDMyIDI5VjEzYzAtMS41OTgtMS4yNDktMi45MDQtMi44MjQtMi45OTVMMjkgMTBoLTN6Ii8+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTExIDEwYy41NTIgMCAxIC40NDggMSAxIDAgLjUxMy0uMzg2LjkzNi0uODgzLjk5M0wxMSAxMkg3Yy0uNTUyIDAtMS0uNDQ4LTEtMSAwLS41MTMuMzg2LS45MzYuODgzLS45OTNMNyAxMGg0ek0xNyA2Yy41NTIgMCAxIC40NDggMSAxIDAgLjUxMy0uMzg2LjkzNi0uODgzLjk5M0wxNyA4SDdjLS41NTIgMC0xLS40NDgtMS0xIDAtLjUxMy4zODYtLjkzNi44ODMtLjk5M0w3IDZoMTB6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=\";\nexport { SvgLivechatHover as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Cookies from 'js-cookie'\nimport styled from 'styled-components'\nimport { isBrowser, livechat_client_id, livechat_license_id } from 'common/utility'\nimport LiveChatIC from 'images/svg/livechat.svg'\nimport LiveChatHover from 'images/svg/livechat-hover.svg'\nimport device from 'themes/device'\n\nconst StyledLiveChat = styled.div`\n    position: fixed;\n    bottom: 1.6rem;\n    right: 1.6rem;\n    background-color: var(--color-white);\n    box-shadow: 0 16px 20px 0 rgba(0, 0, 0, 0.05), 0 0 20px 0 rgba(0, 0, 0, 0.05);\n    padding: 1.6rem;\n    display: flex;\n    cursor: pointer;\n    border-radius: 50%;\n    z-index: 9999;\n\n    @media ${device.tabletS} {\n        padding: 1rem;\n    }\n`\nconst url_params = new URLSearchParams(window.location.search)\nconst is_livechat_query = url_params.get('is_livechat_open')\nif (is_livechat_query?.toLowerCase() === 'true') {\n    window.LC_API.open_chat_window()\n}\n\nconst LiveChat = ({ LC_API, is_livechat_interactive, setLiveChatInteractive }) => {\n    const [is_livechat_hover, setLivechatHover] = React.useState(false)\n    const [is_logged_in, setLoggedIn] = React.useState(false)\n    const CustomerSdk = React.useRef(null)\n\n    const loadLiveChatScript = (callback) => {\n        const livechat_script = document.createElement('script')\n        livechat_script.innerHTML = `\n            window.__lc = window.__lc || {};\n            window.__lc.license = 12049137;\n            ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:\"2.0\",on:function(){i([\"on\",c.call(arguments)])},once:function(){i([\"once\",c.call(arguments)])},off:function(){i([\"off\",c.call(arguments)])},get:function(){if(!e._h)throw new Error(\"[LiveChatWidget] You canâ€™t use getters before load.\");return i([\"get\",c.call(arguments)])},call:function(){i([\"call\",c.call(arguments)])},init:function(){var n=t.createElement(\"script\");n.async=!0,n.type=\"text/javascript\",n.src=\"https://cdn.livechatinc.com/tracking.js\",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice))\n        `\n        document.body.appendChild(livechat_script)\n        if (callback) callback()\n    }\n\n    React.useEffect(() => {\n        let cookie_interval = null\n        let script_timeout = null\n        if (isBrowser()) {\n            const domain = window.location.hostname.includes('deriv.com')\n                ? 'deriv.com'\n                : 'binary.sx'\n            import('@livechat/customer-sdk').then((CSDK) => {\n                CustomerSdk.current = CSDK\n            })\n            const checkCookie = (() => {\n                let lastCookie = document.cookie // 'static' memory between function calls\n                return function () {\n                    const currentCookie = document.cookie\n                    if (currentCookie != lastCookie) {\n                        const client_information = Cookies.get('client_information', {\n                            domain,\n                        })\n                        if (client_information) {\n                            setLoggedIn(true)\n                        } else {\n                            setLoggedIn(false)\n                        }\n                        lastCookie = currentCookie // store latest cookie\n                    }\n                }\n            })()\n\n            cookie_interval = setInterval(checkCookie, 500)\n\n            // The purpose is to load the script after everything is load but not async or defer. Therefore, it will be ignored in the rendering timeline\n            script_timeout = setTimeout(() => {\n                loadLiveChatScript(() => {\n                    window.LiveChatWidget.on('ready', () => {\n                        setLiveChatInteractive(true)\n                    })\n                })\n            }, 2000)\n        }\n\n        return () => {\n            clearInterval(cookie_interval)\n            clearTimeout(script_timeout)\n        }\n    }, [])\n\n    React.useEffect(() => {\n        if (isBrowser()) {\n            let customerSDK = null\n            const domain = window.location.hostname.includes('deriv.com')\n                ? 'deriv.com'\n                : 'binary.sx'\n            if (CustomerSdk.current) {\n                customerSDK = CustomerSdk.current.init({\n                    licenseId: livechat_license_id,\n                    clientId: livechat_client_id,\n                })\n            }\n\n            setTimeout(() => {\n                loadLiveChatScript(() => {\n                    window.LiveChatWidget.on('ready', () => {\n                        let session_variables = {\n                            loginid: '',\n                            landing_company_shortcode: '',\n                            currency: '',\n                            residence: '',\n                            email: '',\n                        }\n                        if (is_logged_in) {\n                            const client_information = Cookies.get('client_information', {\n                                domain,\n                            })\n                            const {\n                                loginid,\n                                email,\n                                landing_company_shortcode,\n                                currency,\n                                residence,\n                                first_name,\n                                last_name,\n                            } = JSON.parse(client_information)\n\n                            session_variables = {\n                                ...(loginid && { loginid }),\n                                ...(landing_company_shortcode && {\n                                    landing_company_shortcode,\n                                }),\n                                ...(currency && { currency }),\n                                ...(residence && { residence }),\n                                ...(email && { email }),\n                            }\n\n                            window.LiveChatWidget.call('set_session_variables', session_variables)\n                            if (email) {\n                                window.LiveChatWidget.call('set_customer_email', email)\n                            }\n                            if (first_name && last_name) {\n                                window.LiveChatWidget.call(\n                                    'set_customer_name',\n                                    `${first_name} ${last_name}`,\n                                )\n                            }\n                        } else {\n                            if (window.LiveChatWidget.get('chat_data')) {\n                                const chatID = window.LiveChatWidget.get('chat_data').chatId\n                                customerSDK?.deactivateChat({ chatId: chatID })\n                            }\n                            window.LiveChatWidget.call('set_customer_email', ' ')\n                            window.LiveChatWidget.call('set_customer_name', ' ')\n                        }\n\n                        const url_params = new URLSearchParams(window.location.search)\n                        const is_livechat_query = url_params.get('is_livechat_open')\n                        if (is_livechat_query?.toLowerCase() === 'true') {\n                            window.LC_API.open_chat_window()\n                        }\n                    })\n                })\n            }, 4000)\n        }\n    }, [is_logged_in, CustomerSdk])\n\n    return (\n        <>\n            {is_livechat_interactive && (\n                <StyledLiveChat\n                    className=\"gtm-deriv-livechat\"\n                    onClick={() => {\n                        LC_API.open_chat_window()\n                    }}\n                    onMouseEnter={() => setLivechatHover(true)}\n                    onMouseLeave={() => setLivechatHover(false)}\n                >\n                    {is_livechat_hover ? (\n                        <img src={LiveChatHover} alt=\"livechat hover\" />\n                    ) : (\n                        <img src={LiveChatIC} alt=\"livechat ic\" />\n                    )}\n                </StyledLiveChat>\n            )}\n        </>\n    )\n}\n\nLiveChat.propTypes = {\n    is_livechat_interactive: PropTypes.bool,\n    LC_API: PropTypes.object,\n    setLiveChatInteractive: PropTypes.func,\n}\n\nexport default LiveChat\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#85ACB0\",\n  d: \"M29 10l.176.005A3 3 0 0132 13v16l-.006.114c-.087.814-1.099 1.196-1.701.593L26.586 26H11l-.176-.005A3 3 0 018 23v-3h2v3l.007.117A1 1 0 0011 24h16l.131.009c.217.028.42.128.576.284L30 26.584V13l-.007-.117A1 1 0 0029 12h-3v-2h3zm-8-8a3 3 0 013 3v10a3 3 0 01-3 3H5.414l-3.707 3.707c-.602.603-1.614.22-1.701-.593L0 21V5a3 3 0 013-3zm0 2H3a1 1 0 00-1 1v13.584l2.293-2.291a.996.996 0 01.576-.284L5 16h16a1 1 0 001-1V5a1 1 0 00-1-1zm-10 6a1 1 0 01.117 1.993L11 12H7a1 1 0 01-.117-1.993L7 10h4zm6-4a1 1 0 01.117 1.993L17 8H7a1 1 0 01-.117-1.993L7 6h10z\"\n});\n\nfunction SvgLivechat(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 32,\n    height: 32\n  }, props), _ref);\n}\n\nexport default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxnIGZpbGw9Im5vbmUiPgogICAgICAgIDxwYXRoIGZpbGw9IiM4NUFDQjAiIGQ9Ik0yOSAxMGwuMTc2LjAwNUMzMC43NTEgMTAuMDk2IDMyIDExLjQwMiAzMiAxM3YxNmwtLjAwNi4xMTRjLS4wODcuODE0LTEuMDk5IDEuMTk2LTEuNzAxLjU5M0wyNi41ODYgMjZIMTFsLS4xNzYtLjAwNUM5LjI0OSAyNS45MDQgOCAyNC41OTggOCAyM3YtM2gydjNsLjAwNy4xMTdjLjA1Ny40OTcuNDguODgzLjk5My44ODNoMTZsLjEzMS4wMDljLjIxNy4wMjguNDIuMTI4LjU3Ni4yODRMMzAgMjYuNTg0VjEzbC0uMDA3LS4xMTdjLS4wNTctLjQ5Ny0uNDgtLjg4My0uOTkzLS44ODNoLTN2LTJoM3ptLTgtOGMxLjY1NyAwIDMgMS4zNDMgMyAzdjEwYzAgMS42NTctMS4zNDMgMy0zIDNINS40MTRsLTMuNzA3IDMuNzA3Yy0uNjAyLjYwMy0xLjYxNC4yMi0xLjcwMS0uNTkzTDAgMjFWNWMwLTEuNjU3IDEuMzQzLTMgMy0zem0wIDJIM2MtLjU1MiAwLTEgLjQ0OC0xIDF2MTMuNTg0bDIuMjkzLTIuMjkxYy4xNTYtLjE1Ni4zNTktLjI1Ni41NzYtLjI4NEw1IDE2aDE2Yy41NTIgMCAxLS40NDggMS0xVjVjMC0uNTUyLS40NDgtMS0xLTF6bS0xMCA2Yy41NTIgMCAxIC40NDggMSAxIDAgLjUxMy0uMzg2LjkzNi0uODgzLjk5M0wxMSAxMkg3Yy0uNTUyIDAtMS0uNDQ4LTEtMSAwLS41MTMuMzg2LS45MzYuODgzLS45OTNMNyAxMGg0em02LTRjLjU1MiAwIDEgLjQ0OCAxIDEgMCAuNTEzLS4zODYuOTM2LS44ODMuOTkzTDE3IDhIN2MtLjU1MiAwLTEtLjQ0OC0xLTEgMC0uNTEzLjM4Ni0uOTM2Ljg4My0uOTkzTDcgNmgxMHoiLz4KICAgIDwvZz4KPC9zdmc+Cg==\";\nexport { SvgLivechat as ReactComponent };"],"sourceRoot":""}