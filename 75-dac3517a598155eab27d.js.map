{"version":3,"sources":["webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/event.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/info-ajax.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/facade.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/receiver/eventsource.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/iframe.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/xhr-streaming.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/browser/eventsource.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/event/emitter.js","webpack:///./node_modules/@livechat/data-utils/dist/data-utils.es.js","webpack:///./node_modules/@livechat/deferred/dist/deferred.esm.js","webpack:///./node_modules/redux/es/redux.js","webpack:///./node_modules/@livechat/side-effects-middleware/es/index.js","webpack:///./node_modules/memory-web-storage/es/index.js","webpack:///./node_modules/@livechat/isomorphic-storage/dist/isomorphic-storage.es.js","webpack:///./node_modules/@livechat/promise-try/dist/promise-try.es.js","webpack:///./node_modules/@livechat/url-utils/dist/url-utils.esm.js","webpack:///./node_modules/@livechat/mitt/dist/livechat-mitt.es.js","webpack:///./node_modules/@livechat/sockjs-manager/dist/sockjs-manager.esm.js","webpack:///./node_modules/@livechat/platform-client/dist/platform-client.esm.js","webpack:///./node_modules/@livechat/file-upload/dist/file-upload.es.js","webpack:///./node_modules/@livechat/dom-utils/dist/dom-utils.es.js","webpack:///./node_modules/@livechat/customer-auth/dist/customer-auth.esm.js","webpack:///./node_modules/@livechat/customer-sdk/dist/customer-sdk.esm.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/lib/buffered-sender.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/main.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/jsonp-polling.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/shims.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/browser/websocket.js","webpack:///./node_modules/core-js/modules/es.string.trim-start.js","webpack:///./node_modules/tabbable/index.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/sender/jsonp.js","webpack:///./node_modules/backo2/index.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/sender/xdr.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport-list.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/info-iframe-receiver.js","webpack:///./node_modules/url-parse/index.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/browser.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/info-receiver.js","webpack:///./node_modules/gatsby/dist/internal-plugins/bundle-optimisations/polyfills/fetch.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/xdr-polling.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/log.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/sender/xhr-fake.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/lib/sender-receiver.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/version.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/info-iframe.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/event/event.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/requires-port/index.js","webpack:///./node_modules/symbol-observable/es/ponyfill.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/xhr-polling.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/escape.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/event/close.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/entry.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/lib/ajax-based.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/iframe.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/object.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/websocket.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/sender/xhr-local.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/receiver/xhr.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/sender/xhr-cors.js","webpack:///./node_modules/symbol-observable/es/index.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/url.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/iframe-bootstrap.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/transport.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/xdr-streaming.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/location.js","webpack:///./node_modules/json3/lib/json3.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/receiver/htmlfile.js","webpack:///./node_modules/querystringify/index.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/receiver/jsonp.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/htmlfile.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/event/trans-message.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/eventsource.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/event/eventtarget.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/transport/lib/polling.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/random.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./node_modules/@livechat/sockjs-manager/node_modules/sockjs-client/lib/utils/browser-crypto.js"],"names":["random","onUnload","afterUnload","isChromePackagedApp","global","chrome","app","runtime","module","exports","attachEvent","event","listener","addEventListener","document","detachEvent","removeEventListener","unloadAdd","ref","string","setTimeout","this","triggerUnloadCallbacks","unloadDel","EventEmitter","inherits","JSON3","objectUtils","InfoAjax","url","AjaxObject","call","self","t0","Date","xo","once","status","text","info","rtt","parse","e","isObject","emit","removeAllListeners","prototype","close","iframeUtils","FacadeJS","transport","_transport","on","_transportMessage","bind","_transportClose","code","reason","postMessage","stringify","frame","_send","data","send","_close","EventSourceDriver","EventSourceReceiver","es","onmessage","decodeURI","onerror","readyState","_cleanup","abort","eventUtils","browser","WPrefix","currentWindowId","polluteGlobalNamespace","type","parent","windowId","createIframe","iframeUrl","errorCallback","tref","unloadRef","iframe","createElement","unattach","clearTimeout","onload","x","cleanup","parentNode","removeChild","err","src","style","display","position","body","appendChild","post","msg","origin","contentWindow","loaded","createHtmlfile","axo","concat","join","doc","CollectGarbage","r","open","write","domain","parentWindow","c","iframeEnabled","isKonqueror","AjaxBasedTransport","XhrReceiver","XHRCorsObject","XHRLocalObject","XhrStreamingTransport","transUrl","enabled","Error","nullOrigin","isOpera","transportName","roundTrips","needBody","originalModule","webpackPolyfill","Object","create","children","defineProperty","enumerable","get","l","i","EventTarget","_listeners","fired","g","removeListener","apply","arguments","listeners","length","args","Array","ai","addListener","hasOwnProperty","hasOwn","prop","obj","flatMap","iteratee","arr","_ref","map","isArray","mapValues","mapper","keys","reduce","acc","key","identity","value","generateRandomId","Math","toString","substring","generateUniqueId","id","propPath","arrPath","split","pathPartIndex","result","isEmpty","collection","noop","numericSortBy","propOrMapper","element","sort","elementA","elementB","pick","props","pickOwn","toPairs","stringCompare","strA","strB","uniqBy","seen","filter","indexOf","push","def","promise","Promise","resolve","reject","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","undefined","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","isSubscribed","index","splice","dispatch","action","replaceReducer","nextReducer","observable","outerSubscribe","observer","TypeError","observeState","next","unsubscribe","_defineProperty","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_len","funcs","_key","arg","a","b","testKey","memoryStorage","getItem","setItem","_value","String","removeItem","clear","storage","window","testStorageSupport","localStorage","fn","pair","encodeURIComponent","originRegexp","intersperseWithTabOrNewline","str","replace","RegExp","assign","mitt","eventsMap","instance","off","handler","onceHandler","maybeSecondArg","_temp","reconnectTimer","query","_ref$transports","transports","finalUrl","emitter","backoff","_ref$min","min","_ref$max","max","_ref$jitter","jitter","attempts","duration","ms","pow","rand","deviation","floor","reset","backo","state","socket","openListener","closeListener","reconnect","messageListener","heartbeatListener","connect","delay","managedSocket","_connect","destroy","disconnect","_reconnect","_x","getReadyState","pingTimer","timer","sink","_ref$query","_ref$rescheduleTimeou","rescheduleTimeout","_ref$emitter","manager","bh","connectionHero","cancel","check","deferred","_resolve","isSocketOpen","JSON","reschedulePing","ping","cleanupPossiblyPendingTasks","message","then","headers","_ref$method","method","onProgress","_ref$withCredentials","withCredentials","xhr","XMLHttpRequest","formData","upload","onprogress","total","response","onabort","header","setRequestHeader","FormData","append","documentElement","currentStyle","config","redirectUri","env","uniqueGroups","licenseId","groupId","clientId","license_id","flow","response_type","client_id","redirect_uri","post_message_uri","buildParams","createError","setAttribute","location","match","pathname","postMessageOrigin","getPostMessageOrigin","node","timeoutId","isTokenResponse","token","identity_exception","oauth_exception","accessToken","access_token","entityId","entity_id","expiresIn","expires_in","tokenType","token_type","creationDate","now","parseTokenResponse","validateConfig","cacheKey","pendingTokenRequest","cachedToken","retrievingToken","getFreshToken","getToken","hasToken","invalidate","_objectWithoutPropertiesLoose","excluded","sourceKeys","_toPropertyKey","input","hint","prim","Symbol","toPrimitive","res","Number","_toPrimitive","getConnectionStatus","connection","getRequest","requests","getSelfId","users","isChatActive","chatId","chat","chats","active","isConnected","getApiOrigin","region","getServerUrl","removeStoredRequest","setConnectionStatus","createReducer$1","_createReducer","initialState","reducersMap","_ref3","_ref4","_extends2","request","_ref5","_extends3","payload","previousStatus","page","console","warn","finalCreateStore","initialStateData","compose","sideEffectsMiddleware","handlers","store","add","_initialStateData$app","application","_initialStateData$gro","_initialStateData$pag","_initialStateData$reg","_initialStateData$ref","referrer","_initialStateData$uni","_initialStateData$mob","mobile","name","version","others","createInitialState","middlewares","_dispatch","middlewareAPI","chain","middleware","applyMiddleware","addSideEffectsHandler","error","base","customId","custom_id","properties","parseEvent","postback","thread_id","threadId","event_id","eventId","form_id","formId","fields","field","answer","_field$answer","group_id","systemMessage","system_message_type","systemMessageType","recipients","parseStartChatData","continuous","access","thread","groupIds","group_ids","events","parseThreadData","sessionFields","update","session_fields","prefetchToken","fresh","sendRequest","setChatActive","setSelfId","_deferred","getSideStorageKey","_store$getState","catch","sideStorage","sendLoginFlowRequest","createLoginTask","auth","customerDataProvider","task","sentPage","destroy$$1","reconnect$$1","getTokenAndSideStorage","all","dispatchSelfId","selfId","sendLogin","customer","customer_side_storage","is_mobile","channelType","channel_type","customer_page","race","_store","onSuccess","onError","steps","cancelled","loginResponse","toLowerCase","intermediateResult","step","shift","_FAIL_ALL_REQUESTS_ME","failAllRequests","getAllRequests","rejects","requestId","failRequest","requestAction","SUCCESS","freeze","success","parseCommonEventProps","parsed","authorId","author_id","createdAt","created_at","downsizeWithRatio","dimensions","biggerProp","smallerProp","bigger","smaller","height","width","ratio","ceil","parseFile","file","image","contentType","content_type","thumbnails","default","thumbnail_url","high","thumbnail2x_url","parseImage","parseFilledForm","filledForm","parseMessage","parseRichMessageElement","title","subtitle","buttons","serverButton","postbackId","postback_id","userIds","user_ids","role","button","_button","webview_height","webviewHeight","parseRichMessage","richMessage","template_id","template","elements","parseSystemMessage","text_vars","textVars","parseEvent$1","parseGreeting","greeting","addon","uniqueId","unique_id","displayedFirstTime","displayed_first_time","accepted","agent","avatar","jobTitle","job_title","isBot","is_bot","parseAccess","user","events_seen_up_to","el","parseThread","Boolean","previousThreadId","previous_thread_id","nextThreadId","next_thread_id","queue","parseQueue","parseIncomingChat","parseChatUser","eventsSeenUpToMap","customerProps","optionalProps","parseCustomerCommonProps","parseCustomer","statistics","chatsCount","chats_count","threadsCount","threads_count","visitsCount","visits_count","pageViewsCount","page_views_count","greetingsShownCount","greetings_shown_count","greetingsAcceptedCount","greetings_accepted_count","parseQueueUpdate","queueUpdate","waitTime","wait_time","queuedAt","queued_at","present","FAIL_ALL_REQUESTS_MESSAGES","updateStateIfNeeded","chatsSummary","emitUsers","rest","_rest","handlePush","_ref6","lc2","queue_pos","queue_waiting_time","content","groups","group","availability","handleResponse","_ref7","_ref8","_ref9","login","reinitialize","customer_fields","page_url","Authorization","_action$payload","_action$payload2","dynamicConfig","eventData","_ref10","_action$payload3","isDestroyed","_ref3$payload","request_id","sendRequest$1","parseChatPropertiesUpdatedPush","chat_id","parseChatTransferredPush","basePayload","transferredTo","transferred_to","agent_ids","agentIds","requesterId","requester_id","parseCustomerPageUpdatedPush","timestamp","parseCustomerUpdatedPush","parseEventPropertiesDeletedPush","parseEventPropertiesUpdatedPush","parseEventUpdatedPush","parseEventsMarkedAsSeenPush","userId","user_id","seenUpTo","seen_up_to","parseGreetingAcceptedPush","parseIncomingChatPush","parseIncomingEventPush","parseIncomingGreetingPush","parseIncomingRichMessagePostbackPush","parseIncomingTypingIndicatorPush","typingIndicator","typing_indicator","isTyping","is_typing","parseQueuePositionUpdatedPush","parseThreadPropertiesDeletedPush","parseThreadPropertiesUpdatedPush","parseUserAddedToChatPush","parseUserRemovedFromChatPush","parseFields","options","commentLabel","comment_label","parseGetFormResponse","form","withFakeIds","parseGetUrlInfoResponse","urlInfo","description","image_url","imageUrl","image_width","image_height","imageWidth","imageHeight","onlineGroups","online_groups_ids","customerGroups","customer_groups","monitoringGroupId","monitoring","chats_summary","lastThreadCreatedAt","last_thread_created_at","lastThreadId","last_thread_id","lastEventsPerType","last_event_per_type","_ref3$properties","chatSummary","lastEventPerType","refinedLastEventsPerType","lastEventSummariesArray","eventType","lastEventSummary","eventSummaryA","eventSummaryB","thread_created_at","lastEvent","order","totalChats","total_chats","summary","previousPageId","previous_page_id","nextPageId","next_page_id","parseListGroupStatusesResponse","groups_status","parseListThreadsResponse","threads","parseLoginResponse","__priv_dynamic_config","has_active_thread","hasUnreadEvents","has_unread_events","parsePush","handleResponse$1","_getRequest2","parseResponse","socketListener","toUpperCase","handleResponseError","_getRequest3","handlePushResponse","parsedPush","handlePush$1","appendString","timeZone","customerId","_ref$groupId","ticketBody","licence_id","ticket_message","offline_message","visitor_id","requester","timezone","label","subject","_text","_value2","_text2","mail","_value3","_text3","_value4","_text4","_value5","answers","_text5","createTicketBody","ok","json","errHandler","errors","firstError","formatBytes","bytes","precision","kilobytes","toFixed","megabytes","size","validateFile","uploadError","_uploadError$response","eventName","event_name","severity","sdkVersion","img","Image","listenersMap","createDebuggedMethods","methods","prefix","methodNames","methodName","_console","enhancedListenerId","enhancedListener","debug","_sdk","sdk","_on","_once","_off","_getChatHistory","getChatHistory","_console2","_len2","_key2","history","logLabel","_console3","_console4","_console5","_config$autoConnect","autoConnect","instanceConfig","client","proxy","_client","sendRequestAction$$1","startConnection","api","acceptGreeting","greetingId","greeting_id","activateChat","requestData","parseActivateChatData","cancelGreeting","cancelRate","params","_params$properties","listThreads","deleteThreadProperties","rating","deactivateChat","deleteChatProperties","deleteEventProperties","getChat","historyState","queuedTasks","minEventsCount","pageId","reverse","done","queuedTask","_next","createChatHistoryIterator","getCustomer","getForm","getPredictedAgent","getUrlInfo","_ref11","listChats","_ref12","_ref12$limit","limit","page_id","listGroupStatuses","_temp2","_ref14","_ref14$sortOrder","sortOrder","sort_order","min_events_count","markEventsAsSeen","_ref15","rateChat","_ref16","updateThreadProperties","sendEvent","_sendEvent","sendEvent$$1","attachToLastThread","attach_to_last_thread","sendTicketForm","sendRichMessagePostback","_ref17","setCustomerSessionFields","_ref18","setSneakPeek","_ref19","sneakPeekText","sneak_peek_text","startChat","updateChatProperties","_ref20","updateCustomer","updateCustomerPage","updateEventProperties","_ref21","_ref22","uploadFile","BufferedSender","sender","sendBuffer","sendStop","sendSchedule","sendScheduleWait","URL","escape","urlUtils","log","Event","loc","CloseEvent","TransportMessageEvent","InfoReceiver","SockJS","protocols","CONNECTING","extensions","protocol","protocols_whitelist","_transportsWhitelist","_transportOptions","transportOptions","_timeout","timeout","sessionId","_generateSessionId","_server","server","numberString","parsedUrl","host","SyntaxError","hash","secure","isLoopbackAddr","hostname","sortedProtocols","o","getOrigin","href","_origin","set","_urlInfo","hasDomain","sameOrigin","isOriginEqual","sameScheme","isSchemeEqual","_ir","_receiveInfo","userSetCode","CLOSING","CLOSED","OPEN","quote","_rto","countRTO","_transUrl","base_url","extend","enabledTransports","filterToEnabled","_transports","main","Transport","unshift","timeoutMs","_transportTimeoutId","_transportTimeout","transportUrl","addPath","transportObj","_open","dispatchEvent","p","wasClean","forceFail","onclose","availableTransports","SenderReceiver","JsonpReceiver","jsonpSender","JsonPTransport","ArrayPrototype","ObjectPrototype","FunctionPrototype","Function","StringPrototype","array_slice","_toString","isFunction","val","isString","supportsDescriptors","forceAssign","toObject","toInteger","num","n","abs","Empty","that","binder","bound","boundLength","boundArgs","properlyBoxesNonStrict","properlyBoxesStrict","boxedString","splitString","fun","thisp","_","__","context","hasFirefox2IndexOfBug","sought","compliantExecNpcg","string_split","exec","separator","separator2","lastIndex","lastLength","output","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","test","string_substr","substr","hasNegativeSubstrBug","start","Driver","WebSocket","MozWebSocket","$","$trimStart","FORCED","forcedStringTrimMethod","trimStart","forced","trimLeft","candidateSelectors","candidateSelector","matches","Element","msMatchesSelector","webkitMatchesSelector","tabbable","candidate","candidateTabindex","regularTabbables","orderedTabbables","candidates","querySelectorAll","includeContainer","isNodeMatchingSelectorTabbable","getTabindex","documentOrder","tabIndex","sortOrderedTabbables","isNodeMatchingSelectorFocusable","isInput","isRadio","checked","nodes","getCheckedRadio","ownerDocument","isTabbableRadio","isNonTabbableRadio","disabled","isHiddenInput","offsetParent","getComputedStyle","visibility","isHidden","isTabbable","isFocusable","focusableCandidateSelector","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","tagName","area","callback","enctype","acceptCharset","addQuery","submit","completed","onreadystatechange","Backoff","opts","factor","setMin","setMax","setJitter","XDRObject","_start","xdr","XDomainRequest","_error","ontimeout","responseText","utils","XHR","AbstractXHRObject","noCredentials","supportsCORS","cors","ignored","InfoReceiverIframe","ir","required","qs","slashes","protocolre","left","rules","address","NaN","ignore","lolcation","finaldestination","Url","unescape","extractProtocol","parser","relative","extracted","instruction","instructions","charAt","path","last","up","port","username","password","part","pop","char","ins","IframeTransport","IframeWrapTransport","baseUrl","iframeInfo","facadeTransport","navigator","userAgent","XDR","XHRCors","XHRLocal","XHRFake","InfoIframe","doXhr","_getReceiver","timeoutRef","fetch","XdrStreamingTransport","XdrPollingTransport","logObject","level","levelExists","to","Polling","urlSuffix","senderFunc","Receiver","pollUrl","poll","go","ifr","d","initEvent","canBubble","cancelable","bubbles","timeStamp","stopPropagation","preventDefault","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","ctor","superCtor","super_","constructor","TempCtor","__webpack_amd_options__","symbolObservablePonyfill","root","XhrPollingTransport","extraLookup","extraEscapable","quoted","escapable","unrolled","fromCharCode","charCodeAt","unrollLookup","transportList","_sockjs_onload","requireObjectCoercible","whitespace","ltrim","rtrim","createMethod","TYPE","$this","end","trim","opt","ajaxUrl","createAjaxSender","iframeObj","onmessageCallback","_message","iframeMessage","cdata","deprecate","paths","WebsocketDriver","WebSocketTransport","ws","XhrDriver","bufferPosition","_chunkHandler","idx","buf","q","addr","InfoIframeReceiver","parentOrigin","transportMap","at","bootstrap_iframe","facade","transportsWhitelist","trans","websocket","cookie_needed","isLoader","objectTypes","freeExports","nodeType","freeGlobal","runInContext","nativeJSON","objectProto","getClass","isProperty","attempt","func","errorFunc","exception","isExtended","has","isSupported","serialized","stringifySupported","toJSON","parseSupported","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","charIndexBuggy","_forOwn","Properties","dontEnums","property","valueOf","isConstructor","hasProperty","Escapes","92","34","8","12","10","13","9","toPaddedString","_serializeDate","getData","year","month","date","time","hours","minutes","seconds","milliseconds","Months","getDay","dateToJSON","nativeStringify","nativeToJSON","escapeChar","character","charCode","escaped","reEscape","className","serialize","indentation","stack","results","Index","Source","Unescapes","47","98","116","110","102","114","lex","begin","isSigned","temp","walk","hasMembers","previousJSON","isRestored","HtmlfileReceiver","decodeURIComponent","htmlfileEnabled","constructFunc","stop","decode","encode","pairs","urlWithId","_callback","_createScript","_abort","scriptErrorTimeout","aborting","script2","script","onclick","_scriptError","errorTimer","loadedOkay","charset","htmlFor","async","head","getElementsByTagName","insertBefore","firstChild","HtmlFileTransport","EventSourceTransport","t","receiveUrl","_scheduleReceiver","pollIsClosing","crypto","randomBytes","ret","number","fails","whitespaces","METHOD_NAME","getRandomValues","Uint8Array"],"mappings":"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","file":"75-dac3517a598155eab27d.js","sourcesContent":["'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {},\n    afterUnload = false // detect google chrome packaged apps because they don't allow the 'unload' event\n,\n    isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime;\nmodule.exports = {\n  attachEvent: function attachEvent(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener); // I get 'window' for ie8.\n\n      global.attachEvent('on' + event, listener);\n    }\n  },\n  detachEvent: function detachEvent(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  },\n  unloadAdd: function unloadAdd(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n\n    return ref;\n  },\n  unloadDel: function unloadDel(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  },\n  triggerUnloadCallbacks: function triggerUnloadCallbacks() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function unloadTriggered() {\n  if (afterUnload) {\n    return;\n  }\n\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n}; // 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\n\n\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    objectUtils = require('./utils/object');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n  this.xo.once('finish', function (status, text) {\n    var info, rtt;\n\n    if (status === 200) {\n      rtt = +new Date() - t0;\n\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function () {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;","'use strict';\n\nvar JSON3 = require('json3'),\n    iframeUtils = require('./utils/iframe');\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function (code, reason) {\n  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));\n};\n\nFacadeJS.prototype._transportMessage = function (frame) {\n  iframeUtils.postMessage('t', frame);\n};\n\nFacadeJS.prototype._send = function (data) {\n  this._transport.send(data);\n};\n\nFacadeJS.prototype._close = function () {\n  this._transport.close();\n\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    EventSourceDriver = require('eventsource');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n\n  es.onmessage = function (e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n\n  es.onerror = function (e) {\n    debug('error', es.readyState, e); // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n\n    var reason = es.readyState !== 2 ? 'network' : 'permanent';\n\n    self._cleanup();\n\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function () {\n  debug('abort');\n\n  this._cleanup();\n\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function () {\n  debug('cleanup');\n  var es = this.es;\n\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function (reason) {\n  debug('close', reason);\n  var self = this; // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n\n  setTimeout(function () {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;","'use strict';\n\nvar eventUtils = require('./event'),\n    JSON3 = require('json3'),\n    browser = require('./browser');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp',\n  currentWindowId: null,\n  polluteGlobalNamespace: function polluteGlobalNamespace() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  },\n  postMessage: function postMessage(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON3.stringify({\n        windowId: module.exports.currentWindowId,\n        type: type,\n        data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  },\n  createIframe: function createIframe(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n\n    var unattach = function unattach() {\n      debug('unattach');\n      clearTimeout(tref); // Explorer had problems with that.\n\n      try {\n        iframe.onload = null;\n      } catch (x) {// intentionally empty\n      }\n\n      iframe.onerror = null;\n    };\n\n    var cleanup = function cleanup() {\n      debug('cleanup');\n\n      if (iframe) {\n        unattach(); // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n\n        setTimeout(function () {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n\n    var onerror = function onerror(err) {\n      debug('onerror', err);\n\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n\n    var post = function post(msg, origin) {\n      debug('post', msg, origin);\n      setTimeout(function () {\n        try {\n          // When the iframe is not loaded, IE raises an exception\n          // on 'contentWindow'.\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        } catch (x) {// intentionally empty\n        }\n      }, 0);\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n\n    iframe.onerror = function () {\n      onerror('onerror');\n    };\n\n    iframe.onload = function () {\n      debug('onload'); // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n\n      clearTimeout(tref);\n      tref = setTimeout(function () {\n        onerror('onload timeout');\n      }, 2000);\n    };\n\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function () {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post,\n      cleanup: cleanup,\n      loaded: unattach\n    };\n  }\n  /* eslint no-undef: \"off\", new-cap: \"off\" */\n  ,\n  createHtmlfile: function createHtmlfile(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n\n    var unattach = function unattach() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n\n    var cleanup = function cleanup() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n\n    var onerror = function onerror(r) {\n      debug('onerror', r);\n\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n\n    var post = function post(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function () {\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {// intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' + 'document.domain=\"' + global.document.domain + '\";' + '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n\n    iframe.onerror = function () {\n      onerror('onerror');\n    };\n\n    tref = setTimeout(function () {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post,\n      cleanup: cleanup,\n      loaded: unattach\n    };\n  }\n};\nmodule.exports.iframeEnabled = false;\n\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' || typeof global.postMessage === 'object') && !browser.isKonqueror();\n}","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    XHRLocalObject = require('./sender/xhr-local'),\n    browser = require('../utils/browser');\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function (info) {\n  if (info.nullOrigin) {\n    return false;\n  } // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n\n\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\n\nXhrStreamingTransport.needBody = !!global.document;\nmodule.exports = XhrStreamingTransport;","module.exports = global.EventSource;","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nvar inherits = require('inherits'),\n    EventTarget = require('./eventtarget');\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function (type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function (type, listener) {\n  var self = this,\n      fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function () {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n\n  if (!listeners) {\n    return;\n  } // equivalent of Array.prototype.slice.call(arguments, 1);\n\n\n  var l = arguments.length;\n  var args = new Array(l - 1);\n\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\nmodule.exports.EventEmitter = EventEmitter;","import \"core-js/modules/es.array.reduce\";\n\nfunction add(first, second) {\n  return first + second;\n}\n\nvar _ref = {},\n    hasOwnProperty = _ref.hasOwnProperty;\n\nfunction hasOwn(prop, obj) {\n  return hasOwnProperty.call(obj, prop);\n}\n\nfunction assign() {\n  // eslint-disable-next-line no-func-assign\n  assign = Object.assign || function (target) {\n    for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    sources.forEach(function (source) {\n      // false positive\n      // eslint-disable-next-line no-unused-vars\n      for (var key in source) {\n        if (hasOwn(key, source)) {\n          target[key] = source[key];\n        }\n      }\n    });\n    return target;\n  };\n\n  return assign.apply(void 0, arguments);\n}\n\nvar capitalizeFirstLetter = function capitalizeFirstLetter(text) {\n  return text.charAt(0).toUpperCase() + text.slice(1);\n};\n\nfunction flatMap(iteratee, arr) {\n  var _ref;\n\n  return (_ref = []).concat.apply(_ref, arr.map(iteratee));\n}\n\nfunction chain(fn, listOrFn) {\n  if (typeof listOrFn === 'function') {\n    return function (list) {\n      return fn(listOrFn(list))(list);\n    };\n  }\n\n  return flatMap(fn, listOrFn);\n}\n\nvar isArray = Array.isArray;\n\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null && !isArray(obj);\n}\n\nfunction mapValues(mapper, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[key] = mapper(obj[key]);\n    return acc;\n  }, {});\n}\n\nfunction cloneDeep(value) {\n  if (isArray(value)) {\n    return value.map(cloneDeep);\n  }\n\n  if (isObject(value)) {\n    return mapValues(cloneDeep, value);\n  }\n\n  return value;\n} // slightly simplified version of https://github.com/sindresorhus/camelcase/blob/a526ef0399f9a1310eaacafa0ae4a69da4a2f1ad/index.js\n// TODO: possibly could be rewritten using short-ish regexp\n\n\nvar preserveCamelCase = function preserveCamelCase(input) {\n  var text = input;\n  var isLastCharLower = false;\n  var isLastCharUpper = false;\n  var isLastLastCharUpper = false;\n\n  for (var index = 0; index < text.length; index++) {\n    var _char = text[index];\n\n    if (isLastCharLower && /[a-zA-Z]/.test(_char) && _char.toUpperCase() === _char) {\n      text = text.slice(0, index) + '-' + text.slice(index);\n      isLastCharLower = false;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = true;\n      index++;\n    } else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(_char) && _char.toLowerCase() === _char) {\n      text = text.slice(0, index - 1) + '-' + text.slice(index - 1);\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = false;\n      isLastCharLower = true;\n    } else {\n      isLastCharLower = _char.toLowerCase() === _char;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = _char.toUpperCase() === _char;\n    }\n  }\n\n  return text;\n};\n\nfunction camelCase(input) {\n  var text = input.trim();\n\n  if (text.length === 0) {\n    return '';\n  }\n\n  if (text.length === 1) {\n    return text.toLowerCase();\n  }\n\n  if (/^[a-z\\d]+$/.test(text)) {\n    return text;\n  }\n\n  var hasUpperCase = text !== text.toLowerCase();\n\n  if (hasUpperCase) {\n    text = preserveCamelCase(text);\n  }\n\n  text = text.replace(/^[_.\\- ]+/, '').toLowerCase().replace(/[_.\\- ]+(\\w|$)/g, function (match, p1) {\n    return p1.toUpperCase();\n  });\n  return text;\n}\n\nfunction compact(collection) {\n  return isArray(collection) ? collection.filter(function (value) {\n    return value !== null && value !== undefined;\n  }) : Object.keys(collection).reduce(function (result, key) {\n    var value = collection[key];\n\n    if (value !== null && value !== undefined) {\n      result[key] = value;\n    }\n\n    return result;\n  }, {});\n}\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return funcs.reduce(function (composed, next) {\n    return function () {\n      return composed(next.apply(void 0, arguments));\n    };\n  });\n}\n\nfunction debounce(ms, fn) {\n  // actual return type of setTimeout differs per platform (browser vs node)\n  var timeoutId;\n  return function () {\n    clearTimeout(timeoutId);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    timeoutId = setTimeout.apply(void 0, [fn, ms].concat(args));\n  };\n}\n\nfunction deepMerge(target) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  if (!sources.length) return target;\n  var source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    // false negative\n    // eslint-disable-next-line no-unused-vars\n    for (var key in source) {\n      if (isObject(source[key])) {\n        var _Object$assign;\n\n        if (!target[key]) Object.assign(target, (_Object$assign = {}, _Object$assign[key] = {}, _Object$assign));\n        deepMerge(target[key], source[key]);\n      } else {\n        var _Object$assign2;\n\n        Object.assign(target, (_Object$assign2 = {}, _Object$assign2[key] = source[key], _Object$assign2));\n      }\n    }\n  }\n\n  return deepMerge.apply(void 0, [target].concat(sources));\n}\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nfunction defaultTo(defaultValue) {\n  return function (value) {\n    return isNil(value) ? defaultValue : value;\n  };\n}\n\nfunction drop(count, arr) {\n  return arr.slice(count);\n}\n\nfunction dropRight(count, arr) {\n  return arr.slice(0, -count);\n}\n\nfunction ensureArray(maybeArr) {\n  return isArray(maybeArr) ? maybeArr : [maybeArr];\n}\n\nfunction entries(obj) {\n  return Object.keys(obj).map(function (key) {\n    return [key, obj[key]];\n  });\n}\n\nfunction find(predicate, arr) {\n  for (var index = 0; index < arr.length; index++) {\n    var element = arr[index];\n\n    if (predicate(element)) {\n      return element;\n    }\n  }\n}\n\nfunction findIndex(predicate, arr) {\n  for (var index = 0; index < arr.length; index++) {\n    if (predicate(arr[index])) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n\nfunction findKey(predicate, obj) {\n  return find(function (key) {\n    return predicate(obj[key]);\n  }, Object.keys(obj));\n}\n\nfunction findLast(predicate, arr) {\n  for (var index = arr.length - 1; index >= 0; index--) {\n    if (predicate(arr[index])) {\n      return arr[index];\n    }\n  }\n}\n\nfunction findLastIndexFrom(predicate, startIndex, arr) {\n  for (var index = startIndex; index >= 0; index--) {\n    if (predicate(arr[index])) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n\nfunction findLastIndex(predicate, arr) {\n  return findLastIndexFrom(predicate, arr.length - 1, arr);\n}\n\nfunction filledArray(length, value) {\n  var arr = [];\n\n  while (length--) {\n    arr.push(value);\n  }\n\n  return arr;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction flatten(arr) {\n  return flatMap(identity, arr);\n}\n\nfunction forOwn(callback, obj) {\n  return Object.keys(obj).forEach(function (key) {\n    callback(obj[key], key);\n  });\n}\n\nfunction fromPairs(pairs) {\n  return pairs.reduce(function (obj, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    obj[key] = value;\n    return obj;\n  }, {});\n}\n\nfunction generateRandomId() {\n  return Math.random().toString(36).substring(2);\n}\n\nfunction generateUniqueId(map) {\n  var id = generateRandomId();\n  return hasOwn(id, map) ? generateUniqueId(map) : id;\n} // based on https://github.com/developit/dlv/blob/d7ec976d12665f1c25dec2acf955dfc2e8757a9c/index.js\n\n\nfunction get(propPath, obj) {\n  var arrPath = typeof propPath === 'string' ? propPath.split('.') : propPath;\n  var pathPartIndex = 0;\n  var result = obj;\n\n  while (result && pathPartIndex < arrPath.length) {\n    result = result[arrPath[pathPartIndex++]];\n  }\n\n  return result;\n}\n\nfunction getOr(defaultValue, prop, obj) {\n  var propValue = get(prop, obj);\n  return propValue !== undefined && propValue !== null ? propValue : defaultValue;\n}\n\nfunction groupBy(mapper, collection) {\n  return Object.keys(collection).reduce(function (grouped, key) {\n    var element = collection[key];\n    var groupKey = mapper(element);\n    grouped[groupKey] = grouped[groupKey] || [];\n    grouped[groupKey].push(element);\n    return grouped;\n  }, {});\n}\n\nfunction groupKeys(mapper, obj) {\n  return Object.keys(obj).reduce(function (grouped, key) {\n    var groupKey = mapper(key);\n    grouped[groupKey] = grouped[groupKey] || {};\n    grouped[groupKey][key] = obj[key];\n    return grouped;\n  }, {});\n}\n\nfunction includes(value, arrOrStr) {\n  return arrOrStr.indexOf(value) !== -1;\n}\n\nfunction isEmpty(collection) {\n  return (isArray(collection) ? collection : Object.keys(collection)).length === 0;\n}\n\nfunction isFalsy(value) {\n  return !value;\n}\n\nfunction isTruthy(value) {\n  return !!value;\n}\n\nvar isPromise = function isPromise(promise) {\n  return !!promise && typeof promise.then === 'function';\n};\n\nfunction keyBy(prop, arr) {\n  return arr.reduce(function (acc, el) {\n    acc[el[prop]] = el;\n    return acc;\n  }, {});\n}\n\nfunction keys(obj) {\n  var keysArray = []; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      keysArray.push(property);\n    }\n  }\n\n  return keysArray;\n} // TODO: this  should return `T | undefined` to match native behavior\n\n\nfunction last(arr) {\n  return arr.length > 0 ? arr[arr.length - 1] : null;\n}\n\nfunction mapKeys(mapper, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[mapper(key)] = obj[key];\n    return acc;\n  }, {});\n}\n\nfunction mapValuesIndexed(iteratee, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[key] = iteratee(obj[key], key);\n    return acc;\n  }, {});\n}\n\nfunction merge(objA, objB) {\n  if (isEmpty(objB)) {\n    return objA;\n  }\n\n  var result = {};\n  forOwn(function (value, key) {\n    if (hasOwn(key, objB)) {\n      if (isObject(objA[key]) && isObject(objB[key])) {\n        result[key] = merge(objA[key], objB[key]);\n      } else if (isArray(objA[key]) && isArray(objB[key])) {\n        var length = Math.max(objA[key].length, objB[key].length);\n        result[key] = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          if (i in objB[key]) {\n            result[key][i] = objB[key][i];\n          } else if (i in objA[key]) {\n            result[key][i] = objA[key][i];\n          }\n        }\n      } else {\n        result[key] = objB[key];\n      }\n    } else {\n      result[key] = objA[key];\n    }\n  }, objA);\n  forOwn(function (value, key) {\n    if (!hasOwn(key, result)) {\n      result[key] = objB[key];\n    }\n  }, objB);\n  return result;\n}\n\nfunction mergeAll(objs) {\n  if (objs.length === 0) {\n    return {};\n  }\n\n  var first = objs[0],\n      rest = objs.slice(1);\n  return rest.reduce(function (merged, obj) {\n    return merge(merged, obj);\n  }, first);\n}\n\nfunction memoizeWith(keyResolver, func) {\n  var cache = {};\n  return function () {\n    var key = keyResolver.apply(void 0, arguments);\n\n    if (hasOwn(key, cache)) {\n      return cache[key];\n    }\n\n    var value = func.apply(void 0, arguments);\n    cache[key] = value;\n    return value;\n  };\n} // TODO: technically this should accept AnyFunction but it doesn't type check currently with that for some reason\n\n\nfunction memoize(func) {\n  return memoizeWith(identity, func);\n}\n\nfunction memoizeOne(fn) {\n  var called = false;\n  var memoized;\n  var cacheKey;\n  return function () {\n    if (called && (arguments.length <= 0 ? undefined : arguments[0]) === cacheKey) {\n      return memoized;\n    }\n\n    called = true;\n    cacheKey = arguments.length <= 0 ? undefined : arguments[0];\n    memoized = fn.apply(void 0, arguments);\n    return memoized;\n  };\n}\n\nfunction noop() {}\n\nfunction values(obj) {\n  return Object.keys(obj).map(function (key) {\n    return obj[key];\n  });\n}\n\nfunction numericSortBy(propOrMapper, collection) {\n  var mapper = typeof propOrMapper === 'function' ? propOrMapper : function (element) {\n    return get(propOrMapper, element);\n  };\n  return (isArray(collection) ? [].concat(collection) : values(collection)).sort(function (elementA, elementB) {\n    return mapper(elementA) - mapper(elementB);\n  });\n}\n\nfunction omitByIndexed(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (!predicate(obj[key], key)) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction omit(keys, obj) {\n  return omitByIndexed(function (_, key) {\n    return keys.indexOf(key) !== -1;\n  }, obj);\n}\n\nfunction omitBy(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (!predicate(obj[key])) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction once(fn) {\n  var called = false;\n  var result;\n  return function () {\n    if (called) {\n      return result;\n    }\n\n    called = true;\n    return result = fn.apply(void 0, arguments);\n  };\n}\n\nfunction over(fns) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return fns.map(function (fn) {\n      return fn.apply(void 0, args);\n    });\n  };\n}\n\nfunction takeLast(count, arr) {\n  return arr.slice(-count);\n}\n\nfunction overArgs(fn, transformers) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var transformed = transformers.map(function (transform, index) {\n      return transform(args[index]);\n    });\n    return args.length > transformed.length ? fn.apply(void 0, transformed.concat(takeLast(args.length - transformed.length, args))) : fn.apply(void 0, transformed);\n  };\n}\n\nfunction pair(a, b) {\n  return [a, b];\n}\n\nfunction partitionObject(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[predicate(obj[key]) ? 0 : 1][key] = obj[key];\n    return acc;\n  }, [{}, {}]);\n}\n\nfunction pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n}\n\nfunction pickBy(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (predicate(obj[key])) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction pickByIndexed(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (predicate(obj[key], key)) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction pickOwn(props, obj) {\n  return props.reduce(function (acc, prop) {\n    if (hasOwn(prop, obj)) {\n      acc[prop] = obj[prop];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction randomInt(min, max) {\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n\nfunction range(max) {\n  var arr = [];\n  var counter = 0;\n\n  while (counter <= max) {\n    arr.push(counter++);\n  }\n\n  return arr;\n}\n\nfunction reject(predicate, arr) {\n  return arr.filter(function (element) {\n    return !predicate(element);\n  });\n}\n\nfunction removeAt(index, arr) {\n  var copy = [].concat(arr);\n  copy.splice(index, 1);\n  return copy;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction set(_keys, val, obj) {\n  var _extends2;\n\n  var keys = _keys.split ? _keys.split('.') : _keys;\n  var index = keys[0];\n  var finalVal = val;\n\n  if (keys.length > 1) {\n    // eslint-disable-next-line eqeqeq\n    var nextObj = obj != null && hasOwn(index, obj) ? obj[index] : {};\n    finalVal = set(keys.slice(1), val, nextObj);\n  }\n\n  return _extends({}, obj, (_extends2 = {}, _extends2[index] = finalVal, _extends2));\n} // https://github.com/reactjs/react-redux/blob/5d792a283554cff3d2f54fad1be1f79cbcab33fe/src/utils/shallowEqual.js\n\n\nfunction is(first, second) {\n  if (first === second) {\n    return first !== 0 || second !== 0 || 1 / first === 1 / second;\n  } // eslint-disable-next-line no-self-compare\n\n\n  return first !== first && second !== second;\n}\n\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return false;\n\n  for (var index = 0; index < keysA.length; index++) {\n    if (!hasOwn(keysA[index], objB) || !is(objA[keysA[index]], objB[keysA[index]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction sign(value) {\n  if (typeof value !== 'number' || isNaN(value)) {\n    return NaN;\n  }\n\n  if (value === 0) {\n    return 0;\n  } // eslint-disable-next-line no-compare-neg-zero\n\n\n  if (value === -0) {\n    return -0;\n  }\n\n  return value > 0 ? 1 : -1;\n}\n\nfunction shuffle(arr) {\n  var copy = arr.slice();\n  var lastIndex = arr.length - 1;\n\n  for (var i = 0; i < arr.length; i++) {\n    var randomIndex = randomInt(i, lastIndex);\n    var randomValue = copy[randomIndex];\n    copy[randomIndex] = copy[i];\n    copy[i] = randomValue;\n  }\n\n  return copy;\n}\n\nfunction sliceDiff(slice, obj) {\n  var picked = pickByIndexed(function (value, key) {\n    return value !== obj[key];\n  }, slice);\n  return isEmpty(picked) ? null : picked;\n} // TODO: this could be written a lot better\n\n\nfunction snakeCase(str) {\n  var snakeCased = str.replace(/[A-Z]|([-_ ]+)/g, function (match) {\n    var code = match.charCodeAt(0);\n    var upperCased = code > 64 && code < 91;\n    return upperCased ? \"_\" + match.toLowerCase() : '_';\n  });\n  return snakeCased[0] === '_' ? snakeCased.substr(1) : snakeCased;\n}\n\nfunction someAreTruthy(arr) {\n  return arr.some(identity);\n}\n\nfunction splitAt(splitPoint, arrOrStr) {\n  return [arrOrStr.slice(0, splitPoint), arrOrStr.slice(splitPoint, arrOrStr.length)];\n}\n\nfunction splitRightWhenAccum(fn, acc, arr) {\n  var result = false;\n\n  for (var index = arr.length; index > 0; index--) {\n    var _fn = fn(arr[index - 1], acc);\n\n    result = _fn[0];\n    acc = _fn[1];\n\n    if (result) {\n      return splitAt(index - 1, arr);\n    }\n  }\n\n  return [[], arr];\n}\n\nfunction spread(fn) {\n  return function (args) {\n    return fn.apply(void 0, args);\n  };\n}\n\nfunction sum(numbers) {\n  return numbers.reduce(add, 0);\n}\n\nfunction take(count, arr) {\n  return arr.slice(0, count);\n}\n\nfunction takeRightWhileFrom(predicate, startIndex, arr) {\n  var endIndex = findLastIndexFrom(function (element) {\n    return !predicate(element);\n  }, startIndex, arr);\n  return endIndex === startIndex ? [] : arr.slice(endIndex + 1, startIndex + 1);\n}\n\nfunction takeRightWhile(predicate, arr) {\n  return takeRightWhileFrom(predicate, arr.length - 1, arr);\n}\n\nfunction throttle(ms, fn) {\n  var lastCall = Date.now() - 2 * ms;\n  var trailingId;\n\n  var invoke = function invoke() {\n    lastCall = Date.now();\n    fn.apply(void 0, arguments);\n  };\n\n  return function () {\n    var now = Date.now();\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (now - lastCall >= ms) {\n      invoke.apply(void 0, args);\n      return;\n    }\n\n    clearTimeout(trailingId);\n    trailingId = setTimeout.apply(void 0, [invoke, lastCall - now + ms].concat(args));\n  };\n}\n\nfunction toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n}\n\nvar toFixedNumber = function toFixedNumber(num, digits) {\n  return Number(num.toFixed(digits));\n};\n\nvar toPairs = function toPairs(obj) {\n  return Object.keys(obj).map(function (key) {\n    return [key, obj[key]];\n  });\n};\n\nfunction trailingThrottle(ms, fn) {\n  var lastCall = Date.now() - 2 * ms;\n  var trailingId;\n\n  var invoke = function invoke() {\n    lastCall = Date.now();\n    return fn.apply(void 0, arguments);\n  };\n\n  return function () {\n    var now = Date.now();\n\n    if (now - lastCall >= ms) {\n      lastCall = Date.now();\n    }\n\n    clearTimeout(trailingId);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    trailingId = setTimeout.apply(void 0, [invoke, lastCall - now + ms].concat(args));\n  };\n}\n\nfunction leadingThrottle(ms, fn) {\n  var lastCall = 0;\n  return function () {\n    var now = Date.now();\n\n    if (now - lastCall >= ms) {\n      lastCall = Date.now();\n      fn.apply(void 0, arguments);\n    }\n  };\n}\n\nvar stringCompare = function stringCompare(strA, strB) {\n  if (strA === strB) {\n    return 0;\n  }\n\n  return strA < strB ? -1 : 1;\n};\n\nvar leadingWhiteSpace = /^\\s+/;\n\nfunction trimStart(str) {\n  return str.replace(leadingWhiteSpace, '');\n}\n\nvar trailingWhiteSpace = /\\s+$/;\n\nfunction trimEnd(str) {\n  return str.replace(trailingWhiteSpace, '');\n}\n\nfunction repeat(count, text) {\n  return Array(count + 1).join(text);\n}\n\nfunction uniqBy(iteratee, arr) {\n  // with polyfills this could be just: return Array.from(new Set(arr.map(iteratee)))\n  var seen = [];\n  return arr.filter(function (element) {\n    var key = iteratee(element);\n\n    if (seen.indexOf(key) === -1) {\n      seen.push(key);\n      return true;\n    }\n\n    return false;\n  });\n}\n\nfunction uniq(arr) {\n  return uniqBy(identity, arr);\n}\n\nfunction update(index, newElement, arr) {\n  return [].concat(arr.slice(0, index), [newElement], arr.slice(index + 1, arr.length));\n}\n\nfunction without(removed, arr) {\n  return arr.filter(function (element) {\n    return removed.indexOf(element) === -1;\n  });\n}\n\nfunction zipWith(zipper, arrayA, arrayB) {\n  return arrayA.map(function (elementA, index) {\n    return zipper(elementA, arrayB[index]);\n  });\n}\n\nfunction zip(arrayA, arrayB) {\n  return zipWith(pair, arrayA, arrayB);\n}\n\nexport { add, assign, camelCase, capitalizeFirstLetter, chain, cloneDeep, compact, compose, debounce, deepMerge, defaultTo, drop, dropRight, ensureArray, entries, filledArray, find, findIndex, findKey, findLast, findLastIndex, findLastIndexFrom, flatMap, flatten, forOwn, fromPairs, generateRandomId, generateUniqueId, get, getOr, groupBy, groupKeys, hasOwn, identity, includes, isArray, isEmpty, isFalsy, isNil, isObject, isPromise, isTruthy, keyBy, keys, last, leadingThrottle, mapKeys, mapValues, mapValuesIndexed, memoize, memoizeOne, memoizeWith, merge, mergeAll, noop, numericSortBy, omit, omitBy, omitByIndexed, once, over, overArgs, pair, partitionObject, pick, pickBy, pickByIndexed, pickOwn, randomInt, range, reject, removeAt, repeat, set, shallowEqual, shuffle, sign, sliceDiff, snakeCase, someAreTruthy, splitAt, splitRightWhenAccum, spread, stringCompare, sum, take, takeLast, takeRightWhile, takeRightWhileFrom, throttle, toArray, toFixedNumber, toPairs, trailingThrottle, trimEnd, trimStart, uniq, uniqBy, update, values, without, zip, zipWith };","function deferred() {\n  var def = {};\n  def.promise = new Promise(function (resolve, reject) {\n    def.resolve = resolve;\n    def.reject = reject;\n  });\n  return def;\n}\n\nexport default deferred;","import \"core-js/modules/es.array.reduce\";\nimport $$observable from 'symbol-observable';\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };","export default (function () {\n  var handlers = [];\n\n  var sideEffectsMiddleware = function sideEffectsMiddleware(store) {\n    return function (next) {\n      return function (action) {\n        var result = next(action);\n        handlers.forEach(function (handler) {\n          handler(action, store);\n        });\n        return result;\n      };\n    };\n  };\n\n  sideEffectsMiddleware.add = function (handler) {\n    handlers.push(handler);\n  };\n\n  return sideEffectsMiddleware;\n});","var testKey = '__test_storage_support__';\nexport var testStorageSupport = function testStorageSupport() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'local';\n\n  try {\n    var storage = window[type + 'Storage'];\n    storage.setItem(testKey, true);\n    storage.getItem(testKey);\n    storage.removeItem(testKey);\n    return true;\n  } catch (err) {\n    return false;\n  }\n};\nexport var createStorage = function createStorage() {\n  var memoryStorage = Object.defineProperties({}, {\n    getItem: {\n      value: function value(key) {\n        return memoryStorage[key] || null;\n      }\n    },\n    setItem: {\n      value: function value(key, _value) {\n        try {\n          memoryStorage[key] = String(_value);\n        } catch (err) {}\n      }\n    },\n    removeItem: {\n      value: function value(key) {\n        delete memoryStorage[key];\n      }\n    },\n    clear: {\n      value: function value() {\n        Object.keys(memoryStorage).forEach(memoryStorage.removeItem);\n      }\n    },\n    key: {\n      value: function value(index) {\n        return Object.keys(memoryStorage)[index] || null;\n      }\n    },\n    length: {\n      get: function get() {\n        return Object.keys(memoryStorage).length;\n      }\n    }\n  });\n  return memoryStorage;\n};\nexport default /*#__PURE__*/createStorage();","import memoryStorage, { testStorageSupport } from 'memory-web-storage';\nvar storage = testStorageSupport() ? window.localStorage : memoryStorage;\nvar index = {\n  setItem: function setItem(key, data) {\n    return new Promise(function (resolve) {\n      return resolve(storage.setItem(key, data));\n    });\n  },\n  getItem: function getItem(key) {\n    return new Promise(function (resolve) {\n      return resolve(storage.getItem(key));\n    });\n  },\n  removeItem: function removeItem(key) {\n    return new Promise(function (resolve) {\n      return resolve(storage.removeItem(key));\n    });\n  }\n};\nexport default index;","var index = function index(fn) {\n  return new Promise(function (resolve) {\n    resolve(fn());\n  });\n};\n\nexport default index;","import { toPairs, fromPairs } from '@livechat/data-utils';\n\nvar buildQueryString = function buildQueryString(obj) {\n  return toPairs(obj).map(function (pair) {\n    return pair.map(encodeURIComponent).join('=');\n  }).join('&');\n};\n\nvar decodeQueryString = function decodeQueryString(query) {\n  var pairs = query.split('&').map(function (pair) {\n    return pair.split('=').map(function (value) {\n      return decodeURIComponent(value.replace('+', '%20'));\n    });\n  });\n  var decoded = fromPairs(pairs);\n  return decoded;\n};\n\nvar hostnameRegexp = /(?:[^:]+:\\/\\/)?([^/\\s]+)/;\n\nfunction getHostname(url) {\n  var hostnameMatch = url.match(hostnameRegexp);\n  return hostnameMatch && hostnameMatch[1];\n}\n\nvar originRegexp = /[^:]+:\\/\\/[^(/|?)\\s]+/;\n\nvar getOrigin = function getOrigin(url) {\n  var domain = url.match(originRegexp);\n  return domain && domain[0];\n};\n\nvar searchRegexp = /.*?\\?([^#]+)/;\n\nvar getSearch = function getSearch(url) {\n  var match = url.match(searchRegexp);\n  return match ? \"?\" + match[1] : '';\n};\n\nvar trimSearch = function trimSearch(search) {\n  return search.replace(/^\\?/, '');\n};\n\nvar getQueryParams = function getQueryParams(url) {\n  var search = trimSearch(getSearch(url));\n  return decodeQueryString(search ? search : url);\n};\n\nvar getQueryParam = function getQueryParam(name, url) {\n  return getQueryParams(url)[name];\n};\n\nvar pathnameRegexp = /^(?:https?:)?\\/\\/[^/]+\\/([^?#]+)/;\n\nvar getPathname = function getPathname(url) {\n  var pathname = url.match(pathnameRegexp);\n  return \"/\" + (pathname && pathname[1] || '');\n}; // URL can contain leading C0 control or \\u0020 SPACE,\n// and any newline or tab are filtered out as if they're not part of the URL.\n// https://url.spec.whatwg.org/#url-parsing\n// Tab or newline are defined as \\r\\n\\t:\n// https://infra.spec.whatwg.org/#ascii-tab-or-newline\n// A C0 control is a code point in the range \\u0000 NULL to \\u001F\n// INFORMATION SEPARATOR ONE, inclusive:\n// https://infra.spec.whatwg.org/#c0-control-or-space\n\n\nvar intersperseWithTabOrNewline = function intersperseWithTabOrNewline(str) {\n  return str.replace(/\\w/g, '$&[\\\\r\\\\n\\\\t]*');\n};\n\nvar unsafeProtocol = new RegExp(\"^[\\0-\\x1F]*(\" + intersperseWithTabOrNewline('javascript') + \"|\" + intersperseWithTabOrNewline('data') + \"):\", 'i'); // would be better to whitelist things\n// but people might paste in protocolless URLs\n// and we would filter them out\n\nvar hasUnsafeProtocol = function hasUnsafeProtocol(url) {\n  return unsafeProtocol.test(url);\n};\n\nvar protocolRegexp = /^((http(s)?:)?\\/\\/)/;\n\nvar removeProtocol = function removeProtocol(url) {\n  return url.replace(protocolRegexp, '');\n};\n\nvar protocolRegexp$1 = /^((http(s)?:)?\\/\\/)/;\n\nvar getProtocol = function getProtocol(url) {\n  var match = url.match(protocolRegexp$1);\n  return match ? match[2] : null;\n};\n\nexport { buildQueryString, decodeQueryString, getHostname, getOrigin, getPathname, getProtocol, getQueryParam, getQueryParams, getSearch, hasUnsafeProtocol, removeProtocol, trimSearch };","import _mitt from 'mitt';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar mitt = _mitt; // Our wrapper over `mitt` starts here\n\nvar createMitt = function createMitt() {\n  var eventsMap = Object.create(null);\n  var instance = mitt(eventsMap);\n\n  var off = function off(type, handler) {\n    if (!type) {\n      Object.keys(eventsMap).forEach(function (key) {\n        delete eventsMap[key];\n      });\n      return;\n    }\n\n    instance.off(type, handler);\n  };\n\n  var once = function once(type, handler) {\n    // for '*' type handler is invoked with 2 arguments - type, evt\n    instance.on(type, function onceHandler(data, maybeSecondArg) {\n      instance.off(type, onceHandler);\n      handler(data, maybeSecondArg);\n    });\n  };\n\n  return _extends({}, instance, {\n    off: off,\n    once: once\n  });\n};\n\nexport default createMitt;","import SockJS from 'sockjs-client';\nimport mitt from '@livechat/mitt';\nimport { buildQueryString } from '@livechat/url-utils';\n\nvar backo = function backo(_ref) {\n  var _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 1000 : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 5000 : _ref$max,\n      _ref$jitter = _ref.jitter,\n      jitter = _ref$jitter === void 0 ? 0.5 : _ref$jitter;\n  var attempts = 0;\n  return {\n    duration: function duration() {\n      var ms = min * Math.pow(2, attempts++);\n\n      if (jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n      }\n\n      return Math.min(ms, max) | 0;\n    },\n    reset: function reset() {\n      attempts = 0;\n    }\n  };\n}; // based on WebSocket's readyState - https://www.w3.org/TR/websockets/#the-websocket-interface\n\n\nvar CONNECTING = 0;\nvar OPEN = 1;\nvar CLOSED = 3;\n\nvar createSockJSManager = function createSockJSManager(url, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      query = _ref.query,\n      _ref$transports = _ref.transports,\n      transports = _ref$transports === void 0 ? ['websocket', 'xhr-polling'] : _ref$transports;\n\n  var finalUrl = \"\" + url + (!query ? '' : '?' + buildQueryString(query));\n  var emitter = mitt();\n  var backoff = backo({\n    min: 1000,\n    max: 5000,\n    jitter: 0.5\n  });\n  var state = CLOSED;\n  var reconnectTimer;\n  var socket = null;\n\n  var openListener = function openListener() {\n    state = OPEN;\n    backoff.reset();\n    emitter.emit('connect');\n  };\n\n  var closeListener = function closeListener() {\n    state = CLOSED;\n    socket = null;\n    emitter.emit('disconnect'); // eslint-disable-next-line no-use-before-define\n\n    reconnect();\n  };\n\n  var messageListener = function messageListener(_ref2) {\n    var data = _ref2.data;\n    emitter.emit(\"message\", data);\n  };\n\n  var heartbeatListener = function heartbeatListener() {\n    emitter.emit('heartbeat');\n  };\n\n  var addEventListeners = function addEventListeners(instance) {\n    instance.addEventListener('open', openListener);\n    instance.addEventListener('close', closeListener);\n    instance.addEventListener('message', messageListener);\n    instance.addEventListener('heartbeat', heartbeatListener);\n  };\n\n  var removeEventListeners = function removeEventListeners(instance) {\n    instance.removeEventListener('open', openListener);\n    instance.removeEventListener('close', closeListener);\n    instance.removeEventListener('message', messageListener);\n    instance.removeEventListener('heartbeat', heartbeatListener);\n  };\n\n  var close = function close() {\n    state = CLOSED;\n\n    if (!socket) {\n      return;\n    }\n\n    removeEventListeners(socket);\n    socket.close();\n    socket = null;\n  };\n\n  var connect = function connect() {\n    state = CONNECTING;\n    socket = new SockJS(finalUrl, undefined, {\n      transports: transports\n    });\n    addEventListeners(socket);\n  };\n\n  var reconnect = function reconnect(delay) {\n    if (delay === void 0) {\n      delay = backoff.duration();\n    }\n\n    clearTimeout(reconnectTimer);\n\n    if (delay === 0) {\n      connect();\n      return;\n    }\n\n    reconnectTimer = setTimeout(connect, delay);\n  };\n\n  var managedSocket = {\n    connect: function (_connect) {\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      connect.toString = function () {\n        return _connect.toString();\n      };\n\n      return connect;\n    }(function () {\n      if (state !== CLOSED) {\n        throw new Error('Socket is already open or connecting.');\n      }\n\n      clearTimeout(reconnectTimer);\n      connect();\n    }),\n    destroy: function destroy() {\n      managedSocket.off();\n      managedSocket.disconnect();\n    },\n    disconnect: function disconnect() {\n      state = CLOSED;\n      clearTimeout(reconnectTimer);\n      close();\n    },\n    reconnect: function (_reconnect) {\n      function reconnect(_x) {\n        return _reconnect.apply(this, arguments);\n      }\n\n      reconnect.toString = function () {\n        return _reconnect.toString();\n      };\n\n      return reconnect;\n    }(function (delay) {\n      close();\n      reconnect(delay);\n    }),\n    emit: function emit(data) {\n      if (state !== OPEN) {\n        throw new Error('Socket is not connected.');\n      } // if we are connected we can be sure that socket is defined\n\n\n      socket.send(data);\n    },\n    getReadyState: function getReadyState() {\n      return state;\n    },\n    on: emitter.on,\n    off: emitter.off\n  };\n  return managedSocket;\n};\n\nexport default createSockJSManager;","import { noop, generateRandomId } from '@livechat/data-utils';\nimport createDeferred from '@livechat/deferred';\nimport createSockJSManager from '@livechat/sockjs-manager';\nimport mitt from '@livechat/mitt';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar createConnectionHero = function createConnectionHero() {\n  var resolve = noop;\n  var timer;\n  return {\n    cancel: function cancel() {\n      clearTimeout(timer);\n      resolve = noop;\n    },\n    check: function check() {\n      var deferred = createDeferred();\n      resolve = deferred.resolve;\n      timer = setTimeout(function () {\n        var err = new Error('Timeout.');\n        err.code = 'TIMEOUT';\n        deferred.reject(err);\n      }, 2000);\n      return deferred.promise;\n    },\n    resolve: function (_resolve) {\n      function resolve() {\n        return _resolve.apply(this, arguments);\n      }\n\n      resolve.toString = function () {\n        return _resolve.toString();\n      };\n\n      return resolve;\n    }(function () {\n      clearTimeout(timer);\n      resolve();\n    })\n  };\n}; // based on server heartbeat interval - which is 25s\n\n\nvar DEFAULT_RESCHEDULE_PING_TIMEOUT = 30 * 1000; // this is not quite type-safe (it doesn't constraint soure & sink types that much)\n// it's generic and really simple though, so we don't waste time to make this completely type-safe\n\nvar forwardEvents = function forwardEvents(source, sink, types) {\n  types.forEach(function (type) {\n    source.on(type, function (data) {\n      sink.emit(type, data);\n    });\n  });\n};\n\nvar createPlatformClient = function createPlatformClient(url, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$query = _ref.query,\n      query = _ref$query === void 0 ? {} : _ref$query,\n      _ref$rescheduleTimeou = _ref.rescheduleTimeout,\n      rescheduleTimeout = _ref$rescheduleTimeou === void 0 ? DEFAULT_RESCHEDULE_PING_TIMEOUT : _ref$rescheduleTimeou,\n      transports = _ref.transports,\n      _ref$emitter = _ref.emitter,\n      emitter = _ref$emitter === void 0 ? mitt() : _ref$emitter;\n\n  var manager = createSockJSManager(url, {\n    query: _extends({\n      // needed for HAProxy sticky sessions\n      bh: generateRandomId()\n    }, query),\n    transports: transports\n  });\n  var pingTimer;\n  var connectionHero = createConnectionHero();\n\n  var isSocketOpen = function isSocketOpen() {\n    return manager.getReadyState() === 1;\n  };\n\n  var emit = function emit(frame) {\n    manager.emit(JSON.stringify(frame));\n    reschedulePing();\n  };\n\n  var ping = function ping() {\n    // ping action doesn't extend Outgoing - it's internal, so doesn't have to be specified by a consumer\n    // but it's safe to use emit with it\n    emit({\n      action: 'ping'\n    });\n  }; // extra measure to keep the connection alive\n  // in theory this timer should never fire though\n  // because we ping after each received heartbeat & sent request\n\n\n  var reschedulePing = function reschedulePing() {\n    clearTimeout(pingTimer);\n    pingTimer = setTimeout(ping, rescheduleTimeout);\n  };\n\n  var cleanupPossiblyPendingTasks = function cleanupPossiblyPendingTasks() {\n    connectionHero.cancel();\n    clearTimeout(pingTimer);\n  };\n\n  forwardEvents(manager, emitter, ['connect', 'disconnect']);\n  manager.on('connect', reschedulePing);\n  manager.on('disconnect', cleanupPossiblyPendingTasks); // ping has to be sent back upon receiving heartbeat\n  // this is somewhat guaranteed to be executed asap unlike browser timers\n\n  manager.on('heartbeat', ping);\n  manager.on('message', function (data) {\n    connectionHero.resolve();\n    var message = JSON.parse(data);\n\n    if (message.action === 'ping') {\n      return;\n    } // Incoming requires `action` property to be a string, we cannot forbid in typings `ping` as valid action though\n    // so TS cannot narrow the type down to `Incoming` here (it stays `Incoming | Ping`), that's why we are using `any` here\n\n\n    emitter.emit('message', message);\n  }); // React Native uses window as global object, but without addEventListener method\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    window.addEventListener('online', function () {\n      if (!isSocketOpen()) {\n        return;\n      }\n\n      connectionHero.check().then(function () {\n        connectionHero.cancel();\n        emitter.emit('connection_recovered');\n      }, function (err) {\n        connectionHero.cancel();\n\n        if (err.code !== 'TIMEOUT') {\n          throw err;\n        }\n\n        manager.reconnect();\n      });\n      ping();\n    });\n    window.addEventListener('offline', function () {\n      connectionHero.cancel();\n\n      if (!isSocketOpen()) {\n        return;\n      }\n\n      emitter.emit('connection_unstable');\n    });\n  }\n\n  return _extends({}, manager, {\n    destroy: function destroy() {\n      cleanupPossiblyPendingTasks();\n      manager.destroy();\n    },\n    disconnect: function disconnect() {\n      cleanupPossiblyPendingTasks();\n      manager.disconnect();\n    },\n    reconnect: function reconnect(delay) {\n      cleanupPossiblyPendingTasks();\n      manager.reconnect(delay);\n    },\n    emit: emit,\n    on: emitter.on,\n    off: emitter.off\n  });\n};\n\nexport default createPlatformClient;","var toFormData = function toFormData(object) {\n  var formData = new FormData();\n  Object.keys(object).forEach(function (key) {\n    return formData.append(key, object[key]);\n  });\n  return formData;\n};\n\nvar UPLOAD_FAILED = 'UPLOAD_FAILED';\nvar UPLOAD_CANCELED = 'UPLOAD_CANCELED';\n\nvar uploadFile = function uploadFile(url, data, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      headers = _ref.headers,\n      _ref$method = _ref.method,\n      method = _ref$method === void 0 ? 'POST' : _ref$method,\n      onProgress = _ref.onProgress,\n      _ref$withCredentials = _ref.withCredentials,\n      withCredentials = _ref$withCredentials === void 0 ? false : _ref$withCredentials;\n\n  var xhr = new XMLHttpRequest();\n  var upload = new Promise(function (resolve, reject) {\n    if (typeof onProgress === 'function') {\n      xhr.upload.onprogress = function (event) {\n        onProgress(event.loaded / event.total);\n      };\n    }\n\n    xhr.onload = function () {\n      var response;\n\n      try {\n        response = JSON.parse(xhr.response);\n      } catch (err) {\n        response = xhr.response;\n      }\n\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve(response);\n        return;\n      }\n\n      var err = new Error('Upload failed.');\n      err.code = UPLOAD_FAILED;\n      err.response = response;\n      reject(err);\n    };\n\n    xhr.onerror = function () {\n      var err = new Error('Upload failed.');\n      err.code = UPLOAD_FAILED;\n      reject(err);\n    };\n\n    xhr.onabort = function () {\n      var err = new Error('Upload canceled.');\n      err.code = UPLOAD_CANCELED;\n      reject(err);\n    };\n\n    xhr.open(method, url);\n    xhr.withCredentials = withCredentials;\n\n    if (headers) {\n      Object.keys(headers).forEach(function (header) {\n        return xhr.setRequestHeader(header, headers[header]);\n      });\n    }\n\n    xhr.send(toFormData(data));\n  });\n  return {\n    promise: upload,\n    cancel: function cancel() {\n      xhr.abort();\n    }\n  };\n};\n\nexport default uploadFile;","import { forOwn, hasOwn, pick, sum, findIndex } from '@livechat/data-utils';\n\nvar applyStyle = function applyStyle(style, element) {\n  forOwn(function (value, key) {\n    element.style[key] = value;\n  }, style);\n};\n\nvar applyElementSpec = function applyElementSpec(attributes, element) {\n  var iteratee = function iteratee(value, key) {\n    if (key === 'style') {\n      applyStyle(value, element);\n      return;\n    }\n\n    element.setAttribute(key, value);\n  };\n\n  forOwn(iteratee, attributes);\n};\n\nvar isIE = !!document.documentElement.currentStyle;\n\nvar getComputedStyle = function getComputedStyle(props, element) {\n  var styles = window.getComputedStyle(element);\n  var borderBox = styles.boxSizing === 'border-box';\n  var picked = pick(props, styles);\n\n  if (isIE && borderBox && hasOwn('width', picked) && picked.width !== null) {\n    var widths = [picked.width, styles.paddingLeft, styles.paddingRight, styles.borderLeftWidth, styles.borderRightWidth];\n    picked.width = sum(widths.map(parseFloat)) + 'px';\n  }\n\n  if (isIE && borderBox && hasOwn('height', picked) && picked.height !== null) {\n    var heights = [picked.height, styles.paddingTop, styles.paddingBottom, styles.borderTopWidth, styles.borderBottomWidth];\n    picked.height = sum(heights.map(parseFloat)) + 'px';\n  }\n\n  return picked;\n};\n\nvar tabbable = require('tabbable');\n\nfunction getNextTabbable(element, container) {\n  if (container === void 0) {\n    container = document.body;\n  }\n\n  var tabbables = tabbable(container);\n  var elementIndex = findIndex(function (el) {\n    return el === element;\n  }, tabbables);\n  var isElementLast = elementIndex === tabbables.length - 1;\n  return tabbables[isElementLast ? 0 : elementIndex + 1];\n}\n\nfunction getRoot() {\n  return new Promise(function (resolve) {\n    var next = function next() {\n      if (!document.body) {\n        setTimeout(next, 100);\n        return;\n      }\n\n      resolve(document.body);\n    };\n\n    next();\n  });\n}\n\nvar cachedRTLOffsetType = null; // https://github.com/bvaughn/react-window/blob/c035eee067ea89029c89ecffd9eade1fc2ecb2dd/src/domHelpers.js#L31-L36\n\nvar getRTLOffsetType = function getRTLOffsetType() {\n  if (cachedRTLOffsetType) {\n    return cachedRTLOffsetType;\n  }\n\n  var outerDiv = document.createElement('div');\n  var outerStyle = outerDiv.style;\n  outerStyle.width = '50px';\n  outerStyle.height = '50px';\n  outerStyle.overflow = 'scroll';\n  outerStyle.direction = 'rtl';\n  var innerDiv = document.createElement('div');\n  var innerStyle = innerDiv.style;\n  innerStyle.width = '100px';\n  innerStyle.height = '50px';\n  outerDiv.appendChild(innerDiv);\n  document.body.appendChild(outerDiv);\n\n  if (outerDiv.scrollLeft > 0) {\n    // Chrome 😩\n    // it renders initially with max scrollLeft and to shift it to the left we need to subtract the distance\n    cachedRTLOffsetType = 'positive-descending';\n  } else {\n    outerDiv.scrollLeft = 1;\n\n    if (outerDiv.scrollLeft === 0) {\n      // spec-compliant\n      // it renders initially with 0 and to shift it to the left we need to subtract the distance\n      cachedRTLOffsetType = 'negative';\n    } else {\n      // non-chromium Edge 🤦‍♂️\n      // it renders initially with 0 and to shift it to the left we need to add the distance\n      cachedRTLOffsetType = 'positive-ascending';\n    }\n  }\n\n  document.body.removeChild(outerDiv);\n  return cachedRTLOffsetType;\n};\n\nfunction isScrollOnBottom(node, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  return Math.abs(node.scrollTop + node.clientHeight - node.scrollHeight) <= threshold;\n}\n\nfunction isScrollOnTop(node, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  return node.scrollTop <= threshold;\n}\n\nfunction prependChild(parentElement, newElement) {\n  parentElement.insertBefore(newElement, parentElement.children[0]);\n}\n\nfunction scrollToBottom(node) {\n  node.scrollTop = node.scrollHeight;\n}\n\nfunction scrollToTop(node) {\n  node.scrollTop = 0;\n}\n\nfunction removeNode(node) {\n  var parentNode = node.parentNode;\n\n  if (parentNode) {\n    parentNode.removeChild(node);\n  }\n}\n\nexport { applyElementSpec, applyStyle, getComputedStyle, getNextTabbable, getRoot, getRTLOffsetType, isScrollOnBottom, isScrollOnTop, prependChild, scrollToBottom, scrollToTop, removeNode };","import { buildQueryString, getOrigin } from '@livechat/url-utils';\nimport { getRoot, removeNode } from '@livechat/dom-utils';\nimport storage from '@livechat/isomorphic-storage'; // this is the same as \"https://accounts.livechatinc.com\"\n// it's hardcoded here because chat.io has its own ACCOUNTS_URL\n// but this variable has to have the same value for both LiveChat and chat.io\n\nvar POST_MESSAGE_ORIGIN = 'https://accounts.livechatinc.com'; // as const\n\nvar CUSTOMER_AUTH_FOOTPRINT = '@livechat/customer-auth'; // as const\n\nvar ACCOUNTS_URL = \"https://accounts.livechatinc.com\";\n\nvar buildParams = function buildParams(_ref, redirectUri) {\n  var clientId = _ref.clientId,\n      licenseId = _ref.licenseId;\n  return {\n    license_id: String(licenseId),\n    flow: 'button',\n    response_type: 'token',\n    client_id: clientId,\n    redirect_uri: redirectUri,\n    post_message_uri: redirectUri,\n    state: CUSTOMER_AUTH_FOOTPRINT\n  };\n};\n\nvar buildPath = function buildPath(_ref2) {\n  var uniqueGroups = _ref2.uniqueGroups,\n      licenseId = _ref2.licenseId,\n      groupId = _ref2.groupId;\n  return (uniqueGroups ? \"/licence/g\" + licenseId + \"_\" + groupId : '') + \"/customer\";\n};\n\nvar buildSrc = function buildSrc(config, redirectUri, env) {\n  var url = env === 'production' ? ACCOUNTS_URL : ACCOUNTS_URL.replace('accounts.', \"accounts.\" + env + \".\");\n  var path = buildPath(config);\n  var query = buildQueryString(buildParams(config, redirectUri));\n  return \"\" + url + path + \"?\" + query;\n};\n\nvar createError = function createError(_ref) {\n  var code = _ref.code,\n      message = _ref.message;\n  var err = new Error(message);\n  err.code = code;\n  return err;\n};\n\nvar parseTokenResponse = function parseTokenResponse(token, licenseId) {\n  if ('identity_exception' in token) {\n    throw createError({\n      code: 'SSO_IDENTITY_EXCEPTION',\n      message: token.identity_exception\n    });\n  }\n\n  if ('oauth_exception' in token) {\n    throw createError({\n      code: 'SSO_OAUTH_EXCEPTION',\n      message: token.oauth_exception\n    });\n  }\n\n  return {\n    accessToken: token.access_token,\n    entityId: token.entity_id,\n    expiresIn: token.expires_in * 1000,\n    tokenType: token.token_type,\n    creationDate: Date.now(),\n    licenseId: licenseId\n  };\n};\n\nvar getPostMessageOrigin = function getPostMessageOrigin(env) {\n  return env === 'production' ? POST_MESSAGE_ORIGIN : POST_MESSAGE_ORIGIN.replace('accounts.', \"accounts.\" + env + \".\");\n};\n\nvar buildIframe = function buildIframe(config, env) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.setAttribute('src', buildSrc(config, getOrigin(String(window.location)) + window.location.pathname, env));\n  return iframe;\n};\n\nvar isTokenResponse = function isTokenResponse(data) {\n  return data && data.state === CUSTOMER_AUTH_FOOTPRINT;\n};\n\nvar fetchToken = function fetchToken(config, env) {\n  var licenseId = config.licenseId;\n  var postMessageOrigin = getPostMessageOrigin(env);\n  return new Promise(function (resolve, reject) {\n    var iframe = buildIframe(config, env);\n\n    var cleanup = function cleanup() {\n      removeNode(iframe); // eslint-disable-next-line no-use-before-define\n\n      window.removeEventListener('message', listener, false);\n    };\n\n    var timeoutId = setTimeout(function () {\n      cleanup();\n      reject(createError({\n        message: 'Request timed out.',\n        code: 'REQUEST_TIMEOUT'\n      }));\n    }, 15 * 1000);\n\n    var listener = function listener(_ref) {\n      var origin = _ref.origin,\n          data = _ref.data;\n\n      if (origin !== postMessageOrigin) {\n        return;\n      }\n\n      if (!isTokenResponse(data)) {\n        return;\n      }\n\n      clearTimeout(timeoutId);\n      cleanup();\n\n      try {\n        resolve(parseTokenResponse(data, licenseId));\n      } catch (err) {\n        reject(err);\n      }\n    };\n\n    window.addEventListener('message', listener, false);\n    getRoot().then(function (body) {\n      body.appendChild(iframe);\n    });\n  });\n};\n\nvar validateConfig = function validateConfig(_ref) {\n  var licenseId = _ref.licenseId,\n      clientId = _ref.clientId;\n\n  if (typeof licenseId !== 'number' || typeof clientId !== 'string') {\n    throw new Error('You need to pass valid configuration object: { licenseId, clientId }.');\n  }\n};\n\nvar isExpiredToken = function isExpiredToken(_ref) {\n  var creationDate = _ref.creationDate,\n      expiresIn = _ref.expiresIn;\n  return Date.now() >= creationDate + expiresIn;\n};\n\nvar createAuth = function createAuth(config, env) {\n  validateConfig(config);\n  var cacheKey = \"\" + \"@@lc_auth_token:\" + config.licenseId + (config.uniqueGroups ? \":\" + config.groupId : '');\n  var pendingTokenRequest = null;\n  var cachedToken = null;\n  var retrievingToken = storage.getItem(cacheKey).then(function (token) {\n    if (retrievingToken === null) {\n      return;\n    }\n\n    retrievingToken = null;\n\n    if (!token) {\n      return;\n    }\n\n    cachedToken = JSON.parse(token);\n  });\n\n  var getFreshToken = function getFreshToken() {\n    pendingTokenRequest = fetchToken(config, env).then(function (token) {\n      pendingTokenRequest = null;\n      storage.setItem(cacheKey, JSON.stringify(token));\n      cachedToken = token;\n      return token;\n    }, function (err) {\n      pendingTokenRequest = null;\n      throw err;\n    });\n    return pendingTokenRequest;\n  };\n\n  var getToken = function getToken() {\n    if (pendingTokenRequest) {\n      return pendingTokenRequest;\n    }\n\n    if (cachedToken && !isExpiredToken(cachedToken)) {\n      return Promise.resolve(cachedToken);\n    }\n\n    if (retrievingToken) {\n      return retrievingToken.then(getToken);\n    }\n\n    return getFreshToken();\n  };\n\n  var hasToken = function hasToken() {\n    if (retrievingToken) {\n      return retrievingToken.then(hasToken);\n    }\n\n    return Promise.resolve(!!cachedToken);\n  };\n\n  var invalidate = function invalidate() {\n    cachedToken = null;\n    retrievingToken = null;\n    return storage.removeItem(cacheKey);\n  };\n\n  return {\n    getFreshToken: getFreshToken,\n    getToken: getToken,\n    hasToken: hasToken,\n    invalidate: invalidate\n  };\n};\n\nexport default createAuth;\nexport { isExpiredToken, validateConfig };","import \"core-js/modules/es.array.reduce\";\nimport { mapValues, noop, hasOwn, identity, isObject, pickOwn, toPairs, generateUniqueId, pick, keyBy, isEmpty, flatMap, includes, last, numericSortBy, stringCompare, uniqBy } from '@livechat/data-utils';\nimport deferred from '@livechat/deferred';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSideEffectsMiddleware from '@livechat/side-effects-middleware';\nimport storage from '@livechat/isomorphic-storage';\nimport promiseTry from '@livechat/promise-try';\nimport Backo from 'backo2';\nimport unfetch from 'unfetch';\nimport { buildQueryString } from '@livechat/url-utils';\nimport createPlatformClient from '@livechat/platform-client';\nimport mitt from '@livechat/mitt';\nimport rawUploadFile from '@livechat/file-upload';\nimport createAuth, { validateConfig } from '@livechat/customer-auth';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar CHANGE_REGION = 'change_region';\nvar CHECK_GOALS = 'check_goals';\nvar DESTROY = 'destroy';\nvar FAIL_ALL_REQUESTS = 'fail_all_requests';\nvar LOGIN_SUCCESS = 'login_success';\nvar PAUSE_CONNECTION = 'pause_connection';\nvar PREFETCH_TOKEN = 'prefetch_token';\nvar PUSH_RECEIVED = 'push_received';\nvar PUSH_RESPONSE_RECEIVED = 'push_response_received';\nvar RECONNECT = 'reconnect';\nvar REQUEST_FAILED = 'request_failed';\nvar RESPONSE_RECEIVED = 'response_received';\nvar SEND_REQUEST = 'send_request';\nvar SET_CHAT_ACTIVE = 'set_chat_active';\nvar SET_SELF_ID = 'set_self_id';\nvar SOCKET_CONNECTED = 'socket_connected';\nvar SOCKET_DISCONNECTED = 'socket_disconnected';\nvar SOCKET_RECOVERED = 'socket_recovered';\nvar SOCKET_UNSTABLE = 'socket_unstable';\nvar START_CONNECTION = 'start_connection';\nvar UPDATE_CUSTOMER_PAGE = 'update_customer_page';\nvar CONNECTION_LOST = 'CONNECTION_LOST';\nvar IDENTITY_MISMATCH = 'IDENTITY_MISMATCH';\nvar MISDIRECTED_CONNECTION = 'MISDIRECTED_CONNECTION';\nvar MISSING_CHAT_THREAD = 'MISSING_CHAT_THREAD';\nvar REQUEST_TIMEOUT = 'REQUEST_TIMEOUT';\nvar TOO_MANY_UNAUTHORIZED_CONNECTIONS = 'TOO_MANY_UNAUTHORIZED_CONNECTIONS';\nvar ACCEPT_GREETING = 'accept_greeting';\nvar ACTIVATE_CHAT = 'activate_chat';\nvar CANCEL_GREETING = 'cancel_greeting';\nvar CHECK_GOALS$1 = 'check_goals';\nvar DEACTIVATE_CHAT = 'deactivate_chat';\nvar DELETE_CHAT_PROPERTIES = 'delete_chat_properties';\nvar DELETE_EVENT_PROPERTIES = 'delete_event_properties';\nvar DELETE_THREAD_PROPERTIES = 'delete_thread_properties';\nvar GET_CHAT = 'get_chat';\nvar GET_CUSTOMER = 'get_customer';\nvar GET_FORM = 'get_form';\nvar GET_PREDICTED_AGENT = 'get_predicted_agent';\nvar GET_URL_INFO = 'get_url_info';\nvar LIST_CHATS = 'list_chats';\nvar LIST_GROUP_STATUSES = 'list_group_statuses';\nvar LIST_THREADS = 'list_threads';\nvar LOGIN = 'login';\nvar MARK_EVENTS_AS_SEEN = 'mark_events_as_seen';\nvar SEND_EVENT = 'send_event';\nvar SEND_RICH_MESSAGE_POSTBACK = 'send_rich_message_postback';\nvar SEND_SNEAK_PEEK = 'send_sneak_peek';\nvar SET_CUSTOMER_SESSION_FIELDS = 'set_customer_session_fields';\nvar START_CHAT = 'start_chat';\nvar UPDATE_CHAT_PROPERTIES = 'update_chat_properties';\nvar UPDATE_CUSTOMER = 'update_customer';\nvar UPDATE_CUSTOMER_PAGE$1 = 'update_customer_page';\nvar UPDATE_EVENT_PROPERTIES = 'update_event_properties';\nvar UPDATE_THREAD_PROPERTIES = 'update_thread_properties';\nvar UPLOAD_FILE = 'upload_file';\nvar DESC = 'desc';\n\nvar createReducer = function createReducer(initialState, reducersMap) {\n  if (process.env.NODE_ENV !== 'development' && reducersMap[undefined]) {\n    // eslint-disable-next-line no-console\n    console.warn([\"Reducer contains an 'undefined' action type.\", 'Have you misspelled a constant?'].join('\\n'));\n  }\n\n  return function reducer(state, action) {\n    if (state === void 0) {\n      state = initialState;\n    }\n\n    if (hasOwn(action.type, reducersMap)) {\n      return reducersMap[action.type](state, action.payload);\n    }\n\n    return state;\n  };\n}; // TODO: this is the same as built-in redux's combineReducers, should be remobed\n\n\nvar CONNECTED = 'connected';\nvar DESTROYED = 'destroyed';\nvar DISCONNECTED = 'disconnected';\nvar PAUSED = 'paused';\nvar RECONNECTING = 'reconnecting';\nvar AGENT = 'agent';\nvar CUSTOMER = 'customer';\n\nvar getAllRequests = function getAllRequests(state) {\n  return state.requests;\n};\n\nvar getConnectionStatus = function getConnectionStatus(state) {\n  return state.connection.status;\n};\n\nvar getRequest = function getRequest(state, id) {\n  return state.requests[id];\n};\n\nvar getSelfId = function getSelfId(state) {\n  return state.users.self.id;\n};\n\nvar isChatActive = function isChatActive(state, chatId) {\n  var chat = state.chats[chatId];\n  return !!chat && chat.active;\n};\n\nvar isConnected = function isConnected(state) {\n  return getConnectionStatus(state) === CONNECTED;\n};\n\nvar isDestroyed = function isDestroyed(state) {\n  return getConnectionStatus(state) === DESTROYED;\n};\n\nvar getEnvPart = function getEnvPart(_ref) {\n  var licenseId = _ref.licenseId,\n      env = _ref.env;\n\n  if (licenseId === 1520) {\n    return '.staging';\n  }\n\n  if (env === 'production') {\n    return '';\n  }\n\n  return \".\" + env;\n};\n\nvar getApiOrigin = function getApiOrigin(state) {\n  var region = state.region;\n  var regionPart = region ? \"-\" + region : '';\n  return \"https://api\" + regionPart + getEnvPart(state) + \".livechatinc.com\";\n};\n\nvar getServerUrl = function getServerUrl(state) {\n  return getApiOrigin(state) + \"/v3.2/customer\";\n};\n\nvar createInitialState = function createInitialState(initialStateData) {\n  var _initialStateData$app = initialStateData.application,\n      application = _initialStateData$app === void 0 ? {} : _initialStateData$app,\n      licenseId = initialStateData.licenseId,\n      _initialStateData$gro = initialStateData.groupId,\n      groupId = _initialStateData$gro === void 0 ? null : _initialStateData$gro,\n      env = initialStateData.env,\n      _initialStateData$pag = initialStateData.page,\n      page = _initialStateData$pag === void 0 ? null : _initialStateData$pag,\n      _initialStateData$reg = initialStateData.region,\n      region = _initialStateData$reg === void 0 ? null : _initialStateData$reg,\n      _initialStateData$ref = initialStateData.referrer,\n      referrer = _initialStateData$ref === void 0 ? null : _initialStateData$ref,\n      _initialStateData$uni = initialStateData.uniqueGroups,\n      uniqueGroups = _initialStateData$uni === void 0 ? false : _initialStateData$uni,\n      _initialStateData$mob = initialStateData.mobile,\n      mobile = _initialStateData$mob === void 0 ? false : _initialStateData$mob;\n  return {\n    application: _extends({}, application, {\n      name: \"customer_sdk\",\n      version: \"2.0.4\"\n    }),\n    licenseId: licenseId,\n    env: env,\n    groupId: groupId,\n    chats: {},\n    connection: {\n      status: DISCONNECTED\n    },\n    page: page,\n    region: region,\n    referrer: referrer,\n    requests: {},\n    users: {\n      self: {\n        id: null,\n        type: CUSTOMER\n      },\n      others: {}\n    },\n    uniqueGroups: uniqueGroups,\n    mobile: mobile\n  };\n};\n\nvar removeStoredRequest = function removeStoredRequest(state, _ref2) {\n  var id = _ref2.id; // eslint-disable-next-line no-unused-vars\n\n  var _state$requests = state.requests,\n      requests = _objectWithoutPropertiesLoose(_state$requests, [id].map(_toPropertyKey));\n\n  return _extends({}, state, {\n    requests: requests\n  });\n};\n\nvar setConnectionStatus = function setConnectionStatus(status, state) {\n  return _extends({}, state, {\n    connection: _extends({}, state.connection, {\n      status: status\n    })\n  });\n};\n\nvar createReducer$1 = function createReducer$1(state) {\n  var _createReducer;\n\n  return createReducer(state, (_createReducer = {}, _createReducer[CHANGE_REGION] = function (state, _ref3) {\n    var region = _ref3.region;\n    return _extends({}, state, {\n      region: region\n    });\n  }, _createReducer[DESTROY] = function (state) {\n    return setConnectionStatus(DESTROYED, state);\n  }, _createReducer[LOGIN_SUCCESS] = function (state) {\n    return setConnectionStatus(CONNECTED, state);\n  }, _createReducer[PAUSE_CONNECTION] = function (state) {\n    return setConnectionStatus(PAUSED, state);\n  }, _createReducer[REQUEST_FAILED] = removeStoredRequest, _createReducer[RESPONSE_RECEIVED] = removeStoredRequest, _createReducer[SEND_REQUEST] = function (state, _ref4) {\n    var _extends2;\n\n    var promise = _ref4.promise,\n        resolve = _ref4.resolve,\n        reject = _ref4.reject,\n        id = _ref4.id,\n        request = _ref4.request;\n    return _extends({}, state, {\n      requests: _extends({}, state.requests, (_extends2 = {}, _extends2[id] = {\n        id: id,\n        promise: promise,\n        resolve: resolve,\n        reject: reject,\n        request: request\n      }, _extends2))\n    });\n  }, _createReducer[SET_CHAT_ACTIVE] = function (state, _ref5) {\n    var _extends3;\n\n    var id = _ref5.id,\n        active = _ref5.active;\n    return _extends({}, state, {\n      chats: _extends({}, state.chats, (_extends3 = {}, _extends3[id] = _extends({}, state.chats[id], {\n        active: active\n      }), _extends3))\n    });\n  }, _createReducer[SET_SELF_ID] = function (state, payload) {\n    return _extends({}, state, {\n      users: _extends({}, state.users, {\n        self: _extends({}, state.users.self, {\n          id: payload.id\n        })\n      })\n    });\n  }, _createReducer[SOCKET_DISCONNECTED] = function (state) {\n    var previousStatus = getConnectionStatus(state);\n\n    if (process.env.NODE_ENV !== 'production' && (previousStatus === PAUSED || previousStatus === DESTROYED)) {\n      throw new Error(\"Got 'socket_disconnected' action when in \" + previousStatus + \" state. This should be an impossible state.\");\n    }\n\n    var state1 = setConnectionStatus(previousStatus === DISCONNECTED ? DISCONNECTED : RECONNECTING, state);\n    return _extends({}, state1, {\n      requests: {}\n    });\n  }, _createReducer[UPDATE_CUSTOMER_PAGE] = function (state, page) {\n    return _extends({}, state, {\n      page: _extends({}, state.page, page)\n    });\n  }, _createReducer));\n};\n\nfunction finalCreateStore(initialStateData) {\n  var compose = process.env.NODE_ENV === 'development' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: '@livechat/customer-sdk'\n  }) : identity;\n  var sideEffectsMiddleware = createSideEffectsMiddleware();\n  var store = createStore(createReducer$1(createInitialState(initialStateData)), compose(applyMiddleware(sideEffectsMiddleware)));\n  store.addSideEffectsHandler = sideEffectsMiddleware.add;\n  return store;\n}\n\nfunction createError(_ref) {\n  var message = _ref.message,\n      code = _ref.code;\n  var error = new Error(message);\n  error.code = code;\n  return error;\n}\n\nvar ACCESS_TOKEN_EXPIRED = 'access_token_expired';\nvar CUSTOMER_BANNED = 'customer_banned';\nvar CUSTOMER_TEMPORARILY_BLOCKED = 'customer_temporarily_blocked';\nvar LICENSE_NOT_FOUND = 'license_not_found';\nvar MISDIRECTED_CONNECTION$1 = 'misdirected_connection';\nvar PRODUCT_VERSION_CHANGED = 'product_version_changed';\nvar TOO_MANY_CONNECTIONS = 'too_many_connections'; // the limit of unauthorized connections is per IP\n\nvar TOO_MANY_UNAUTHORIZED_CONNECTIONS$1 = 'too_many_unauthorized_connections';\nvar UNSUPPORTED_VERSION = 'unsupported_version';\nvar CHAT_DEACTIVATED = 'chat_deactivated';\nvar CHAT_PROPERTIES_DELETED = 'chat_properties_deleted';\nvar CHAT_PROPERTIES_UPDATED = 'chat_properties_updated';\nvar CHAT_TRANSFERRED = 'chat_transferred';\nvar CUSTOMER_DISCONNECTED = 'customer_disconnected';\nvar CUSTOMER_PAGE_UPDATED = 'customer_page_updated';\nvar CUSTOMER_SIDE_STORAGE_UPDATED = 'customer_side_storage_updated';\nvar CUSTOMER_UPDATED = 'customer_updated';\nvar EVENT_PROPERTIES_DELETED = 'event_properties_deleted';\nvar EVENT_PROPERTIES_UPDATED = 'event_properties_updated';\nvar EVENT_UPDATED = 'event_updated';\nvar EVENTS_MARKED_AS_SEEN = 'events_marked_as_seen';\nvar GREETING_ACCEPTED = 'greeting_accepted';\nvar GREETING_CANCELED = 'greeting_canceled';\nvar INCOMING_CHAT = 'incoming_chat';\nvar INCOMING_EVENT = 'incoming_event';\nvar INCOMING_GREETING = 'incoming_greeting';\nvar INCOMING_MULTICAST = 'incoming_multicast';\nvar INCOMING_RICH_MESSAGE_POSTBACK = 'incoming_rich_message_postback';\nvar INCOMING_TYPING_INDICATOR = 'incoming_typing_indicator';\nvar QUEUE_POSITION_UPDATED = 'queue_position_updated';\nvar THREAD_PROPERTIES_DELETED = 'thread_properties_deleted';\nvar THREAD_PROPERTIES_UPDATED = 'thread_properties_updated';\nvar USER_ADDED_TO_CHAT = 'user_added_to_chat';\nvar USER_REMOVED_FROM_CHAT = 'user_removed_from_chat';\nvar FILE = 'file';\nvar FILLED_FORM = 'filled_form';\nvar MESSAGE = 'message';\nvar RICH_MESSAGE = 'rich_message';\nvar SYSTEM_MESSAGE = 'system_message';\n\nvar createEventBase = function createEventBase(event) {\n  var base = {};\n\n  if (typeof event.customId === 'string') {\n    base.custom_id = event.customId;\n  }\n\n  if (isObject(event.properties)) {\n    base.properties = event.properties;\n  }\n\n  return base;\n}; // TODO: we could validate and throw here\n// but should we? maybe only in DEV mode?\n\n\nvar parseEvent = function parseEvent(event) {\n  switch (event.type) {\n    case MESSAGE:\n      {\n        var message = _extends({}, createEventBase(event), {\n          type: event.type,\n          text: event.text\n        });\n\n        if (event.postback) {\n          message.postback = {\n            id: event.postback.id,\n            thread_id: event.postback.threadId,\n            event_id: event.postback.eventId,\n            type: event.postback.type,\n            value: event.postback.value\n          };\n        }\n\n        return message;\n      }\n\n    case FILE:\n      {\n        var file = _extends({}, createEventBase(event), {\n          type: event.type,\n          url: event.url\n        });\n\n        return file;\n      }\n\n    case FILLED_FORM:\n      {\n        var filledForm = _extends({}, createEventBase(event), {\n          type: event.type,\n          form_id: event.formId,\n          fields: event.fields.map(function (field) {\n            switch (field.type) {\n              case 'group_chooser':\n                {\n                  if (!field.answer) {\n                    return field;\n                  }\n\n                  var _field$answer = field.answer,\n                      groupId = _field$answer.groupId,\n                      answer = _objectWithoutPropertiesLoose(_field$answer, [\"groupId\"]);\n\n                  return _extends({}, field, {\n                    answer: _extends({}, answer, {\n                      group_id: groupId\n                    })\n                  });\n                }\n\n              default:\n                return field;\n            }\n          })\n        });\n\n        return filledForm;\n      }\n\n    case SYSTEM_MESSAGE:\n      {\n        var systemMessage = _extends({}, createEventBase(event), {\n          type: event.type,\n          text: event.text,\n          system_message_type: event.systemMessageType\n        });\n\n        if (event.recipients) {\n          systemMessage.recipients = event.recipients;\n        }\n\n        return systemMessage;\n      }\n  }\n};\n\nvar parseThreadData = function parseThreadData(thread) {\n  var data = {};\n  var events = thread.events,\n      properties = thread.properties;\n\n  if (events) {\n    data.events = events.map(parseEvent);\n  }\n\n  if (properties) {\n    data.properties = properties;\n  }\n\n  return data;\n};\n\nvar parseStartChatData = function parseStartChatData(_ref) {\n  var chat = _ref.chat,\n      continuous = _ref.continuous;\n  var data = {\n    chat: {}\n  };\n\n  if (typeof continuous === 'boolean') {\n    data.continuous = continuous;\n  }\n\n  if (!chat) {\n    return data;\n  }\n\n  var access = chat.access,\n      thread = chat.thread,\n      properties = chat.properties;\n\n  if (access && access.groupIds) {\n    data.chat.access = {\n      group_ids: access.groupIds\n    };\n  }\n\n  if (properties) {\n    data.chat.properties = properties;\n  }\n\n  if (thread) {\n    data.chat.thread = parseThreadData(thread);\n  }\n\n  return data;\n};\n\nvar parseActivateChatData = function parseActivateChatData(requestData) {\n  var data = parseStartChatData(requestData);\n  return _extends({}, data, {\n    chat: _extends({}, data.chat, {\n      id: requestData.chat.id\n    })\n  });\n};\n\nvar parseCustomerSessionFields = function parseCustomerSessionFields(sessionFields) {\n  return toPairs(sessionFields).map(function (_ref2) {\n    var _ref3;\n\n    var key = _ref2[0],\n        value = _ref2[1];\n    return _ref3 = {}, _ref3[key] = value, _ref3;\n  });\n};\n\nvar parseCustomerUpdate = function parseCustomerUpdate(update) {\n  var result = pickOwn(['avatar', 'name', 'email'], update);\n\n  if (update.sessionFields) {\n    result.session_fields = parseCustomerSessionFields(update.sessionFields);\n  }\n\n  return result;\n};\n\nvar destroy = function destroy(reason) {\n  return {\n    type: DESTROY,\n    payload: {\n      reason: reason\n    }\n  };\n};\n\nvar loginSuccess = function loginSuccess(payload) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: payload\n  };\n};\n\nvar prefetchToken = function prefetchToken(fresh) {\n  if (fresh === void 0) {\n    fresh = false;\n  }\n\n  return {\n    type: PREFETCH_TOKEN,\n    payload: {\n      fresh: fresh\n    }\n  };\n};\n\nvar reconnect = function reconnect(delay) {\n  return {\n    type: RECONNECT,\n    payload: {\n      delay: delay\n    }\n  };\n}; // TODO: this one was currently pretty hard to type in full\n// we should explore providing stricter types for this in the future\n\n\nvar sendRequest = function sendRequest(action, payload, source) {\n  return {\n    type: SEND_REQUEST,\n    payload: _extends({\n      request: {\n        action: action,\n        payload: payload\n      }\n    }, source && {\n      source: source\n    })\n  };\n};\n\nvar sendEvent = function sendEvent(_ref) {\n  var chatId = _ref.chatId,\n      event = _ref.event,\n      attachToLastThread = _ref.attachToLastThread;\n  var payload = {\n    chat_id: chatId,\n    event: parseEvent(event)\n  };\n\n  if (attachToLastThread) {\n    payload.attach_to_last_thread = true;\n  }\n\n  return sendRequest(SEND_EVENT, payload);\n};\n\nvar setChatActive = function setChatActive(id, active) {\n  return {\n    type: SET_CHAT_ACTIVE,\n    payload: {\n      id: id,\n      active: active\n    }\n  };\n};\n\nvar setSelfId = function setSelfId(id) {\n  return {\n    type: SET_SELF_ID,\n    payload: {\n      id: id\n    }\n  };\n};\n\nvar socketDisconnected = function socketDisconnected() {\n  return {\n    type: SOCKET_DISCONNECTED\n  };\n}; // TODO: this thing is not really well typed and should be improved\n\n\nvar sendRequestAction = function sendRequestAction(store, action) {\n  action.payload.id = generateUniqueId(store.getState().requests);\n\n  var _deferred = deferred(),\n      resolve = _deferred.resolve,\n      reject = _deferred.reject,\n      promise = _deferred.promise;\n\n  action.payload.promise = promise;\n  action.payload.resolve = resolve;\n  action.payload.reject = reject;\n  store.dispatch(action);\n  return promise;\n};\n\nvar AUTHENTICATION = 'AUTHENTICATION';\nvar CUSTOMER_BANNED$1 = 'CUSTOMER_BANNED';\nvar USERS_LIMIT_REACHED = 'USERS_LIMIT_REACHED';\nvar WRONG_PRODUCT_VERSION = 'WRONG_PRODUCT_VERSION';\n\nvar getSideStorageKey = function getSideStorageKey(store) {\n  var _store$getState = store.getState(),\n      licenseId = _store$getState.licenseId,\n      groupId = _store$getState.groupId,\n      uniqueGroups = _store$getState.uniqueGroups;\n\n  return \"side_storage_\" + licenseId + (uniqueGroups ? \":\" + groupId : '');\n};\n\nvar getSideStorage = function getSideStorage(store) {\n  return storage.getItem(getSideStorageKey(store)).catch(noop).then(function (sideStorage) {\n    return JSON.parse(sideStorage || '{}');\n  }) // shouldnt get triggered, just a defensive measure against malformed storage entries\n  .catch(function () {\n    return {};\n  });\n};\n\nvar saveSideStorage = function saveSideStorage(store, sideStorage) {\n  return storage.setItem(getSideStorageKey(store), JSON.stringify(sideStorage)).catch(noop);\n};\n\nvar taskChain = function taskChain(_ref, onSuccess, onError) {\n  var steps = _ref.slice(0);\n\n  var cancelled = false;\n\n  var next = function next(intermediateResult) {\n    var step = steps.shift();\n    promiseTry(function () {\n      return step(intermediateResult);\n    }).then(function (result) {\n      if (cancelled) {\n        return;\n      }\n\n      if (steps.length) {\n        next(result);\n        return;\n      }\n\n      onSuccess(result);\n    }, function (error) {\n      if (cancelled) {\n        return;\n      }\n\n      onError(error);\n    });\n  };\n\n  next();\n  return {\n    cancel: function cancel() {\n      cancelled = true;\n    }\n  };\n};\n\nvar sendLoginFlowRequest = function sendLoginFlowRequest(store, type, payload) {\n  return sendRequestAction(store, sendRequest(type, payload, 'login'));\n};\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nfunction createLoginTask(auth, customerDataProvider) {\n  var store;\n  var sentPage = null;\n  var task;\n  var backoff = new Backo({\n    min: 300,\n    max: 60000,\n    jitter: 0.3\n  });\n\n  var destroy$$1 = function destroy$$1(reason) {\n    return store.dispatch(destroy(reason));\n  };\n\n  var reconnect$$1 = function reconnect$$1() {\n    return store.dispatch(reconnect(backoff.duration()));\n  };\n\n  var getTokenAndSideStorage = function getTokenAndSideStorage() {\n    return Promise.all([auth.getToken(), getSideStorage(store)]);\n  };\n\n  var dispatchSelfId = function dispatchSelfId(_ref2) {\n    var token = _ref2[0],\n        sideStorage = _ref2[1];\n    var selfId = getSelfId(store.getState());\n\n    if (selfId === null) {\n      store.dispatch(setSelfId(token.entityId));\n    } else if (selfId !== token.entityId) {\n      var err = new Error('Identity has changed.');\n      err.code = IDENTITY_MISMATCH;\n      throw err;\n    }\n\n    return [token, sideStorage];\n  };\n\n  var sendLogin = function sendLogin(_ref3) {\n    var token = _ref3[0],\n        sideStorage = _ref3[1];\n    var state = store.getState();\n    var application = state.application,\n        groupId = state.groupId,\n        page = state.page,\n        referrer = state.referrer,\n        mobile = state.mobile;\n    var payload = {\n      token: token.tokenType + \" \" + token.accessToken,\n      customer: typeof customerDataProvider === 'function' ? parseCustomerUpdate(customerDataProvider()) : {},\n      customer_side_storage: sideStorage,\n      is_mobile: mobile,\n      application: pick(['name', 'version'], application)\n    };\n\n    if (typeof groupId === 'number') {\n      payload.group_id = groupId;\n    }\n\n    if (application.channelType) {\n      payload.application.channel_type = application.channelType;\n    }\n\n    if (page !== null) {\n      sentPage = page;\n      payload.customer_page = page;\n    }\n\n    if (referrer !== null) {\n      payload.referrer = referrer;\n    }\n\n    return Promise.race([sendLoginFlowRequest(store, LOGIN, payload), delay(15 * 1000).then(function () {\n      return Promise.reject(createError({\n        message: 'Request timed out.',\n        code: REQUEST_TIMEOUT\n      }));\n    })]);\n  };\n\n  var updateCustomerPageIfNeeded = function updateCustomerPageIfNeeded() {\n    var _store$getState = store.getState(),\n        page = _store$getState.page;\n\n    if (sentPage !== page) {\n      sendLoginFlowRequest(store, UPDATE_CUSTOMER_PAGE$1, page).catch(noop);\n    }\n\n    sentPage = null;\n  };\n\n  return function (_store) {\n    // after switching to callbags, we should be able to use smth similar to redux-observable\n    // and thus just use store given to epic\n    store = _store;\n\n    if (task) {\n      task.cancel();\n    }\n\n    task = taskChain([getTokenAndSideStorage, dispatchSelfId, sendLogin], function (loginResponse) {\n      task = null;\n      backoff.reset(); // TODO: rethink if this should be handled by SDK consumer\n\n      updateCustomerPageIfNeeded();\n      store.dispatch(loginSuccess(loginResponse));\n    }, function (error) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('[Customer SDK] Login flow has thrown code', error.code, 'with', error);\n      }\n\n      switch (error.code) {\n        case AUTHENTICATION:\n          auth.getFreshToken();\n          reconnect$$1();\n          return;\n\n        case CONNECTION_LOST:\n          // this is connectivity problem, not a server error\n          // and is taken care of in socket module\n          // as it has its own backoff implementation\n          return;\n\n        case MISDIRECTED_CONNECTION:\n          // socket gets reinitialized on this anyway, so just ignore it here\n          return;\n        // those are auth errors, we should maybe export those constants from the auth package\n\n        case 'SSO_IDENTITY_EXCEPTION':\n        case 'SSO_OAUTH_EXCEPTION':\n          if (error.message === 'server_error' || error.message === 'temporarily_unavailable') {\n            reconnect$$1();\n            return;\n          }\n\n          destroy$$1(error.message);\n          return;\n\n        case IDENTITY_MISMATCH:\n        case CUSTOMER_BANNED$1:\n        case USERS_LIMIT_REACHED:\n        case WRONG_PRODUCT_VERSION:\n          destroy$$1(error.code.toLowerCase());\n          return;\n\n        default:\n          reconnect$$1();\n          return;\n      }\n    });\n  };\n}\n\nvar checkGoals = function checkGoals(store, auth, sessionFields) {\n  return auth.getToken().then(function (token) {\n    var state = store.getState();\n\n    if (getSelfId(state) === null) {\n      store.dispatch(setSelfId(token.entityId));\n    }\n\n    var page = state.page;\n\n    if (!page || !page.url) {\n      return;\n    }\n\n    var query = buildQueryString({\n      license_id: state.licenseId\n    });\n    var payload = {\n      // TODO: remove sending customer_fields once API releases their changes\n      customer_fields: sessionFields || {},\n      session_fields: parseCustomerSessionFields(sessionFields || {}),\n      group_id: state.groupId || 0,\n      page_url: page.url\n    };\n    return unfetch(getServerUrl(state) + \"/action/\" + CHECK_GOALS$1 + \"?\" + query, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: token.tokenType + \" \" + token.accessToken\n      },\n      body: JSON.stringify(payload)\n    }).then(function () {\n      // TODO: we should actually normalize response here\n      return undefined;\n    });\n  });\n};\n\nvar failAllRequests = function failAllRequests(_ref, reason) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  var state = getState();\n  var requests = getAllRequests(state);\n  dispatch({\n    type: FAIL_ALL_REQUESTS,\n    payload: {\n      rejects: Object.keys(requests).map(function (requestId) {\n        return requests[requestId].reject;\n      }),\n      reason: reason\n    }\n  });\n};\n\nvar failRequest = function failRequest(_ref2, requestAction, error) {\n  var getState = _ref2.getState,\n      dispatch = _ref2.dispatch;\n  var requestId = requestAction.payload.id;\n  dispatch({\n    type: REQUEST_FAILED,\n    payload: {\n      id: requestId,\n      reject: getState().requests[requestId].reject,\n      error: error\n    }\n  });\n};\n\nvar SUCCESS = Object.freeze({\n  success: true\n});\n\nvar parseCommonEventProps = function parseCommonEventProps(threadId, event) {\n  var parsed = {\n    id: event.id,\n    authorId: event.author_id,\n    createdAt: event.created_at,\n    threadId: threadId,\n    properties: event.properties || {}\n  };\n\n  if (event.custom_id !== undefined) {\n    parsed.customId = event.custom_id;\n  }\n\n  return parsed;\n};\n\nvar downsizeWithRatio = function downsizeWithRatio(max, dimensions) {\n  var _ref;\n\n  var biggerProp;\n  var smallerProp;\n  var bigger;\n  var smaller;\n\n  if (dimensions.height > dimensions.width) {\n    biggerProp = 'height';\n    smallerProp = 'width';\n    bigger = dimensions.height;\n    smaller = dimensions.width;\n  } else {\n    biggerProp = 'width';\n    smallerProp = 'height';\n    bigger = dimensions.width;\n    smaller = dimensions.height;\n  }\n\n  var ratio = max / bigger;\n  return _ref = {}, _ref[biggerProp] = Math.ceil(Math.min(bigger, max)), _ref[smallerProp] = Math.ceil(Math.min(ratio * smaller, smaller)), _ref;\n};\n\nvar parseImage = function parseImage(thread, image) {\n  return _extends({}, parseCommonEventProps(thread, image), {\n    type: FILE,\n    contentType: image.content_type,\n    url: image.url,\n    name: image.name,\n    width: image.width,\n    height: image.height,\n    thumbnails: {\n      default: _extends({\n        url: image.thumbnail_url\n      }, downsizeWithRatio(300, image)),\n      high: _extends({\n        url: image.thumbnail2x_url\n      }, downsizeWithRatio(600, image))\n    }\n  });\n};\n\nvar parseFile = function parseFile(thread, file) {\n  if (file.width !== undefined && file.height !== undefined) {\n    return parseImage(thread, file);\n  }\n\n  return _extends({}, parseCommonEventProps(thread, file), {\n    type: FILE,\n    contentType: file.content_type,\n    url: file.url,\n    name: file.name\n  });\n};\n\nvar parseFilledForm = function parseFilledForm(thread, filledForm) {\n  return _extends({}, parseCommonEventProps(thread, filledForm), {\n    type: FILLED_FORM,\n    formId: filledForm.form_id,\n    fields: filledForm.fields.map(function (field) {\n      switch (field.type) {\n        case 'group_chooser':\n          {\n            if (!field.answer) {\n              return field;\n            }\n\n            var _field$answer = field.answer,\n                groupId = _field$answer.group_id,\n                answer = _objectWithoutPropertiesLoose(_field$answer, [\"group_id\"]);\n\n            return _extends({}, field, {\n              answer: _extends({}, answer, {\n                groupId: groupId\n              })\n            });\n          }\n\n        default:\n          return field;\n      }\n    })\n  });\n};\n\nvar parseMessage = function parseMessage(thread, message) {\n  return _extends({}, parseCommonEventProps(thread, message), {\n    type: MESSAGE,\n    text: message.text\n  });\n};\n\nvar parseRichMessageElement = function parseRichMessageElement(element) {\n  var parsed = {};\n\n  if (typeof element.title === 'string') {\n    parsed.title = element.title;\n  }\n\n  if (typeof element.subtitle === 'string') {\n    parsed.subtitle = element.subtitle;\n  }\n\n  if (element.image) {\n    // TODO: we should reuse parseImage here\n    var image = element.image;\n    parsed.image = {\n      url: image.url,\n      name: image.name\n    };\n  }\n\n  if (element.buttons) {\n    parsed.buttons = element.buttons.map(function (serverButton) {\n      switch (serverButton.type) {\n        case 'message':\n        case 'phone':\n          {\n            return {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n          }\n\n        case 'url':\n          {\n            var button = {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n\n            if (serverButton.target) {\n              button.target = serverButton.target;\n            }\n\n            return button;\n          }\n\n        case 'webview':\n          {\n            var _button = {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n\n            if (typeof serverButton.webview_height === 'string') {\n              _button.webviewHeight = serverButton.webview_height;\n            }\n\n            return _button;\n          }\n\n        default:\n          {\n            return {\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              role: serverButton.role || 'default'\n            };\n          }\n      }\n    });\n  }\n\n  return parsed;\n};\n\nvar parseRichMessage = function parseRichMessage(thread, richMessage) {\n  switch (richMessage.template_id) {\n    case 'cards':\n    case 'quick_replies':\n    case 'sticker':\n      return _extends({}, parseCommonEventProps(thread, richMessage), {\n        type: RICH_MESSAGE,\n        template: richMessage.template_id,\n        elements: richMessage.elements.map(parseRichMessageElement)\n      });\n\n    default:\n      return null;\n  }\n};\n\nvar parseSystemMessage = function parseSystemMessage(thread, systemMessage) {\n  var parsed = _extends({}, parseCommonEventProps(thread, _extends({}, systemMessage, {\n    author_id: 'system'\n  })), {\n    type: SYSTEM_MESSAGE,\n    text: systemMessage.text,\n    systemMessageType: systemMessage.system_message_type\n  });\n\n  if (systemMessage.text_vars) {\n    parsed.textVars = systemMessage.text_vars;\n  }\n\n  return parsed;\n};\n\nvar parseEvent$1 = function parseEvent(thread, event) {\n  switch (event.type) {\n    case FILE:\n      return parseFile(thread, event);\n\n    case FILLED_FORM:\n      return parseFilledForm(thread, event);\n\n    case MESSAGE:\n      return parseMessage(thread, event);\n\n    case RICH_MESSAGE:\n      return parseRichMessage(thread, event);\n\n    case SYSTEM_MESSAGE:\n      return parseSystemMessage(thread, event);\n\n    default:\n      return null;\n  }\n};\n\nvar parseGreeting = function parseGreeting(greeting) {\n  return {\n    id: greeting.id,\n    addon: greeting.addon || null,\n    uniqueId: greeting.unique_id,\n    displayedFirstTime: greeting.displayed_first_time,\n    accepted: greeting.accepted || false,\n    // threadId is typed as nonoptional string but for greetings it doesn't exist\n    event: parseEvent$1(null, greeting.event),\n    agent: {\n      id: greeting.agent.id,\n      name: greeting.agent.name,\n      avatar: greeting.agent.avatar,\n      jobTitle: greeting.agent.job_title,\n      isBot: greeting.agent.is_bot || false\n    }\n  };\n}; // so it's better to rely on a custom implementation\n\n\nvar parseCustomerSessionFields$1 = function parseCustomerSessionFields(sessionFields) {\n  return sessionFields.reduce(function (acc, field) {\n    var _Object$keys = Object.keys(field),\n        key = _Object$keys[0];\n\n    acc[key] = field[key];\n    return acc;\n  }, {});\n};\n\nvar parseAccess = function parseAccess(access) {\n  if (access === void 0) {\n    access = {};\n  }\n\n  return access.group_ids ? {\n    groupIds: access.group_ids\n  } : {};\n};\n\nvar getEventsSeenUpToMap = function getEventsSeenUpToMap(users) {\n  return mapValues(function (user) {\n    return user.events_seen_up_to ? user.events_seen_up_to : null;\n  }, keyBy('id', users));\n};\n\nvar parseThread = function parseThread(chatId, thread) {\n  var properties = thread.properties || {};\n  return {\n    id: thread.id,\n    chatId: chatId,\n    active: thread.active,\n    access: parseAccess(thread.access),\n    createdAt: thread.created_at,\n    userIds: thread.user_ids,\n    events: thread.events.map(function (event) {\n      return parseEvent$1(thread.id, event);\n    }).filter(Boolean),\n    properties: properties,\n    previousThreadId: thread.previous_thread_id || null,\n    nextThreadId: thread.next_thread_id || null,\n    queue: thread.queue ? parseQueue(thread.queue) : null\n  };\n};\n\nvar parseIncomingChat = function parseIncomingChat(chat) {\n  return {\n    id: chat.id,\n    access: parseAccess(chat.access),\n    users: chat.users.map(parseChatUser),\n    properties: chat.properties || {},\n    thread: parseThread(chat.id, chat.thread),\n    eventsSeenUpToMap: getEventsSeenUpToMap(chat.users)\n  };\n};\n\nvar parseChatAgent = function parseChatAgent(agent) {\n  return {\n    id: agent.id,\n    // keep literal here, so every non-customer gets treated as agent\n    // currently there are only 2 types of users - customer & agent (bots have type: \"agent\")\n    // so this is purely defensive measure, trying to stay future-proof\n    type: AGENT,\n    name: agent.name,\n    avatar: agent.avatar,\n    jobTitle: agent.job_title,\n    present: agent.present\n  };\n};\n\nvar parseCustomerOptionalProps = function parseCustomerOptionalProps(customerProps) {\n  var optionalProps = pickOwn(['avatar', 'email', 'name'], customerProps);\n\n  if (customerProps.session_fields) {\n    optionalProps.sessionFields = parseCustomerSessionFields$1(customerProps.session_fields);\n  }\n\n  return optionalProps;\n};\n\nvar parseCustomerCommonProps = function parseCustomerCommonProps(customer) {\n  var optionalProps = parseCustomerOptionalProps(customer);\n  return _extends({\n    id: customer.id,\n    type: CUSTOMER\n  }, optionalProps, {\n    sessionFields: optionalProps.sessionFields || {}\n  });\n};\n\nvar parseChatCustomer = function parseChatCustomer(customer) {\n  return _extends({}, parseCustomerCommonProps(customer), {\n    present: customer.present\n  });\n};\n\nvar parseCustomer = function parseCustomer(customer) {\n  var statistics = customer.statistics;\n  return _extends({}, parseCustomerCommonProps(customer), {\n    statistics: {\n      chatsCount: statistics.chats_count,\n      threadsCount: statistics.threads_count,\n      visitsCount: statistics.visits_count,\n      pageViewsCount: statistics.page_views_count,\n      greetingsShownCount: statistics.greetings_shown_count,\n      greetingsAcceptedCount: statistics.greetings_accepted_count\n    }\n  });\n};\n\nvar parsePredictedAgent = function parsePredictedAgent(agent) {\n  return {\n    id: agent.id,\n    type: AGENT,\n    name: agent.name,\n    avatar: agent.avatar,\n    jobTitle: agent.job_title,\n    isBot: agent.is_bot\n  };\n};\n\nvar parseQueueUpdate = function parseQueueUpdate(queueUpdate) {\n  return {\n    position: queueUpdate.position,\n    waitTime: queueUpdate.wait_time\n  };\n};\n\nvar parseQueue = function parseQueue(queue) {\n  return _extends({}, parseQueueUpdate(queue), {\n    queuedAt: queue.queued_at\n  });\n};\n\nvar parseChatUser = function parseChatUser(user) {\n  return user.type === CUSTOMER ? parseChatCustomer(user) : parseChatAgent(user);\n};\n\nvar parseGroupStatus = function parseGroupStatus(status) {\n  return status === 'offline' ? 'offline' : 'online';\n};\n\nvar _FAIL_ALL_REQUESTS_ME;\n\nvar SMALL_RECONNECT_DELAY = 100;\nvar FAIL_ALL_REQUESTS_MESSAGES = (_FAIL_ALL_REQUESTS_ME = {}, _FAIL_ALL_REQUESTS_ME[CONNECTION_LOST] = 'Connection lost.', _FAIL_ALL_REQUESTS_ME[MISDIRECTED_CONNECTION] = 'Connected to wrong region.', _FAIL_ALL_REQUESTS_ME);\n\nvar updateStateIfNeeded = function updateStateIfNeeded(store, action) {\n  var state = store.getState();\n\n  switch (action.type) {\n    case PUSH_RESPONSE_RECEIVED:\n    case PUSH_RECEIVED:\n      switch (action.payload.action) {\n        case CHAT_DEACTIVATED:\n          store.dispatch(setChatActive(action.payload.payload.chatId, false));\n          return;\n\n        case INCOMING_CHAT:\n          store.dispatch(setChatActive(action.payload.payload.chat.id, true));\n          return;\n\n        default:\n          return;\n      }\n\n    case RESPONSE_RECEIVED:\n      switch (action.payload.action) {\n        case LIST_CHATS:\n          action.payload.payload.chatsSummary.filter(function (_ref) {\n            var id = _ref.id,\n                active = _ref.active;\n            return isChatActive(state, id) !== active;\n          }).forEach(function (_ref2) {\n            var id = _ref2.id,\n                active = _ref2.active;\n            store.dispatch(setChatActive(id, active));\n          });\n          return;\n\n        default:\n          return;\n      }\n\n  }\n};\n\nvar sendRequest$1 = function sendRequest$$1(socket, _ref3) {\n  var _ref3$payload = _ref3.payload,\n      id = _ref3$payload.id,\n      request = _ref3$payload.request;\n\n  var frame = _extends({\n    request_id: id\n  }, request);\n\n  socket.emit(frame);\n};\n\nvar emitUsers = function emitUsers(emit, users) {\n  users.forEach(function (user) {\n    if ('present' in user) {\n      var rest = _objectWithoutPropertiesLoose(user, [\"present\"]);\n\n      emit('user_data', rest);\n      return;\n    }\n\n    if (user.type === CUSTOMER) {\n      var _rest = _objectWithoutPropertiesLoose(user, [\"statistics\"]);\n\n      emit('user_data', _rest);\n      return;\n    }\n\n    emit('user_data', user);\n  });\n};\n\nvar handleMulticast = function handleMulticast(emit, _ref4) {\n  var type = _ref4.type,\n      content = _ref4.content;\n\n  if (type !== 'lc2') {\n    return;\n  }\n\n  if (content.name === 'groups_update' && 'groups' in content && !isEmpty(content.groups)) {\n    var _content$groups = content.groups,\n        group = _content$groups[0];\n    var availability = parseGroupStatus(group.status);\n    emit('availability_updated', {\n      availability: availability\n    });\n  }\n};\n\nvar handlePush = function handlePush(_ref5, _ref6) {\n  var emit = _ref5.emit,\n      store = _ref5.store;\n  var payload = _ref6.payload;\n\n  switch (payload.action) {\n    case THREAD_PROPERTIES_UPDATED:\n      if (payload.payload.properties.lc2 && 'queue_pos' in payload.payload.properties.lc2) {\n        emit(QUEUE_POSITION_UPDATED, {\n          chatId: payload.payload.chatId,\n          threadId: payload.payload.threadId,\n          queue: {\n            position: payload.payload.properties.lc2.queue_pos,\n            waitTime: payload.payload.properties.lc2.queue_waiting_time\n          }\n        });\n      }\n\n      emit('thread_properties_updated', payload.payload);\n      return;\n\n    case CUSTOMER_SIDE_STORAGE_UPDATED:\n      saveSideStorage(store, payload.payload.customer_side_storage);\n      return;\n\n    case CUSTOMER_DISCONNECTED:\n      // each of those should currently lead to either reconnect or destroy call\n      // after receiving this push server closes the connection with us\n      // which results in SOCKET_DISCONNECTED action being dispatched\n      // we don't want to rely on this (nor we want to risk emitting 'disconnected' twice)\n      // so we should handle all cases ourselves and close the connection preemptively\n      switch (payload.payload.reason) {\n        case ACCESS_TOKEN_EXPIRED:\n          // we passthrough access_token_expired here, so pending requests receive CONNECTION_LOST error\n          // we could fail them with ACCESS_TOKEN_EXPIRED, but it could force people to handle it in special manner\n          // but actually they should handle it exactly like CONNECTION_LOST:\n          // a request could succeed, who knows, it has to be checked after being reconnected\n          store.dispatch(prefetchToken(true));\n          store.dispatch(reconnect(SMALL_RECONNECT_DELAY));\n          emit('disconnected', payload.payload);\n          break;\n\n        case CUSTOMER_BANNED:\n        case CUSTOMER_TEMPORARILY_BLOCKED:\n        case LICENSE_NOT_FOUND:\n        case PRODUCT_VERSION_CHANGED:\n        case TOO_MANY_CONNECTIONS:\n        case UNSUPPORTED_VERSION:\n          // this also emits `disconnected` event - but it's handled in response to this action by destroy handler\n          store.dispatch(destroy(payload.payload.reason));\n          break;\n\n        case MISDIRECTED_CONNECTION$1:\n          failAllRequests(store, MISDIRECTED_CONNECTION);\n          store.dispatch({\n            type: CHANGE_REGION,\n            payload: payload.payload.data\n          });\n          break;\n\n        case TOO_MANY_UNAUTHORIZED_CONNECTIONS$1:\n          // this should only really fail a `login` request - as it's the only one sent before authorization\n          // and login should reconnect on its own right now\n          failAllRequests(store, TOO_MANY_UNAUTHORIZED_CONNECTIONS);\n          break;\n\n        default:\n          store.dispatch(reconnect(SMALL_RECONNECT_DELAY));\n          emit('disconnected', payload.payload);\n          break;\n      }\n\n      return;\n\n    case INCOMING_CHAT:\n      emitUsers(emit, payload.payload.chat.users);\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_EVENT:\n      if (payload.payload.event === null) {\n        return;\n      }\n\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_TYPING_INDICATOR:\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_MULTICAST:\n      handleMulticast(emit, payload.payload); // we passthrough this action even if it was already handled above\n\n      emit(payload.action, payload.payload);\n      return;\n\n    case USER_ADDED_TO_CHAT:\n      emitUsers(emit, [payload.payload.user]);\n      emit(payload.action, payload.payload);\n      return;\n\n    default:\n      emit(payload.action, payload.payload);\n      return;\n  }\n};\n\nvar handleResponse = function handleResponse(_ref7, _ref8) {\n  var emit = _ref7.emit;\n  var payload = _ref8.payload;\n\n  switch (payload.action) {\n    case CHAT_DEACTIVATED:\n      payload.resolve(SUCCESS);\n      return;\n\n    case GET_CHAT:\n      emitUsers(emit, payload.payload.users);\n      payload.resolve(payload.payload);\n      return;\n\n    case INCOMING_CHAT:\n      emitUsers(emit, payload.payload.chat.users);\n      payload.resolve(payload.payload);\n      return;\n\n    case INCOMING_EVENT:\n      payload.resolve(payload.payload.event);\n      return;\n\n    case LIST_CHATS:\n      emitUsers(emit, payload.payload.users);\n      payload.resolve(payload.payload);\n      return;\n\n    default:\n      payload.resolve(payload.payload);\n      return;\n  }\n};\n\nvar createSideEffectsHandler = function createSideEffectsHandler(_ref9) {\n  var auth = _ref9.auth,\n      customerDataProvider = _ref9.customerDataProvider,\n      emitter = _ref9.emitter,\n      socket = _ref9.socket;\n  var emit = emitter.emit;\n  var login = createLoginTask(auth, customerDataProvider); // TODO: using Store type here is a lie, middleware only provides MiddlewareAPI here\n\n  return function (action, store) {\n    switch (action.type) {\n      case CHANGE_REGION:\n        socket.reinitialize();\n        return;\n\n      case CHECK_GOALS:\n        checkGoals(store, auth, action.payload.sessionFields).catch(noop);\n        return;\n\n      case DESTROY:\n        {\n          var payload = action.payload;\n          socket.destroy();\n\n          if (payload.reason !== 'manual') {\n            emit('disconnected', payload);\n          }\n\n          emitter.off();\n          return;\n        }\n\n      case FAIL_ALL_REQUESTS:\n        {\n          var _action$payload = action.payload,\n              reason = _action$payload.reason,\n              rejects = _action$payload.rejects;\n          var error = {\n            message: FAIL_ALL_REQUESTS_MESSAGES[reason],\n            code: reason\n          };\n          rejects.forEach(function (reject) {\n            reject(createError(error));\n          });\n          return;\n        }\n\n      case LOGIN_SUCCESS:\n        {\n          var _action$payload2 = action.payload,\n              dynamicConfig = _action$payload2.dynamicConfig,\n              customer = _action$payload2.customer,\n              chats = _action$payload2.chats,\n              greeting = _action$payload2.greeting,\n              availability = _action$payload2.availability;\n\n          var eventData = _extends({\n            customer: customer,\n            availability: availability\n          }, greeting && {\n            greeting: greeting\n          });\n\n          Object.defineProperty(eventData, '__unsafeDynamicConfig', {\n            value: dynamicConfig\n          });\n          Object.defineProperty(eventData, '__unsafeChats', {\n            value: chats\n          });\n          emit('connected', eventData);\n          return;\n        }\n\n      case PAUSE_CONNECTION:\n        socket.disconnect();\n        return;\n\n      case PREFETCH_TOKEN:\n        if (action.payload.fresh) {\n          auth.getFreshToken().catch(noop);\n          return;\n        }\n\n        auth.hasToken().then(function (hasToken) {\n          if (!hasToken) {\n            return auth.getToken();\n          }\n\n          return auth.getToken().then(function (_ref10) {\n            var creationDate = _ref10.creationDate,\n                expiresIn = _ref10.expiresIn;\n            var ONE_HOUR = 60 * 60 * 1000; // check if the token is worth reusing\n            // we don't want to get disconnected in a moment because of expired token\n\n            if (creationDate + expiresIn - Date.now() > ONE_HOUR) {\n              return;\n            }\n\n            return auth.invalidate().then(auth.getFreshToken);\n          });\n        }).catch(noop);\n        return;\n\n      case PUSH_RECEIVED:\n        // TODO: this if doesn't seem to make much sense\n        // I'm too afraid to remove it right now though\n        if (action.payload.action === CUSTOMER_DISCONNECTED) {\n          handlePush({\n            emit: emit,\n            store: store\n          }, action);\n          return;\n        }\n\n        updateStateIfNeeded(store, action);\n        handlePush({\n          emit: emit,\n          store: store\n        }, action);\n        return;\n\n      case PUSH_RESPONSE_RECEIVED:\n        updateStateIfNeeded(store, action);\n        handleResponse({\n          emit: emit\n        }, action);\n        return;\n\n      case RECONNECT:\n        socket.reconnect(action.payload.delay);\n        return;\n\n      case REQUEST_FAILED:\n        {\n          var _action$payload3 = action.payload,\n              reject = _action$payload3.reject,\n              _error = _action$payload3.error;\n          reject(createError(_error));\n          return;\n        }\n\n      case RESPONSE_RECEIVED:\n        updateStateIfNeeded(store, action);\n        handleResponse({\n          emit: emit\n        }, action);\n        return;\n\n      case SEND_REQUEST:\n        {\n          var state = store.getState();\n\n          if (isDestroyed(state)) {\n            failRequest(store, action, {\n              code: 'SDK_DESTROYED',\n              message: 'SDK destroyed.'\n            });\n            return;\n          }\n\n          if (!isConnected(state) && action.payload.source !== 'login') {\n            failRequest(store, action, {\n              code: 'NO_CONNECTION',\n              message: 'No connection.'\n            });\n            return;\n          }\n\n          sendRequest$1(socket, action);\n        }\n        return;\n\n      case SET_SELF_ID:\n        emit('customer_id', action.payload.id);\n        return;\n\n      case SOCKET_DISCONNECTED:\n        emit('disconnected', {\n          reason: 'connection_lost'\n        });\n        return;\n\n      case SOCKET_CONNECTED:\n        login(store);\n        return;\n\n      case SOCKET_RECOVERED:\n        // don't emit if from consumer's perspective we haven't been connected\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        emit('connection_recovered');\n        return;\n\n      case SOCKET_UNSTABLE:\n        // don't emit if from consumer's perspective we haven't been connected\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        emit('connection_unstable');\n        return;\n\n      case START_CONNECTION:\n        socket.connect();\n        store.dispatch(prefetchToken());\n        return;\n\n      case UPDATE_CUSTOMER_PAGE:\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        sendRequestAction(store, sendRequest(UPDATE_CUSTOMER_PAGE$1, action.payload)).catch(noop);\n        return;\n\n      default:\n        return;\n    }\n  };\n};\n\nvar HISTORY_EVENT_COUNT_TARGET = 25;\n\nvar createState = function createState() {\n  return {\n    status: 'idle',\n    queuedTasks: [],\n    nextPageId: null\n  };\n};\n\nvar createChatHistoryIterator = function createChatHistoryIterator(sdk, chatId) {\n  var historyState = createState();\n\n  var next = function next(resolve, reject) {\n    switch (historyState.status) {\n      case 'idle':\n        historyState.status = 'fetching';\n        sdk.listThreads({\n          chatId: chatId,\n          minEventsCount: HISTORY_EVENT_COUNT_TARGET,\n          pageId: historyState.nextPageId || undefined\n        }).then(function (_ref) {\n          var threads = _ref.threads,\n              nextPageId = _ref.nextPageId;\n          historyState.nextPageId = nextPageId;\n\n          if (!historyState.nextPageId) {\n            historyState.status = 'done';\n            resolve({\n              value: {\n                threads: [].concat(threads).reverse()\n              },\n              done: true\n            });\n          } else {\n            historyState.status = 'idle';\n            resolve({\n              value: {\n                threads: [].concat(threads).reverse()\n              },\n              done: false\n            });\n          }\n\n          var queuedTask = historyState.queuedTasks.shift();\n\n          if (!queuedTask) {\n            return;\n          }\n\n          next(queuedTask.resolve, queuedTask.reject);\n        }, function (err) {\n          var queuedTasks = historyState.queuedTasks;\n          historyState.status = 'idle';\n          historyState.queuedTasks = [];\n          reject(err);\n          queuedTasks.forEach(function (queuedTask) {\n            return queuedTask.reject(err);\n          });\n        });\n        return;\n\n      case 'fetching':\n        historyState.queuedTasks.push({\n          resolve: resolve,\n          reject: reject\n        });\n        return;\n\n      case 'done':\n        resolve({\n          value: undefined,\n          done: true\n        });\n        return;\n    }\n  };\n\n  return {\n    next: function (_next) {\n      function next() {\n        return _next.apply(this, arguments);\n      }\n\n      next.toString = function () {\n        return _next.toString();\n      };\n\n      return next;\n    }(function () {\n      return new Promise(next);\n    })\n  };\n};\n\nvar initialize = function initialize(store, emitter) {\n  var state = store.getState();\n  var url = getServerUrl(state) + \"/rtm/sjs\";\n  return createPlatformClient(url, {\n    query: {\n      license_id: state.licenseId\n    },\n    emitter: emitter\n  });\n};\n\nvar createSocketClient = function createSocketClient(store) {\n  var emitter = mitt();\n  var client = initialize(store, emitter);\n  return _extends({}, Object.keys(client).reduce(function (proxy, method) {\n    proxy[method] = function () {\n      var _client;\n\n      return (_client = client)[method].apply(_client, arguments);\n    };\n\n    return proxy;\n  }, {}), {\n    reinitialize: function reinitialize() {\n      client.disconnect();\n      client = initialize(store, emitter);\n      client.connect();\n    }\n  });\n};\n\nvar parseChatPropertiesDeletedPush = function parseChatPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    properties: payload.properties\n  };\n};\n\nvar parseChatPropertiesUpdatedPush = function parseChatPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    properties: payload.properties\n  };\n};\n\nvar parseChatTransferredPush = function parseChatTransferredPush(payload) {\n  var basePayload = {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    transferredTo: _extends({}, payload.transferred_to.agent_ids && {\n      agentIds: payload.transferred_to.agent_ids\n    }, payload.transferred_to.group_ids && {\n      groupIds: payload.transferred_to.group_ids\n    }),\n    queue: payload.queue ? parseQueue(payload.queue) : null\n  };\n\n  if (payload.reason === 'manual') {\n    return _extends({}, basePayload, {\n      reason: payload.reason,\n      requesterId: payload.requester_id\n    });\n  }\n\n  return _extends({}, basePayload, {\n    reason: payload.reason\n  });\n};\n\nvar parseCustomerPageUpdatedPush = function parseCustomerPageUpdatedPush(payload) {\n  return {\n    url: payload.url,\n    title: payload.title,\n    timestamp: payload.timestamp * 1000\n  };\n};\n\nvar parseCustomerUpdatedPush = function parseCustomerUpdatedPush(payload) {\n  return {\n    customer: _extends({\n      id: payload.customer.id\n    }, parseCustomerOptionalProps(payload.customer))\n  };\n};\n\nvar parseEventPropertiesDeletedPush = function parseEventPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    properties: payload.properties\n  };\n};\n\nvar parseEventPropertiesUpdatedPush = function parseEventPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    properties: payload.properties\n  };\n};\n\nvar parseEventUpdatedPush = function parseEventUpdatedPush(payload) {\n  var threadId = payload.thread_id;\n  return {\n    chatId: payload.chat_id,\n    threadId: threadId,\n    event: parseEvent$1(threadId, payload.event)\n  };\n};\n\nvar parseEventsMarkedAsSeenPush = function parseEventsMarkedAsSeenPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    userId: payload.user_id,\n    seenUpTo: payload.seen_up_to\n  };\n};\n\nvar parseGreetingAcceptedPush = function parseGreetingAcceptedPush(payload) {\n  return {\n    uniqueId: payload.unique_id\n  };\n};\n\nvar parseGetChatResponse = function parseGetChatResponse(payload) {\n  return parseIncomingChat(payload);\n};\n\nvar parseIncomingChatPush = function parseIncomingChatPush(payload) {\n  return {\n    chat: parseIncomingChat(payload.chat)\n  };\n};\n\nvar parseIncomingEventPush = function parseIncomingEventPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    event: parseEvent$1(payload.thread_id, payload.event)\n  };\n};\n\nvar parseIncomingGreetingPush = function parseIncomingGreetingPush(payload) {\n  return parseGreeting(payload);\n};\n\nvar parseIncomingRichMessagePostbackPush = function parseIncomingRichMessagePostbackPush(payload) {\n  return {\n    userId: payload.user_id,\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    postback: payload.postback\n  };\n};\n\nvar parseIncomingTypingIndicatorPush = function parseIncomingTypingIndicatorPush(payload) {\n  var chatId = payload.chat_id,\n      typingIndicator = payload.typing_indicator;\n  return {\n    chatId: chatId,\n    typingIndicator: {\n      authorId: typingIndicator.author_id,\n      isTyping: typingIndicator.is_typing\n    }\n  };\n};\n\nvar parseQueuePositionUpdatedPush = function parseQueuePositionUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    queue: parseQueueUpdate(payload.queue)\n  };\n};\n\nvar parseThreadPropertiesDeletedPush = function parseThreadPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    properties: payload.properties\n  };\n};\n\nvar parseThreadPropertiesUpdatedPush = function parseThreadPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    properties: payload.properties\n  };\n};\n\nvar parseUserAddedToChatPush = function parseUserAddedToChatPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    user: parseChatUser(payload.user),\n    present: payload.user.present\n  };\n};\n\nvar parseUserRemovedFromChatPush = function parseUserRemovedFromChatPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    userId: payload.user_id\n  };\n};\n\nvar parseFields = function parseFields(fields) {\n  return fields.map(function (field) {\n    switch (field.type) {\n      case 'group_chooser':\n        return _extends({}, field, {\n          options: field.options.map(function (_ref) {\n            var groupId = _ref.group_id,\n                option = _objectWithoutPropertiesLoose(_ref, [\"group_id\"]);\n\n            return _extends({}, option, {\n              groupId: groupId\n            });\n          })\n        });\n\n      case 'rating':\n        {\n          var commentLabel = field.comment_label,\n              parsed = _objectWithoutPropertiesLoose(field, [\"comment_label\"]);\n\n          return _extends({}, parsed, {\n            commentLabel: commentLabel\n          });\n        }\n\n      default:\n        return field;\n    }\n  });\n};\n\nvar parseTicketFormFields = function parseTicketFormFields(fields) {\n  var withFakeIds = fields.map(function (field, index) {\n    return _extends({}, field, {\n      id: String(index)\n    });\n  });\n  return parseFields(withFakeIds);\n};\n\nvar parseGetFormResponse = function parseGetFormResponse(payload) {\n  if (!payload.enabled) {\n    return payload;\n  }\n\n  return _extends({}, payload, {\n    form: 'id' in payload.form.fields[0] ? {\n      id: payload.form.id,\n      fields: parseFields(payload.form.fields)\n    } : {\n      // TODO: should we fake id for this one?\n      id: 'ticket',\n      fields: parseTicketFormFields(payload.form.fields)\n    }\n  });\n};\n\nvar parseGetUrlInfoResponse = function parseGetUrlInfoResponse(payload) {\n  var urlInfo = {\n    url: payload.url\n  };\n\n  if (payload.title) {\n    urlInfo.title = payload.title;\n  }\n\n  if (payload.description) {\n    urlInfo.description = payload.description;\n  }\n\n  if (payload.image_url) {\n    urlInfo.imageUrl = \"https://\" + payload.image_url;\n\n    if (payload.image_width && payload.image_height) {\n      urlInfo.imageWidth = payload.image_width;\n      urlInfo.imageHeight = payload.image_height;\n    }\n  }\n\n  return urlInfo;\n};\n\nvar getAvailabilityBasedOnDynamicConfig = function getAvailabilityBasedOnDynamicConfig(_ref2) {\n  var onlineGroups = _ref2.online_groups_ids,\n      customerGroups = _ref2.customer_groups; // this might be missing if all groups are offline\n\n  if (!onlineGroups) {\n    return 'offline';\n  }\n\n  var monitoringGroupId = customerGroups.monitoring.id;\n  return includes(monitoringGroupId, onlineGroups) ? 'online' : 'offline';\n};\n\nvar parseListChatsResponse = function parseListChatsResponse(payload) {\n  var chatsSummary = payload.chats_summary.map(function (_ref3) {\n    var id = _ref3.id,\n        active = _ref3.active,\n        access = _ref3.access,\n        lastThreadCreatedAt = _ref3.last_thread_created_at,\n        lastThreadId = _ref3.last_thread_id,\n        lastEventsPerType = _ref3.last_event_per_type,\n        _ref3$properties = _ref3.properties,\n        properties = _ref3$properties === void 0 ? {} : _ref3$properties,\n        users = _ref3.users;\n    var chatSummary = {\n      id: id,\n      active: active,\n      access: parseAccess(access),\n      properties: properties,\n      users: users.map(parseChatUser),\n      lastThreadId: lastThreadId || null,\n      lastThreadCreatedAt: lastThreadCreatedAt || null,\n      eventsSeenUpToMap: getEventsSeenUpToMap(users)\n    };\n\n    if (!lastEventsPerType) {\n      return chatSummary;\n    }\n\n    chatSummary.lastEventsPerType = mapValues(function (lastEventPerType) {\n      return parseEvent$1(lastEventPerType.thread_id, lastEventPerType.event);\n    }, lastEventsPerType);\n    var refinedLastEventsPerType = lastEventsPerType;\n    var lastEventSummariesArray = Object.keys(refinedLastEventsPerType).map(function (eventType) {\n      return refinedLastEventsPerType[eventType];\n    });\n    var lastEventSummary = last(lastEventSummariesArray.sort(function (eventSummaryA, eventSummaryB) {\n      return eventSummaryA.thread_id === eventSummaryB.thread_id ? stringCompare(eventSummaryA.event.created_at, eventSummaryB.event.created_at) : stringCompare(eventSummaryA.thread_created_at, eventSummaryB.thread_created_at);\n    }));\n\n    if (lastEventSummary) {\n      chatSummary.lastEvent = chatSummary.lastEventsPerType[lastEventSummary.event.type];\n    }\n\n    return chatSummary;\n  });\n  return {\n    chatsSummary: numericSortBy(function (_ref4) {\n      var lastEvent = _ref4.lastEvent,\n          order = _ref4.order;\n      return -1 * (lastEvent !== undefined ? lastEvent.timestamp : order);\n    }, chatsSummary),\n    totalChats: payload.total_chats,\n    users: uniqBy(function (user) {\n      return user.id;\n    }, flatMap(function (summary) {\n      return summary.users;\n    }, chatsSummary)),\n    previousPageId: payload.previous_page_id || null,\n    nextPageId: payload.next_page_id || null\n  };\n};\n\nvar parseListGroupStatusesResponse = function parseListGroupStatusesResponse(payload) {\n  return payload.groups_status;\n};\n\nvar parseListThreadsResponse = function parseListThreadsResponse(request, payload) {\n  return {\n    threads: payload.threads.map(function (thread) {\n      return parseThread(request.payload.chat_id, thread);\n    }),\n    previousPageId: payload.previous_page_id || null,\n    nextPageId: payload.next_page_id || null\n  };\n};\n\nvar parseLoginResponse = function parseLoginResponse(payload) {\n  var dynamicConfig = payload.__priv_dynamic_config,\n      chats = payload.chats;\n  var greeting = payload.greeting || dynamicConfig.greeting; // TODO: remove the fallback after API release the new greeting object position to the prod env\n\n  return _extends({\n    dynamicConfig: dynamicConfig,\n    customer: parseCustomer(payload.customer),\n    availability: getAvailabilityBasedOnDynamicConfig(dynamicConfig),\n    chats: chats.map(function (chat) {\n      return {\n        id: chat.chat_id,\n        active: 'has_active_thread' in chat ? chat.has_active_thread : // temporary fallback, waiting for API to move this flag into `chats` array\n        payload.has_active_thread,\n        hasUnreadEvents: chat.has_unread_events\n      };\n    })\n  }, greeting && {\n    greeting: parseGreeting(greeting)\n  });\n};\n\nvar parsePush = function parsePush(push) {\n  switch (push.action) {\n    case CHAT_DEACTIVATED:\n      return {\n        action: push.action,\n        payload: {\n          chatId: push.payload.chat_id\n        }\n      };\n\n    case CHAT_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseChatPropertiesDeletedPush(push.payload)\n      };\n\n    case CHAT_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseChatPropertiesUpdatedPush(push.payload)\n      };\n\n    case CHAT_TRANSFERRED:\n      return {\n        action: push.action,\n        payload: parseChatTransferredPush(push.payload)\n      };\n\n    case CUSTOMER_SIDE_STORAGE_UPDATED:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case CUSTOMER_DISCONNECTED:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case CUSTOMER_PAGE_UPDATED:\n      return {\n        action: push.action,\n        payload: parseCustomerPageUpdatedPush(push.payload)\n      };\n\n    case CUSTOMER_UPDATED:\n      return {\n        action: push.action,\n        payload: parseCustomerUpdatedPush(push.payload)\n      };\n\n    case EVENT_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseEventPropertiesDeletedPush(push.payload)\n      };\n\n    case EVENT_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseEventPropertiesUpdatedPush(push.payload)\n      };\n\n    case EVENT_UPDATED:\n      return {\n        action: push.action,\n        payload: parseEventUpdatedPush(push.payload)\n      };\n\n    case EVENTS_MARKED_AS_SEEN:\n      return {\n        action: push.action,\n        payload: parseEventsMarkedAsSeenPush(push.payload)\n      };\n\n    case GREETING_ACCEPTED:\n      return {\n        action: push.action,\n        payload: parseGreetingAcceptedPush(push.payload)\n      };\n\n    case GREETING_CANCELED:\n      return {\n        action: push.action,\n        // 'greeting_canceled' has the same payload as `greeting_accepted`\n        payload: parseGreetingAcceptedPush(push.payload)\n      };\n\n    case INCOMING_CHAT:\n      return {\n        action: push.action,\n        payload: parseIncomingChatPush(push.payload)\n      };\n\n    case INCOMING_EVENT:\n      return {\n        action: push.action,\n        payload: parseIncomingEventPush(push.payload)\n      };\n\n    case INCOMING_GREETING:\n      return {\n        action: push.action,\n        payload: parseIncomingGreetingPush(push.payload)\n      };\n\n    case INCOMING_MULTICAST:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case INCOMING_RICH_MESSAGE_POSTBACK:\n      return {\n        action: push.action,\n        payload: parseIncomingRichMessagePostbackPush(push.payload)\n      };\n\n    case INCOMING_TYPING_INDICATOR:\n      return {\n        action: push.action,\n        payload: parseIncomingTypingIndicatorPush(push.payload)\n      };\n\n    case QUEUE_POSITION_UPDATED:\n      return {\n        action: push.action,\n        payload: parseQueuePositionUpdatedPush(push.payload)\n      };\n\n    case THREAD_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseThreadPropertiesDeletedPush(push.payload)\n      };\n\n    case THREAD_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseThreadPropertiesUpdatedPush(push.payload)\n      };\n\n    case USER_ADDED_TO_CHAT:\n      return {\n        action: push.action,\n        payload: parseUserAddedToChatPush(push.payload)\n      };\n\n    case USER_REMOVED_FROM_CHAT:\n      return {\n        action: push.action,\n        payload: parseUserRemovedFromChatPush(push.payload) // TODO: remove those once we sync with the API on prod\n\n      };\n\n    case 'chat_user_added':\n      return {\n        action: USER_ADDED_TO_CHAT,\n        payload: parseUserAddedToChatPush(push.payload)\n      };\n\n    case 'chat_user_removed':\n      return {\n        action: USER_REMOVED_FROM_CHAT,\n        payload: parseUserRemovedFromChatPush(push.payload)\n      };\n  }\n};\n\nvar parseResponse = function parseResponse(_ref5) {\n  var request = _ref5.request,\n      response = _ref5.response;\n\n  switch (response.action) {\n    case ACCEPT_GREETING:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case CANCEL_GREETING:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_CHAT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_EVENT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_THREAD_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case GET_CHAT:\n      return {\n        action: response.action,\n        payload: parseGetChatResponse(response.payload)\n      };\n\n    case GET_CUSTOMER:\n      return {\n        action: response.action,\n        payload: parseCustomer(response.payload)\n      };\n\n    case GET_FORM:\n      return {\n        action: response.action,\n        payload: parseGetFormResponse(response.payload)\n      };\n\n    case GET_PREDICTED_AGENT:\n      return {\n        action: response.action,\n        payload: parsePredictedAgent(response.payload)\n      };\n\n    case GET_URL_INFO:\n      return {\n        action: response.action,\n        payload: parseGetUrlInfoResponse(response.payload)\n      };\n\n    case LIST_CHATS:\n      return {\n        action: response.action,\n        payload: parseListChatsResponse(response.payload)\n      };\n\n    case LIST_GROUP_STATUSES:\n      return {\n        action: response.action,\n        payload: parseListGroupStatusesResponse(response.payload)\n      };\n\n    case LIST_THREADS:\n      return {\n        action: response.action,\n        payload: parseListThreadsResponse(request, response.payload)\n      };\n\n    case LOGIN:\n      return {\n        action: response.action,\n        payload: parseLoginResponse(response.payload)\n      };\n\n    case MARK_EVENTS_AS_SEEN:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SEND_SNEAK_PEEK:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SET_CUSTOMER_SESSION_FIELDS:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SEND_RICH_MESSAGE_POSTBACK:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CHAT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CUSTOMER:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CUSTOMER_PAGE$1:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_EVENT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_THREAD_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n  }\n};\n\nvar parseServerError = function parseServerError(error) {\n  return {\n    code: error.type.toUpperCase(),\n    message: error.message\n  };\n};\n\nvar handleResponseError = function handleResponseError(_ref, response) {\n  var dispatch = _ref.dispatch,\n      getState = _ref.getState;\n  var requestId = response.request_id,\n      payload = response.payload;\n\n  var _getRequest = getRequest(getState(), requestId),\n      reject = _getRequest.reject;\n\n  dispatch({\n    type: REQUEST_FAILED,\n    payload: {\n      id: requestId,\n      reject: reject,\n      error: parseServerError(payload.error)\n    }\n  });\n};\n\nvar handleResponse$1 = function handleResponse(_ref2, response) {\n  var dispatch = _ref2.dispatch,\n      getState = _ref2.getState;\n  var requestId = response.request_id;\n\n  var _getRequest2 = getRequest(getState(), requestId),\n      promise = _getRequest2.promise,\n      resolve = _getRequest2.resolve,\n      request = _getRequest2.request;\n\n  var parsedResponse = parseResponse({\n    request: request,\n    response: response\n  });\n  dispatch({\n    type: RESPONSE_RECEIVED,\n    payload: _extends({\n      id: requestId,\n      promise: promise,\n      resolve: resolve\n    }, parsedResponse)\n  });\n};\n\nvar handlePushResponse = function handlePushResponse(_ref3, response) {\n  var dispatch = _ref3.dispatch,\n      getState = _ref3.getState;\n  var requestId = response.request_id;\n\n  var _getRequest3 = getRequest(getState(), requestId),\n      promise = _getRequest3.promise,\n      resolve = _getRequest3.resolve;\n\n  var parsedPush = parsePush(response);\n  dispatch({\n    type: PUSH_RESPONSE_RECEIVED,\n    payload: _extends({\n      id: requestId,\n      promise: promise,\n      resolve: resolve\n    }, parsedPush)\n  });\n};\n\nvar handlePush$1 = function handlePush(store, push) {\n  var parsedPush = parsePush(push);\n\n  if (!parsedPush) {\n    // defensive measure against receiving unknown push\n    return;\n  }\n\n  store.dispatch({\n    type: PUSH_RECEIVED,\n    payload: parsedPush\n  });\n};\n\nvar socketListener = function socketListener(store, socket) {\n  var dispatch = store.dispatch;\n  socket.on('connect', function () {\n    dispatch({\n      type: SOCKET_CONNECTED\n    });\n  });\n  socket.on('message', function (message) {\n    if (message.type === 'response') {\n      if (!message.success) {\n        handleResponseError(store, message);\n        return;\n      }\n\n      switch (message.action) {\n        case ACTIVATE_CHAT:\n        case DEACTIVATE_CHAT:\n        case SEND_EVENT:\n        case START_CHAT:\n          // those are requests with indirect responses\n          return;\n\n        default:\n          handleResponse$1(store, message);\n          return;\n      }\n    }\n\n    if ('request_id' in message) {\n      switch (message.action) {\n        case CHAT_DEACTIVATED:\n        case INCOMING_CHAT:\n        case INCOMING_EVENT:\n          // those are acting as indirect responses\n          handlePushResponse(store, message);\n          return;\n      }\n    }\n\n    handlePush$1(store, message);\n  });\n  socket.on('disconnect', function () {\n    failAllRequests(store, CONNECTION_LOST);\n\n    if (getConnectionStatus(store.getState()) === CONNECTED) {\n      store.dispatch(socketDisconnected());\n    }\n  });\n  socket.on('connection_unstable', function () {\n    dispatch({\n      type: SOCKET_UNSTABLE\n    });\n  });\n  socket.on('connection_recovered', function () {\n    dispatch({\n      type: SOCKET_RECOVERED\n    });\n  });\n  return socket.off;\n};\n\nvar INCORRECT_REQUESTER_STRUCTURE = 'incorrect requester structure';\n\nvar appendString = function appendString(input, str) {\n  return input.length ? input + \"\\n\" + str : str;\n};\n\nvar createTicketBody = function createTicketBody(state, _ref) {\n  var fields = _ref.fields,\n      customerId = _ref.customerId,\n      _ref$groupId = _ref.groupId,\n      groupId = _ref$groupId === void 0 ? state.groupId : _ref$groupId,\n      timeZone = _ref.timeZone;\n\n  var ticketBody = _extends({\n    licence_id: state.licenseId,\n    ticket_message: '',\n    offline_message: '',\n    visitor_id: customerId,\n    requester: {}\n  }, typeof groupId === 'number' && {\n    group: groupId\n  }, state.page && {\n    source: {\n      url: state.page.url\n    }\n  }, timeZone && {\n    timezone: timeZone\n  });\n\n  return fields.reduce(function (body, field) {\n    switch (field.type) {\n      case 'subject':\n        {\n          var value = field.answer;\n          var text = value ? field.label + \" \" + value : field.label;\n\n          if (value) {\n            body.subject = value;\n          }\n\n          body.offline_message = appendString(body.offline_message, text);\n          return body;\n        }\n\n      case 'name':\n        {\n          var _value = field.answer;\n\n          var _text = _value ? field.label + \" \" + _value : field.label;\n\n          if (_value) {\n            body.requester.name = _value;\n          }\n\n          body.offline_message = appendString(body.offline_message, _text);\n          return body;\n        }\n\n      case 'email':\n        {\n          var _value2 = field.answer;\n\n          var _text2 = _value2 ? field.label + \" \" + _value2 : field.label;\n\n          body.requester.mail = _value2;\n          body.offline_message = appendString(body.offline_message, _text2);\n          return body;\n        }\n\n      case 'question':\n      case 'textarea':\n        {\n          var _value3 = field.answer;\n\n          var _text3 = _value3 ? field.label + \" \" + _value3 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text3);\n          body.ticket_message = appendString(body.ticket_message, _text3);\n          return body;\n        }\n\n      case 'radio':\n      case 'select':\n        {\n          var _value4 = field.answer && field.answer.label;\n\n          var _text4 = _value4 ? field.label + \" \" + _value4 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text4);\n          body.ticket_message = appendString(body.ticket_message, _text4);\n          return body;\n        }\n\n      case 'checkbox':\n        {\n          var _value5 = field.answers && field.answers.map(function (answer) {\n            return answer.label;\n          }).join(', ');\n\n          var _text5 = _value5 ? field.label + \" \" + _value5 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text5);\n          body.ticket_message = appendString(body.ticket_message, _text5);\n          return body;\n        }\n\n      default:\n        return body;\n    }\n  }, ticketBody);\n};\n\nvar sendTicketForm = function sendTicketForm(store, auth, _ref2) {\n  var filledForm = _ref2.filledForm,\n      groupId = _ref2.groupId,\n      timeZone = _ref2.timeZone;\n  return auth.getToken().then(function (token) {\n    var state = store.getState();\n\n    if (getSelfId(state) === null) {\n      store.dispatch(setSelfId(token.entityId));\n    }\n\n    var url = getApiOrigin(state) + \"/v2/tickets/new\";\n    var body = createTicketBody(state, {\n      fields: filledForm.fields,\n      customerId: token.entityId,\n      groupId: groupId,\n      timeZone: timeZone\n    });\n    return unfetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json().then(function (res) {\n          return _extends({}, res, {\n            text: body.ticket_message\n          });\n        });\n      } // we actually should normalize this somehow\n\n\n      if (response.status === 400 || response.status === 422) {\n        var errHandler = function errHandler(error) {\n          if (!error || !error.errors) {\n            // TODO: I honestly don't know if this can even be reached and even if it is - What error should be thrown here\n            throw new Error();\n          } // we receive some hardcore aggregate error here 😱\n\n\n          var firstError = error.errors[0];\n          var type = Object.keys(firstError)[0];\n\n          if (type === INCORRECT_REQUESTER_STRUCTURE) {\n            throw createError({\n              message: firstError[INCORRECT_REQUESTER_STRUCTURE][0],\n              code: 'VALIDATION'\n            });\n          }\n\n          throw new Error();\n        };\n\n        return response.json().then(errHandler, errHandler);\n      }\n\n      throw new Error();\n    });\n  });\n};\n\nvar KILOBYTE = 1024;\nvar MEGABYTE = 1024 * KILOBYTE;\nvar GIGABYTE = 1024 * MEGABYTE;\nvar SIZE_LIMIT = 10 * MEGABYTE;\n\nvar formatBytes = function formatBytes(bytes, precision) {\n  if (precision === void 0) {\n    precision = 2;\n  }\n\n  if (bytes < KILOBYTE) {\n    return bytes + \" b\";\n  }\n\n  var kilobytes = bytes / 1024;\n\n  if (bytes < MEGABYTE) {\n    return kilobytes.toFixed(precision) + \" kb\";\n  }\n\n  var megabytes = kilobytes / 1024;\n\n  if (bytes < GIGABYTE) {\n    return megabytes.toFixed(precision) + \" MB\";\n  }\n\n  var gigabytes = megabytes / 1024;\n  return gigabytes.toFixed(precision) + \" GB\";\n};\n\nvar validateFile = function validateFile(file) {\n  if (file.size > SIZE_LIMIT) {\n    throw createError({\n      message: \"The file is too big (max size is \" + formatBytes(SIZE_LIMIT) + \").\",\n      code: 'TOO_BIG_FILE'\n    });\n  }\n};\n\nvar uploadFile = function uploadFile(_ref, _ref2) {\n  var auth = _ref.auth,\n      store = _ref.store;\n  var file = _ref2.file,\n      onProgress = _ref2.onProgress;\n  var upload;\n  var cancelled = false;\n  var send = new Promise(function (resolve, reject) {\n    validateFile(file);\n    var state = store.getState();\n    var query = buildQueryString({\n      license_id: state.licenseId\n    });\n    var url = getServerUrl(state) + \"/action/\" + UPLOAD_FILE + \"?\" + query;\n    var payload = {\n      file: file\n    };\n    auth.getToken().then(function (token) {\n      if (cancelled) {\n        reject(new Error('Upload cancelled.'));\n        return;\n      }\n\n      upload = rawUploadFile(url, payload, {\n        headers: {\n          Authorization: token.tokenType + \" \" + token.accessToken\n        },\n        onProgress: onProgress\n      });\n      upload.promise.then(resolve, function (uploadError) {\n        // an error might not come from a server\n        if (!uploadError.response) {\n          reject(uploadError);\n          return;\n        }\n\n        var _uploadError$response = uploadError.response.error,\n            type = _uploadError$response.type,\n            message = _uploadError$response.message;\n        reject(createError({\n          message: message,\n          code: type.toUpperCase()\n        }));\n      });\n    });\n  });\n  return {\n    promise: send,\n    cancel: function cancel() {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (upload) {\n        upload.cancel();\n      }\n    }\n  };\n};\n\nvar makeGraylogRequest = function makeGraylogRequest(url, body) {\n  return new Promise(function (resolve) {\n    var img = new Image();\n    img.src = url + \"?\" + body;\n    img.onerror = noop;\n\n    img.onload = function () {\n      return resolve();\n    };\n  });\n};\n/**\n * Logs event to Graylog with provided config data.\n * Logging request is fired only when all of those conditions are true:\n * 1. package is used in lc production environment\n * 2. package is used standalone because only then \"customer_sdk\" will be set to customer_sdk\n */\n\n\nvar log = function log(_ref) {\n  var env = _ref.env,\n      licenseId = _ref.licenseId,\n      eventName = _ref.eventName;\n\n  if (env !== 'production' || \"customer_sdk\" !== 'customer_sdk') {\n    return Promise.resolve();\n  }\n\n  var message = {\n    event_name: eventName,\n    severity: 'Informational',\n    sdkVersion: \"2.0.4\"\n  };\n  var body = {\n    licence_id: licenseId,\n    event_id: 'chat_widget_customer_sdk',\n    message: JSON.stringify(message)\n  };\n  return makeGraylogRequest('https://queue.livechatinc.com/logs', buildQueryString(body));\n};\n\nvar LISTENER_IDENTITY = 'LISTENER_IDENTITY';\nvar listenersMap = {};\n\nvar createDebuggedMethods = function createDebuggedMethods(methods, prefix) {\n  if (prefix === void 0) {\n    prefix = '';\n  }\n\n  var methodNames = Object.keys(methods);\n  return methodNames.map(function (methodName) {\n    var method = methods[methodName];\n    return function () {\n      var _console;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (_console = console).info.apply(_console, [prefix + \".\" + methodName + \"() ===>\"].concat(args));\n\n      var result = method.apply(void 0, args);\n\n      if (result && typeof result.then === 'function') {\n        result.then(function (data) {\n          console.info(prefix + \".\" + methodName + \"() <===\", data);\n        }).catch(function (err) {\n          console.error(prefix + \".\" + methodName + \"() <===\", err);\n        });\n      }\n\n      return result;\n    };\n  }).reduce(function (acc, method, index) {\n    acc[methodNames[index]] = method;\n    return acc;\n  }, {});\n};\n\nvar createEnhancedListener = function createEnhancedListener(label, event, listener) {\n  if (listener[LISTENER_IDENTITY] === undefined) {\n    Object.defineProperty(listener, LISTENER_IDENTITY, {\n      value: {}\n    });\n  }\n\n  if (listener[LISTENER_IDENTITY][event]) {\n    var enhancedListenerId = listener[LISTENER_IDENTITY][event];\n    return listenersMap[enhancedListenerId];\n  }\n\n  var enhancedListener = function enhancedListener(data) {\n    console.info(\".\" + label + \"(\\\"\" + event + \"\\\") <===\", data);\n    listener(data);\n  };\n\n  var uniqueId = generateUniqueId(listenersMap);\n  listener[LISTENER_IDENTITY][event] = uniqueId;\n  listenersMap[uniqueId] = enhancedListener;\n  return enhancedListener;\n}; // TODO: this really should just accept & return CustomerSdk type\n\n\nvar debug = function debug(_sdk) {\n  var sdk = _sdk;\n\n  if (process.env.NODE_ENV === 'production') {\n    console.warn('You probably do not want to use debug(customerSDK) in your production environment.');\n  }\n\n  var _on = sdk.on,\n      _once = sdk.once,\n      _off = sdk.off,\n      _getChatHistory = sdk.getChatHistory,\n      auth = sdk.auth,\n      rest = _objectWithoutPropertiesLoose(sdk, [\"on\", \"once\", \"off\", \"getChatHistory\", \"auth\"]);\n\n  var methods = createDebuggedMethods(rest);\n  return Object.freeze(_extends({\n    auth: Object.freeze(createDebuggedMethods(auth, '.auth'))\n  }, methods, {\n    getChatHistory: function getChatHistory() {\n      var _console2;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (_console2 = console).info.apply(_console2, [\".getChatHistory()\"].concat(args));\n\n      var history = _getChatHistory.apply(void 0, args);\n\n      var logLabel = 'history.next()';\n      return {\n        next: function next() {\n          var _console3;\n\n          (_console3 = console).info.apply(_console3, [logLabel + \" ===>\"].concat(args));\n\n          var result = history.next();\n          result.then(function (data) {\n            var _console4;\n\n            (_console4 = console).info.apply(_console4, [logLabel + \" <===\"].concat(args, [data]));\n          }).catch(function (err) {\n            var _console5;\n\n            (_console5 = console).error.apply(_console5, [logLabel + \" <===\"].concat(args, [err]));\n          });\n          return result;\n        }\n      };\n    },\n    off: function off(event, listener) {\n      console.info(\".off(\\\"\" + event + \"\\\", \" + (listener.name || 'anonymous') + \")\");\n      var enhancedListener = listener;\n\n      if (listener[LISTENER_IDENTITY] !== undefined) {\n        var enhancedListenerId = listener[LISTENER_IDENTITY][event];\n        enhancedListener = listenersMap[enhancedListenerId];\n      }\n\n      _off(event, enhancedListener);\n    },\n    on: function on(event, listener) {\n      _on(event, createEnhancedListener('on', event, listener));\n    },\n    once: function once(event, listener) {\n      _once(event, createEnhancedListener('once', event, listener));\n    }\n  }));\n};\n\nvar CHATS_PAGINATION_MAX_LIMIT = 25;\n\nvar init = function init(config, env) {\n  if (env === void 0) {\n    env = 'production';\n  }\n\n  validateConfig(config);\n\n  var _config$autoConnect = config.autoConnect,\n      autoConnect = _config$autoConnect === void 0 ? true : _config$autoConnect,\n      customerDataProvider = config.customerDataProvider,\n      instanceConfig = _objectWithoutPropertiesLoose(config, [\"autoConnect\", \"customerDataProvider\"]);\n\n  var store = finalCreateStore(_extends({}, instanceConfig, {\n    env: env\n  }));\n  var emitter = mitt();\n  var socket = createSocketClient(store);\n  var auth = createAuth(instanceConfig, env);\n  store.addSideEffectsHandler(createSideEffectsHandler({\n    emitter: emitter,\n    socket: socket,\n    auth: auth,\n    customerDataProvider: customerDataProvider\n  }));\n  socketListener(store, socket);\n  var sendRequestAction$$1 = sendRequestAction.bind(null, store);\n\n  var startConnection = function startConnection() {\n    store.dispatch({\n      type: START_CONNECTION\n    });\n  };\n\n  var api = Object.freeze({\n    acceptGreeting: function acceptGreeting(_ref) {\n      var greetingId = _ref.greetingId,\n          uniqueId = _ref.uniqueId;\n      return sendRequestAction$$1(sendRequest(ACCEPT_GREETING, {\n        greeting_id: greetingId,\n        unique_id: uniqueId\n      }));\n    },\n    activateChat: function activateChat(data) {\n      log({\n        env: env,\n        licenseId: config.licenseId,\n        eventName: 'chat_started'\n      });\n      return sendRequestAction$$1(sendRequest(ACTIVATE_CHAT, parseActivateChatData(data)));\n    },\n    auth: auth,\n    cancelGreeting: function cancelGreeting(_ref2) {\n      var uniqueId = _ref2.uniqueId;\n      return sendRequestAction$$1(sendRequest(CANCEL_GREETING, {\n        unique_id: uniqueId\n      }));\n    },\n    cancelRate: function cancelRate(params) {\n      var chatId = params.chatId,\n          _params$properties = params.properties,\n          properties = _params$properties === void 0 ? ['score'] : _params$properties;\n      return api.listThreads({\n        chatId: chatId\n      }).then(function (_ref3) {\n        var threads = _ref3.threads;\n\n        if (!threads.length) {\n          throw createError({\n            message: \"There is no thread in \\\"\" + chatId + \"\\\".\",\n            code: MISSING_CHAT_THREAD\n          });\n        }\n\n        return api.deleteThreadProperties({\n          chatId: chatId,\n          threadId: threads[0].id,\n          properties: {\n            rating: properties\n          }\n        });\n      });\n    },\n    connect: startConnection,\n    deactivateChat: function deactivateChat(_ref4) {\n      var chatId = _ref4.chatId;\n      return sendRequestAction$$1(sendRequest(DEACTIVATE_CHAT, {\n        chat_id: chatId\n      }));\n    },\n    deleteChatProperties: function deleteChatProperties(_ref5) {\n      var chatId = _ref5.chatId,\n          properties = _ref5.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_CHAT_PROPERTIES, {\n        chat_id: chatId,\n        properties: properties\n      }));\n    },\n    deleteEventProperties: function deleteEventProperties(_ref6) {\n      var chatId = _ref6.chatId,\n          threadId = _ref6.threadId,\n          eventId = _ref6.eventId,\n          properties = _ref6.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_EVENT_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        event_id: eventId,\n        properties: properties\n      }));\n    },\n    deleteThreadProperties: function deleteThreadProperties(_ref7) {\n      var chatId = _ref7.chatId,\n          threadId = _ref7.threadId,\n          properties = _ref7.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_THREAD_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    destroy: function destroy$$1() {\n      store.dispatch(destroy('manual'));\n    },\n    disconnect: function disconnect() {\n      store.dispatch({\n        type: PAUSE_CONNECTION\n      });\n    },\n    getChat: function getChat(_ref8) {\n      var chatId = _ref8.chatId,\n          threadId = _ref8.threadId;\n      return sendRequestAction$$1(sendRequest(GET_CHAT, {\n        chat_id: chatId,\n        thread_id: threadId\n      }));\n    },\n    getChatHistory: function getChatHistory(_ref9) {\n      var chatId = _ref9.chatId;\n      return createChatHistoryIterator(api, chatId);\n    },\n    getCustomer: function getCustomer() {\n      return sendRequestAction$$1(sendRequest(GET_CUSTOMER, {}));\n    },\n    getForm: function getForm(_ref10) {\n      var groupId = _ref10.groupId,\n          type = _ref10.type;\n      return sendRequestAction$$1(sendRequest(GET_FORM, {\n        group_id: groupId,\n        type: type\n      }));\n    },\n    getPredictedAgent: function getPredictedAgent(params) {\n      if (params === void 0) {\n        params = {};\n      }\n\n      var _params = params,\n          groupId = _params.groupId;\n      return sendRequestAction$$1(sendRequest(GET_PREDICTED_AGENT, typeof groupId === 'number' ? {\n        group_id: groupId\n      } : {}));\n    },\n    getUrlInfo: function getUrlInfo(_ref11) {\n      var url = _ref11.url;\n      return sendRequestAction$$1(sendRequest(GET_URL_INFO, {\n        url: url\n      }));\n    },\n    listChats: function listChats(_temp) {\n      var _ref12 = _temp === void 0 ? {} : _temp,\n          _ref12$limit = _ref12.limit,\n          limit = _ref12$limit === void 0 ? 10 : _ref12$limit,\n          pageId = _ref12.pageId;\n\n      if (limit > CHATS_PAGINATION_MAX_LIMIT) {\n        return Promise.reject(new Error(\"Specified limit is too high (max \" + CHATS_PAGINATION_MAX_LIMIT + \").\"));\n      }\n\n      return sendRequestAction$$1(sendRequest(LIST_CHATS, {\n        limit: limit,\n        page_id: pageId\n      }));\n    },\n    listGroupStatuses: function listGroupStatuses(_temp2) {\n      var _ref13 = _temp2 === void 0 ? {} : _temp2,\n          groupIds = _ref13.groupIds;\n\n      return sendRequestAction$$1(sendRequest(LIST_GROUP_STATUSES, groupIds ? {\n        group_ids: groupIds\n      } : {\n        all: true\n      }));\n    },\n    listThreads: function listThreads(_ref14) {\n      var chatId = _ref14.chatId,\n          _ref14$sortOrder = _ref14.sortOrder,\n          sortOrder = _ref14$sortOrder === void 0 ? DESC : _ref14$sortOrder,\n          limit = _ref14.limit,\n          pageId = _ref14.pageId,\n          minEventsCount = _ref14.minEventsCount;\n      return sendRequestAction$$1(sendRequest(LIST_THREADS, {\n        chat_id: chatId,\n        sort_order: sortOrder,\n        limit: limit,\n        page_id: pageId,\n        min_events_count: minEventsCount\n      }));\n    },\n    markEventsAsSeen: function markEventsAsSeen(_ref15) {\n      var chatId = _ref15.chatId,\n          seenUpTo = _ref15.seenUpTo;\n      return sendRequestAction$$1(sendRequest(MARK_EVENTS_AS_SEEN, {\n        chat_id: chatId,\n        seen_up_to: seenUpTo\n      }));\n    },\n    on: emitter.on,\n    once: emitter.once,\n    off: emitter.off,\n    rateChat: function rateChat(params) {\n      var chatId = params.chatId,\n          rating = params.rating;\n      return api.listThreads({\n        chatId: chatId\n      }).then(function (_ref16) {\n        var threads = _ref16.threads;\n\n        if (!threads.length) {\n          throw createError({\n            message: \"There is no thread in \\\"\" + chatId + \"\\\".\",\n            code: MISSING_CHAT_THREAD\n          });\n        }\n\n        return api.updateThreadProperties({\n          chatId: chatId,\n          threadId: threads[0].id,\n          properties: {\n            rating: rating\n          }\n        });\n      });\n    },\n    sendEvent: function (_sendEvent) {\n      function sendEvent$$1(_x) {\n        return _sendEvent.apply(this, arguments);\n      }\n\n      sendEvent$$1.toString = function () {\n        return _sendEvent.toString();\n      };\n\n      return sendEvent$$1;\n    }(function (params) {\n      return sendRequestAction$$1(sendEvent(params));\n    }),\n    sendTicketForm: function sendTicketForm$$1(options) {\n      return sendTicketForm(store, auth, options);\n    },\n    sendRichMessagePostback: function sendRichMessagePostback(_ref17) {\n      var chatId = _ref17.chatId,\n          threadId = _ref17.threadId,\n          eventId = _ref17.eventId,\n          postback = _ref17.postback;\n      return sendRequestAction$$1(sendRequest(SEND_RICH_MESSAGE_POSTBACK, {\n        chat_id: chatId,\n        event_id: eventId,\n        thread_id: threadId,\n        postback: postback\n      }));\n    },\n    setCustomerSessionFields: function setCustomerSessionFields(_ref18) {\n      var sessionFields = _ref18.sessionFields;\n      return sendRequestAction$$1(sendRequest(SET_CUSTOMER_SESSION_FIELDS, {\n        session_fields: parseCustomerSessionFields(sessionFields)\n      }));\n    },\n    setSneakPeek: function setSneakPeek(_ref19) {\n      var chatId = _ref19.chatId,\n          sneakPeekText = _ref19.sneakPeekText;\n      var state = store.getState();\n\n      if (!isChatActive(state, chatId) || !isConnected(state)) {\n        return;\n      }\n\n      sendRequestAction$$1(sendRequest(SEND_SNEAK_PEEK, {\n        chat_id: chatId,\n        sneak_peek_text: sneakPeekText\n      })).catch(noop);\n    },\n    startChat: function startChat(data) {\n      if (data === void 0) {\n        data = {};\n      }\n\n      log({\n        env: env,\n        licenseId: config.licenseId,\n        eventName: 'chat_started'\n      });\n      return sendRequestAction$$1(sendRequest(START_CHAT, parseStartChatData(data)));\n    },\n    updateChatProperties: function updateChatProperties(_ref20) {\n      var chatId = _ref20.chatId,\n          properties = _ref20.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_CHAT_PROPERTIES, {\n        chat_id: chatId,\n        properties: properties\n      }));\n    },\n    updateCustomer: function updateCustomer(update) {\n      return sendRequestAction$$1(sendRequest(UPDATE_CUSTOMER, parseCustomerUpdate(update)));\n    },\n    updateCustomerPage: function updateCustomerPage(page) {\n      store.dispatch({\n        type: UPDATE_CUSTOMER_PAGE,\n        payload: pickOwn(['title', 'url'], page)\n      });\n    },\n    updateEventProperties: function updateEventProperties(_ref21) {\n      var chatId = _ref21.chatId,\n          threadId = _ref21.threadId,\n          eventId = _ref21.eventId,\n          properties = _ref21.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_EVENT_PROPERTIES, {\n        chat_id: chatId,\n        event_id: eventId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    updateThreadProperties: function updateThreadProperties(_ref22) {\n      var chatId = _ref22.chatId,\n          threadId = _ref22.threadId,\n          properties = _ref22.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_THREAD_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    uploadFile: function uploadFile$$1(options) {\n      return uploadFile({\n        auth: auth,\n        store: store\n      }, options);\n    }\n  });\n\n  if (autoConnect) {\n    startConnection();\n  } else {\n    store.dispatch({\n      type: CHECK_GOALS,\n      payload: {\n        sessionFields: typeof customerDataProvider === 'function' ? customerDataProvider().sessionFields : {}\n      }\n    });\n  }\n\n  return api;\n};\n\nexport { init, debug, parseFile, parseFilledForm, parseMessage, parseRichMessage, parseSystemMessage, parseEvent$1 as parseEvent, parseGreeting };","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function (message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n}; // For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\n\n\nBufferedSender.prototype.sendScheduleWait = function () {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n\n  this.sendStop = function () {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n\n  tref = setTimeout(function () {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function () {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function (err) {\n      self.sendStop = null;\n\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self.close();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function () {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.close = function () {\n  debug('close');\n\n  this._cleanup();\n\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;","'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse'),\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    random = require('./utils/random'),\n    escape = require('./utils/escape'),\n    urlUtils = require('./utils/url'),\n    eventUtils = require('./utils/event'),\n    transport = require('./utils/transport'),\n    objectUtils = require('./utils/object'),\n    browser = require('./utils/browser'),\n    log = require('./utils/log'),\n    Event = require('./event/event'),\n    EventTarget = require('./event/eventtarget'),\n    loc = require('./location'),\n    CloseEvent = require('./event/close'),\n    TransportMessageEvent = require('./event/trans-message'),\n    InfoReceiver = require('./info-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports; // follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\n\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n\n  EventTarget.call(this);\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = ''; // non-standard extension\n\n  options = options || {};\n\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n  this._timeout = options.timeout || 0;\n  var sessionId = options.sessionId || 8;\n\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function () {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000); // Step 1 of WS spec - parse and validate the url. Issue #8\n\n  var parsedUrl = new URL(url);\n\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:'; // Step 2 - don't allow secure origin with an insecure protocol\n\n  if (loc.protocol === 'https:' && !secure) {\n    // exception is 127.0.0.0/8 and ::1 urls\n    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {\n      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n    }\n  } // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n\n\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  } // Step 5 - check protocols argument\n\n\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function (proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n\n    if (i < sortedProtocols.length - 1 && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  }); // Step 6 - convert origin\n\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null; // remove the trailing slash\n\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, '')); // store the sanitized url\n\n  this.url = parsedUrl.href;\n  debug('using url', this.url); // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain(),\n    sameOrigin: urlUtils.isOriginEqual(this.url, loc.href),\n    sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || code >= 3000 && code <= 4999;\n}\n\nSockJS.prototype.close = function (code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  } // Step 2.4 states the max is 123 bytes, but we are just checking length\n\n\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  } // Step 3.1\n\n\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  } // TODO look at docs to determine how to set this\n\n\n  var wasClean = true;\n\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function (data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function (info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n\n    return;\n  } // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n\n\n  this._rto = this.countRTO(rtt); // allow server to override url used for the actual transport\n\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info); // determine list of desired and supported transports\n\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function () {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n\n    if (Transport.needBody) {\n      if (!global.document.body || typeof global.document.readyState !== 'undefined' && global.document.readyState !== 'complete' && global.document.readyState !== 'interactive') {\n        debug('waiting for body');\n\n        this._transports.unshift(Transport);\n\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    } // calculate timeout based on RTO and round trips. Default to 5s\n\n\n    var timeoutMs = Math.max(this._timeout, this._rto * Transport.roundTrips || 5000);\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n    return;\n  }\n\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function () {\n  debug('_transportTimeout');\n\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transport) {\n      this._transport.close();\n    }\n\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function (msg) {\n  debug('_transportMessage', msg);\n  var self = this,\n      type = msg.slice(0, 1),\n      content = msg.slice(1),\n      payload; // first check for messages that don't need a payload\n\n  switch (type) {\n    case 'o':\n      this._open();\n\n      return;\n\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON3.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function (p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n\n      break;\n\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function (code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n\n  if (this._transport) {\n    this._transport.removeAllListeners();\n\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function () {\n  debug('_open', this._transport && this._transport.transportName, this.readyState);\n\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function (code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n\n    this._ir.close();\n\n    this._ir = null;\n  }\n\n  if (this._transport) {\n    this._transport.close();\n\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function () {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n}; // See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\n\n\nSockJS.prototype.countRTO = function (rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function (availableTransports) {\n  transports = transport(availableTransports);\n\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n\n  return SockJS;\n};","'use strict'; // The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits'),\n    SenderReceiver = require('./lib/sender-receiver'),\n    JsonpReceiver = require('./receiver/jsonp'),\n    jsonpSender = require('./sender/jsonp');\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function () {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\nmodule.exports = JsonPTransport;","/* eslint-disable */\n\n/* jscs: disable */\n'use strict'; // pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\nvar _toString = ObjectPrototype.toString;\n\nvar isFunction = function isFunction(val) {\n  return ObjectPrototype.toString.call(val) === '[object Function]';\n};\n\nvar isArray = function isArray(obj) {\n  return _toString.call(obj) === '[object Array]';\n};\n\nvar isString = function isString(obj) {\n  return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && function () {\n  try {\n    Object.defineProperty({}, 'x', {});\n    return true;\n  } catch (e) {\n    /* this is ES3 */\n    return false;\n  }\n}(); // Define configurable, writable and non-enumerable props\n// if they don't exist.\n\n\nvar defineProperty;\n\nif (supportsDescriptors) {\n  defineProperty = function defineProperty(object, name, method, forceAssign) {\n    if (!forceAssign && name in object) {\n      return;\n    }\n\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method\n    });\n  };\n} else {\n  defineProperty = function defineProperty(object, name, method, forceAssign) {\n    if (!forceAssign && name in object) {\n      return;\n    }\n\n    object[name] = method;\n  };\n}\n\nvar defineProperties = function defineProperties(object, map, forceAssign) {\n  for (var name in map) {\n    if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n      defineProperty(object, name, map[name], forceAssign);\n    }\n  }\n};\n\nvar toObject = function toObject(o) {\n  if (o == null) {\n    // this matches both null and undefined\n    throw new TypeError(\"can't convert \" + o + ' to object');\n  }\n\n  return Object(o);\n}; //\n// Util\n// ======\n//\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\n\nfunction toInteger(num) {\n  var n = +num;\n\n  if (n !== n) {\n    // isNaN\n    n = 0;\n  } else if (n !== 0 && n !== 1 / 0 && n !== -(1 / 0)) {\n    n = (n > 0 || -1) * Math.floor(Math.abs(n));\n  }\n\n  return n;\n}\n\nfunction ToUint32(x) {\n  return x >>> 0;\n} //\n// Function\n// ========\n//\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n  bind: function bind(that) {\n    // .length is 1\n    // 1. Let Target be the this value.\n    var target = this; // 2. If IsCallable(Target) is false, throw a TypeError exception.\n\n    if (!isFunction(target)) {\n      throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n    } // 3. Let A be a new (possibly empty) internal list of all of the\n    //   argument values provided after thisArg (arg1, arg2 etc), in order.\n    // XXX slicedArgs will stand in for \"A\" if used\n\n\n    var args = array_slice.call(arguments, 1); // for normal call\n    // 4. Let F be a new native ECMAScript object.\n    // 11. Set the [[Prototype]] internal property of F to the standard\n    //   built-in Function prototype object as specified in 15.3.3.1.\n    // 12. Set the [[Call]] internal property of F as described in\n    //   15.3.4.5.1.\n    // 13. Set the [[Construct]] internal property of F as described in\n    //   15.3.4.5.2.\n    // 14. Set the [[HasInstance]] internal property of F as described in\n    //   15.3.4.5.3.\n\n    var binder = function binder() {\n      if (this instanceof bound) {\n        // 15.3.4.5.2 [[Construct]]\n        // When the [[Construct]] internal method of a function object,\n        // F that was created using the bind function is called with a\n        // list of arguments ExtraArgs, the following steps are taken:\n        // 1. Let target be the value of F's [[TargetFunction]]\n        //   internal property.\n        // 2. If target has no [[Construct]] internal method, a\n        //   TypeError exception is thrown.\n        // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n        //   property.\n        // 4. Let args be a new list containing the same values as the\n        //   list boundArgs in the same order followed by the same\n        //   values as the list ExtraArgs in the same order.\n        // 5. Return the result of calling the [[Construct]] internal\n        //   method of target providing args as the arguments.\n        var result = target.apply(this, args.concat(array_slice.call(arguments)));\n\n        if (Object(result) === result) {\n          return result;\n        }\n\n        return this;\n      } else {\n        // 15.3.4.5.1 [[Call]]\n        // When the [[Call]] internal method of a function object, F,\n        // which was created using the bind function is called with a\n        // this value and a list of arguments ExtraArgs, the following\n        // steps are taken:\n        // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n        //   property.\n        // 2. Let boundThis be the value of F's [[BoundThis]] internal\n        //   property.\n        // 3. Let target be the value of F's [[TargetFunction]] internal\n        //   property.\n        // 4. Let args be a new list containing the same values as the\n        //   list boundArgs in the same order followed by the same\n        //   values as the list ExtraArgs in the same order.\n        // 5. Return the result of calling the [[Call]] internal method\n        //   of target providing boundThis as the this value and\n        //   providing args as the arguments.\n        // equiv: target.call(this, ...boundArgs, ...args)\n        return target.apply(that, args.concat(array_slice.call(arguments)));\n      }\n    }; // 15. If the [[Class]] internal property of Target is \"Function\", then\n    //     a. Let L be the length property of Target minus the length of A.\n    //     b. Set the length own property of F to either 0 or L, whichever is\n    //       larger.\n    // 16. Else set the length own property of F to 0.\n\n\n    var boundLength = Math.max(0, target.length - args.length); // 17. Set the attributes of the length own property of F to the values\n    //   specified in 15.3.5.1.\n\n    var boundArgs = [];\n\n    for (var i = 0; i < boundLength; i++) {\n      boundArgs.push('$' + i);\n    } // XXX Build a dynamic function with desired amount of arguments is the only\n    // way to set the length property of a function.\n    // In environments where Content Security Policies enabled (Chrome extensions,\n    // for ex.) all use of eval or Function costructor throws an exception.\n    // However in all of these environments Function.prototype.bind exists\n    // and so this code will never be executed.\n\n\n    var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n    if (target.prototype) {\n      Empty.prototype = target.prototype;\n      bound.prototype = new Empty(); // Clean up dangling references.\n\n      Empty.prototype = null;\n    } // TODO\n    // 18. Set the [[Extensible]] internal property of F to true.\n    // TODO\n    // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n    // 20. Call the [[DefineOwnProperty]] internal method of F with\n    //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n    //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n    //   false.\n    // 21. Call the [[DefineOwnProperty]] internal method of F with\n    //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n    //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n    //   and false.\n    // TODO\n    // NOTE Function objects created using Function.prototype.bind do not\n    // have a prototype property or the [[Code]], [[FormalParameters]], and\n    // [[Scope]] internal properties.\n    // XXX can't delete prototype in pure-js.\n    // 22. Return F.\n\n\n    return bound;\n  }\n}); //\n// Array\n// =====\n//\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\n\ndefineProperties(Array, {\n  isArray: isArray\n});\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n  // Check node 0.6.21 bug where third parameter is not boxed\n  var properlyBoxesNonStrict = true;\n  var properlyBoxesStrict = true;\n\n  if (method) {\n    method.call('foo', function (_, __, context) {\n      if (typeof context !== 'object') {\n        properlyBoxesNonStrict = false;\n      }\n    });\n    method.call([1], function () {\n      'use strict';\n\n      properlyBoxesStrict = typeof this === 'string';\n    }, 'x');\n  }\n\n  return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n  forEach: function forEach(fun\n  /*, thisp*/\n  ) {\n    var object = toObject(this),\n        self = splitString && isString(this) ? this.split('') : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0; // If no callback function or if callback is not a callable function\n\n    if (!isFunction(fun)) {\n      throw new TypeError(); // TODO message\n    }\n\n    while (++i < length) {\n      if (i in self) {\n        // Invoke the callback function with call, passing arguments:\n        // context, property value, property key, thisArg object\n        // context\n        fun.call(thisp, self[i], i, object);\n      }\n    }\n  }\n}, !properlyBoxesContext(ArrayPrototype.forEach)); // ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\n\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n  indexOf: function indexOf(sought\n  /*, fromIndex */\n  ) {\n    var self = splitString && isString(this) ? this.split('') : toObject(this),\n        length = self.length >>> 0;\n\n    if (!length) {\n      return -1;\n    }\n\n    var i = 0;\n\n    if (arguments.length > 1) {\n      i = toInteger(arguments[1]);\n    } // handle negative indices\n\n\n    i = i >= 0 ? i : Math.max(0, length + i);\n\n    for (; i < length; i++) {\n      if (i in self && self[i] === sought) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n}, hasFirefox2IndexOfBug); //\n// String\n// ======\n//\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\n\nif ('ab'.split(/(?:ab)*/).length !== 2 || '.'.split(/(.?)(.?)/).length !== 4 || 'tesst'.split(/(s)*/)[1] === 't' || 'test'.split(/(?:)/, -1).length !== 4 || ''.split(/.?/).length || '.'.split(/()()/).length > 1) {\n  (function () {\n    var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n    StringPrototype.split = function (separator, limit) {\n      var string = this;\n\n      if (separator === void 0 && limit === 0) {\n        return [];\n      } // If `separator` is not a regex, use native split\n\n\n      if (_toString.call(separator) !== '[object RegExp]') {\n        return string_split.call(this, separator, limit);\n      }\n\n      var output = [],\n          flags = (separator.ignoreCase ? 'i' : '') + (separator.multiline ? 'm' : '') + (separator.extended ? 'x' : '') + ( // Proposed for ES6\n      separator.sticky ? 'y' : ''),\n          // Firefox 3+\n      lastLastIndex = 0,\n          // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator2,\n          match,\n          lastIndex,\n          lastLength;\n      separator = new RegExp(separator.source, flags + 'g');\n      string += ''; // Type-convert\n\n      if (!compliantExecNpcg) {\n        // Doesn't need flags gy, but they don't hurt\n        separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n      }\n      /* Values for `limit`, per the spec:\n       * If undefined: 4294967295 // Math.pow(2, 32) - 1\n       * If 0, Infinity, or NaN: 0\n       * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n       * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n       * If other: Type-convert, then use the above rules\n       */\n\n\n      limit = limit === void 0 ? -1 >>> 0 : // Math.pow(2, 32) - 1\n      ToUint32(limit);\n\n      while (match = separator.exec(string)) {\n        // `separator.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0].length;\n\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index)); // Fix browsers whose `exec` methods don't consistently return `undefined` for\n          // nonparticipating capturing groups\n\n          if (!compliantExecNpcg && match.length > 1) {\n            match[0].replace(separator2, function () {\n              for (var i = 1; i < arguments.length - 2; i++) {\n                if (arguments[i] === void 0) {\n                  match[i] = void 0;\n                }\n              }\n            });\n          }\n\n          if (match.length > 1 && match.index < string.length) {\n            ArrayPrototype.push.apply(output, match.slice(1));\n          }\n\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n\n          if (output.length >= limit) {\n            break;\n          }\n        }\n\n        if (separator.lastIndex === match.index) {\n          separator.lastIndex++; // Avoid an infinite loop\n        }\n      }\n\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separator.test('')) {\n          output.push('');\n        }\n      } else {\n        output.push(string.slice(lastLastIndex));\n      }\n\n      return output.length > limit ? output.slice(0, limit) : output;\n    };\n  })(); // [bugfix, chrome]\n  // If separator is undefined, then the result array contains just one String,\n  // which is the this value (converted to a String). If limit is not undefined,\n  // then the output array is truncated so that it contains no more than limit\n  // elements.\n  // \"0\".split(undefined, 0) -> []\n\n} else if ('0'.split(void 0, 0).length) {\n  StringPrototype.split = function split(separator, limit) {\n    if (separator === void 0 && limit === 0) {\n      return [];\n    }\n\n    return string_split.call(this, separator, limit);\n  };\n} // ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\n\n\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n  substr: function substr(start, length) {\n    return string_substr.call(this, start < 0 ? (start = this.length + start) < 0 ? 0 : start : start, length);\n  }\n}, hasNegativeSubstrBug);","'use strict';\n\nvar Driver = global.WebSocket || global.MozWebSocket;\n\nif (Driver) {\n  module.exports = function WebSocketBrowserDriver(url) {\n    return new Driver(url);\n  };\n} else {\n  module.exports = undefined;\n}","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://github.com/tc39/ecmascript-string-left-right-trim\n$({ target: 'String', proto: true, forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","var candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])'];\nvar candidateSelector = candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = el.querySelectorAll(candidateSelector);\n\n  if (options.includeContainer) {\n    if (matches.call(el, candidateSelector)) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var i, candidate, candidateTabindex;\n\n  for (i = 0; i < candidates.length; i++) {\n    candidate = candidates[i];\n    if (!isNodeMatchingSelectorTabbable(candidate)) continue;\n    candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n}\n\ntabbable.isTabbable = isTabbable;\ntabbable.isFocusable = isFocusable;\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, candidateSelector) === false) return false;\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node)) {\n    return false;\n  }\n\n  return true;\n}\n\nvar focusableCandidateSelector = candidateSelectors.concat('iframe').join(',');\n\nfunction isFocusable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, focusableCandidateSelector) === false) return false;\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n  if (!isNaN(tabindexAttr)) return tabindexAttr; // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n  if (isContentEditable(node)) return 0;\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) return true; // This won't account for the edge case where you have radio groups with the same\n  // in separate forms on the same page.\n\n  var radioSet = node.ownerDocument.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n  var checked = getCheckedRadio(radioSet);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  // offsetParent being null will allow detecting cases where an element is invisible or inside an invisible element,\n  // as long as the element does not use position: fixed. For them, their visibility has to be checked directly as well.\n  return node.offsetParent === null || getComputedStyle(node).visibility === 'hidden';\n}\n\nmodule.exports = tabbable;","'use strict';\n\nvar random = require('../../utils/random'),\n    urlUtils = require('../../utils/url');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function (url, payload, callback) {\n  debug(url, payload);\n\n  if (!form) {\n    createForm();\n  }\n\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {// seriously broken browsers get here\n  }\n\n  form.submit();\n\n  var completed = function completed(err) {\n    debug('completed', id, err);\n\n    if (!iframe.onerror) {\n      return;\n    }\n\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null; // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n\n    setTimeout(function () {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = ''; // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n\n    callback(err);\n  };\n\n  iframe.onerror = function () {\n    debug('onerror', id);\n    completed();\n  };\n\n  iframe.onload = function () {\n    debug('onload', id);\n    completed();\n  };\n\n  iframe.onreadystatechange = function (e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n\n  return function () {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};","/**\n * Expose `Backoff`.\n */\nmodule.exports = Backoff;\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\n\nBackoff.prototype.duration = function () {\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n  if (this.jitter) {\n    var rand = Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n  }\n\n  return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\n\nBackoff.prototype.reset = function () {\n  this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMin = function (min) {\n  this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMax = function (max) {\n  this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\n\n\nBackoff.prototype.setJitter = function (jitter) {\n  this.jitter = jitter;\n};","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    eventUtils = require('../../utils/event'),\n    browser = require('../../utils/browser'),\n    urlUtils = require('../../utils/url');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n} // References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function (method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest(); // IE caches even POSTs\n\n  url = urlUtils.addQuery(url, 't=' + +new Date());\n\n  xdr.onerror = function () {\n    debug('onerror');\n\n    self._error();\n  };\n\n  xdr.ontimeout = function () {\n    debug('ontimeout');\n\n    self._error();\n  };\n\n  xdr.onprogress = function () {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n\n  xdr.onload = function () {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n\n    self._cleanup(false);\n  };\n\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function () {\n    self._cleanup(true);\n  });\n\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function () {\n  this.emit('finish', 0, '');\n\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function (abort) {\n  debug('cleanup', abort);\n\n  if (!this.xdr) {\n    return;\n  }\n\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {// intentionally empty\n    }\n  }\n\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function () {\n  debug('close');\n\n  this._cleanup(true);\n}; // IE 8/9 if the request target uses the same scheme - #79\n\n\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\nmodule.exports = XDRObject;","'use strict';\n\nmodule.exports = [// streaming transports\nrequire('./transport/websocket'), require('./transport/xhr-streaming'), require('./transport/xdr-streaming'), require('./transport/eventsource'), require('./transport/lib/iframe-wrap')(require('./transport/eventsource')) // polling transports\n, require('./transport/htmlfile'), require('./transport/lib/iframe-wrap')(require('./transport/htmlfile')), require('./transport/xhr-polling'), require('./transport/xdr-polling'), require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling')), require('./transport/jsonp-polling')];","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    utils = require('../../utils/event'),\n    urlUtils = require('../../utils/url'),\n    XHR = global.XMLHttpRequest;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function (method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {// intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n\n    this._cleanup();\n\n    return;\n  } // several browsers cache POSTs\n\n\n  url = urlUtils.addQuery(url, 't=' + +new Date()); // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n\n  this.unloadRef = utils.unloadAdd(function () {\n    debug('unload cleanup');\n\n    self._cleanup(true);\n  });\n\n  try {\n    this.xhr.open(method, url, true);\n\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n\n      this.xhr.ontimeout = function () {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e); // IE raises an exception on wrong port.\n\n    this.emit('finish', 0, '');\n\n    this._cleanup(false);\n\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials'); // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = true;\n  }\n\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function () {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n\n      switch (x.readyState) {\n        case 3:\n          // IE doesn't like peeking into responseText or status\n          // on Microsoft.XMLHTTP and readystate=3\n          try {\n            status = x.status;\n            text = x.responseText;\n          } catch (e) {// intentionally empty\n          }\n\n          debug('status', status); // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n\n          if (status === 1223) {\n            status = 204;\n          } // IE does return readystate == 3 for 404 answers.\n\n\n          if (status === 200 && text && text.length > 0) {\n            debug('chunk');\n            self.emit('chunk', status, text);\n          }\n\n          break;\n\n        case 4:\n          status = x.status;\n          debug('status', status); // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n\n          if (status === 1223) {\n            status = 204;\n          } // IE returns this for a bad port\n          // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n\n\n          if (status === 12005 || status === 12029) {\n            status = 0;\n          }\n\n          debug('finish', status, x.responseText);\n          self.emit('finish', status, x.responseText);\n\n          self._cleanup(false);\n\n          break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function (abort) {\n  debug('cleanup');\n\n  if (!this.xhr) {\n    return;\n  }\n\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef); // IE needs this field to be a function\n\n  this.xhr.onreadystatechange = function () {};\n\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {// intentionally empty\n    }\n  }\n\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function () {\n  debug('close');\n\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR; // override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\n\nvar axo = ['Active'].concat('Object').join('X');\n\nif (!AbstractXHRObject.enabled && axo in global) {\n  debug('overriding xmlhttprequest');\n\n  XHR = function XHR() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\n\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {// intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\nmodule.exports = AbstractXHRObject;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    JSON3 = require('json3'),\n    XHRLocalObject = require('./transport/sender/xhr-local'),\n    InfoAjax = require('./info-ajax');\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function (info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON3.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function () {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;","'use strict';\n\nrequire(\"core-js/modules/es.string.trim-start\");\n\nvar required = require('requires-port'),\n    qs = require('querystringify'),\n    slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//,\n    protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i,\n    whitespace = \"[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]\",\n    left = new RegExp('^' + whitespace + '+');\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\n\n\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\n\n\nvar rules = [['#', 'hash'], // Extract from the back.\n['?', 'query'], // Extract from the back.\nfunction sanitize(address) {\n  // Sanitize what is left of the address\n  return address.replace('\\\\', '/');\n}, ['/', 'pathname'], // Extract from the back.\n['@', 'auth', 1], // Extract from the front.\n[NaN, 'host', undefined, 1, 1], // Set left over value.\n[/:(\\d+)$/, 'port', undefined, 1], // RegExp the back.\n[NaN, 'hostname', undefined, 1, 1] // Set left over.\n];\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\n\nvar ignore = {\n  hash: 1,\n  query: 1\n};\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\n\nfunction lolcation(loc) {\n  var globalVar;\n  if (typeof window !== 'undefined') globalVar = window;else if (typeof global !== 'undefined') globalVar = global;else if (typeof self !== 'undefined') globalVar = self;else globalVar = {};\n  var location = globalVar.location || {};\n  loc = loc || location;\n  var finaldestination = {},\n      type = typeof loc,\n      key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n\n    for (key in ignore) {\n      delete finaldestination[key];\n    }\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\n\n\nfunction extractProtocol(address) {\n  address = trimLeft(address);\n  var match = protocolre.exec(address);\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\n\n\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/')),\n      i = path.length,\n      last = path[i - 1],\n      unshift = false,\n      up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n  return path.join('/');\n}\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\n\n\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative,\n      extracted,\n      parse,\n      instruction,\n      index,\n      key,\n      instructions = rules.slice(),\n      type = typeof location,\n      url = this,\n      i = 0; //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n  location = lolcation(location); //\n  // Extract protocol information before running the instructions.\n  //\n\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest; //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if (index = parse.exec(address)) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (relative && instruction[3] ? location[key] || '' : ''); //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  } //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n\n\n  if (parser) url.query = parser(url.query); //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n\n  if (relative && location.slashes && url.pathname.charAt(0) !== '/' && (url.pathname !== '' || location.pathname !== '')) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  } //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n\n\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  } //\n  // Parse down the `auth` for the username and password.\n  //\n\n\n  url.username = url.password = '';\n\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null'; //\n  // The href is just the compiled result.\n  //\n\n  url.href = url.toString();\n}\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\n\n\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname + ':' + value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n      if (url.port) value += ':' + url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null';\n  url.href = url.toString();\n  return url;\n}\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\n\n\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n  var query,\n      url = this,\n      protocol = url.protocol;\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':' + url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?' + query : query;\n  if (url.hash) result += url.hash;\n  return result;\n}\n\nUrl.prototype = {\n  set: set,\n  toString: toString\n}; //\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\n\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\nmodule.exports = Url;","'use strict';\n\nvar inherits = require('inherits'),\n    IframeTransport = require('../iframe'),\n    objectUtils = require('../../utils/object');\n\nmodule.exports = function (transport) {\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function (url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n  return IframeWrapTransport;\n};","'use strict';\n\nmodule.exports = {\n  isOpera: function isOpera() {\n    return global.navigator && /opera/i.test(global.navigator.userAgent);\n  },\n  isKonqueror: function isKonqueror() {\n    return global.navigator && /konqueror/i.test(global.navigator.userAgent);\n  } // #187 wrap document.domain in try/catch because of WP8 from file:///\n  ,\n  hasDomain: function hasDomain() {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    urlUtils = require('./utils/url'),\n    XDR = require('./transport/sender/xdr'),\n    XHRCors = require('./transport/sender/xhr-cors'),\n    XHRLocal = require('./transport/sender/xhr-local'),\n    XHRFake = require('./transport/sender/xhr-fake'),\n    InfoIframe = require('./info-iframe'),\n    InfoAjax = require('./info-ajax');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter); // TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function (baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function (baseUrl, urlInfo) {\n  var self = this,\n      url = urlUtils.addPath(baseUrl, '/info');\n  debug('doXhr', url);\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n  this.timeoutRef = setTimeout(function () {\n    debug('timeout');\n\n    self._cleanup(false);\n\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n  this.xo.once('finish', function (info, rtt) {\n    debug('finish', info, rtt);\n\n    self._cleanup(true);\n\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function (wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function () {\n  debug('close');\n  this.removeAllListeners();\n\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\nmodule.exports = InfoReceiver;","\"use strict\";\n\nmodule.exports = global.fetch;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XdrStreamingTransport = require('./xdr-streaming'),\n    XhrReceiver = require('./receiver/xhr'),\n    XDRObject = require('./sender/xdr');\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;","'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch (e) {// do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : level === 'log' ? function () {} : logObject.log;\n});\nmodule.exports = logObject;","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits');\n\nfunction XHRFake()\n/* method, url, payload, opts */\n{\n  var self = this;\n  EventEmitter.call(this);\n  this.to = setTimeout(function () {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function () {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\nmodule.exports = XHRFake;","'use strict';\n\nvar inherits = require('inherits'),\n    urlUtils = require('../../utils/url'),\n    BufferedSender = require('./buffered-sender'),\n    Polling = require('./polling');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function (msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function (code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function () {\n  BufferedSender.prototype.close.call(this);\n  debug('close');\n  this.removeAllListeners();\n\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n};\n\nmodule.exports = SenderReceiver;","module.exports = '1.5.0';","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    utils = require('./utils/event'),\n    IframeTransport = require('./transport/iframe'),\n    InfoReceiverIframe = require('./info-iframe-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function go() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n    ifr.once('message', function (msg) {\n      if (msg) {\n        var d;\n\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0],\n            rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n\n      self.close();\n    });\n    ifr.once('close', function () {\n      self.emit('finish');\n      self.close();\n    });\n  }; // TODO this seems the same as the 'needBody' from transports\n\n\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function () {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function () {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;","'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function (eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function () {};\n\nEvent.prototype.preventDefault = function () {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\nmodule.exports = Event;","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n\n      var TempCtor = function TempCtor() {};\n\n      TempCtor.prototype = superCtor.prototype;\n      ctor.prototype = new TempCtor();\n      ctor.prototype.constructor = ctor;\n    }\n  };\n}","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","'use strict';\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\n\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n      return port !== 80;\n\n    case 'https':\n    case 'wss':\n      return port !== 443;\n\n    case 'ftp':\n      return port !== 21;\n\n    case 'gopher':\n      return port !== 70;\n\n    case 'file':\n      return false;\n  }\n\n  return port !== 0;\n};","export default function symbolObservablePonyfill(root) {\n  var result;\n  var Symbol = root.Symbol;\n\n  if (typeof Symbol === 'function') {\n    if (Symbol.observable) {\n      result = Symbol.observable;\n    } else {\n      result = Symbol('observable');\n      Symbol.observable = result;\n    }\n  } else {\n    result = '@@observable';\n  }\n\n  return result;\n}\n;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    XHRLocalObject = require('./sender/xhr-local');\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function (info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;","'use strict';\n\nvar JSON3 = require('json3'); // Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\n// eslint-disable-next-line no-control-regex, no-misleading-character-class\n\n\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g,\n    extraLookup; // This may be quite slow, so let's delay until user actually uses bad\n// characters.\n\nvar unrollLookup = function unrollLookup(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n\n  for (i = 0; i < 65536; i++) {\n    c.push(String.fromCharCode(i));\n  }\n\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function (a) {\n    unrolled[a] = \"\\\\u\" + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n}; // Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\n\n\nmodule.exports = {\n  quote: function quote(string) {\n    var quoted = JSON3.stringify(string); // In most cases this should be very fast and good enough.\n\n    extraEscapable.lastIndex = 0;\n\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function (a) {\n      return extraLookup[a];\n    });\n  }\n};","'use strict';\n\nvar inherits = require('inherits'),\n    Event = require('./event');\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\nmodule.exports = CloseEvent;","'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList); // TODO can't get rid of this until all servers do\n\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","'use strict';\n\nvar inherits = require('inherits'),\n    urlUtils = require('../../utils/url'),\n    SenderReceiver = require('./sender-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function (url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n\n    if (typeof payload === 'string') {\n      opt.headers = {\n        'Content-type': 'text/plain'\n      };\n    }\n\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function (status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n\n      callback();\n    });\n    return function () {\n      debug('abort');\n      xo.close();\n      xo = null;\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\nmodule.exports = AjaxBasedTransport;","'use strict'; // Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits'),\n    JSON3 = require('json3'),\n    EventEmitter = require('events').EventEmitter,\n    version = require('../version'),\n    urlUtils = require('../utils/url'),\n    iframeUtils = require('../utils/iframe'),\n    eventUtils = require('../utils/event'),\n    random = require('../utils/random');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function (r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function () {\n  debug('close');\n  this.removeAllListeners();\n\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {// intentionally empty\n    }\n\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function (e) {\n  debug('message', e.data);\n\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n\n  try {\n    iframeMessage = JSON3.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n    case 's':\n      this.iframeObj.loaded(); // window global dependency\n\n      this.postMessage('s', JSON3.stringify([version, this.transport, this.transUrl, this.baseUrl]));\n      break;\n\n    case 't':\n      this.emit('message', iframeMessage.data);\n      break;\n\n    case 'c':\n      var cdata;\n\n      try {\n        cdata = JSON3.parse(iframeMessage.data);\n      } catch (ignored) {\n        debug('bad json', iframeMessage.data);\n        return;\n      }\n\n      this.emit('close', cdata[0], cdata[1]);\n      this.close();\n      break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function (type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON3.stringify({\n    windowId: this.windowId,\n    type: type,\n    data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function (message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function () {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\nmodule.exports = IframeTransport;","'use strict';\n\nmodule.exports = {\n  isObject: function isObject(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  },\n  extend: function extend(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n\n    var source, prop;\n\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n\n    return obj;\n  }\n};","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nvar utils = require('../utils/event'),\n    urlUtils = require('../utils/url'),\n    inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    WebsocketDriver = require('./driver/websocket');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n\n  this.url = url;\n  this.ws = new WebsocketDriver(this.url, [], options);\n\n  this.ws.onmessage = function (e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  }; // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n\n\n  this.unloadRef = utils.unloadAdd(function () {\n    debug('unload');\n    self.ws.close();\n  });\n\n  this.ws.onclose = function (e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n\n    self._cleanup();\n  };\n\n  this.ws.onerror = function (e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function (data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function () {\n  debug('close');\n  var ws = this.ws;\n\n  this._cleanup();\n\n  if (ws) {\n    ws.close();\n  }\n};\n\nWebSocketTransport.prototype._cleanup = function () {\n  debug('_cleanup');\n  var ws = this.ws;\n\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function () {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\n\nWebSocketTransport.transportName = 'websocket'; // In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\n\nWebSocketTransport.roundTrips = 2;\nmodule.exports = WebSocketTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    XhrDriver = require('../driver/xhr');\n\nfunction XHRLocalObject(method, url, payload\n/*, opts */\n) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\nXHRLocalObject.enabled = XhrDriver.enabled;\nmodule.exports = XHRLocalObject;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  this.bufferPosition = 0;\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function (status, text) {\n    debug('finish', status, text);\n\n    self._chunkHandler(status, text);\n\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function (status, text) {\n  debug('_chunkHandler', status);\n\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1;; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n\n    if (idx === -1) {\n      break;\n    }\n\n    var msg = buf.slice(0, idx);\n\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function () {\n  debug('abort');\n\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;","'use strict';\n\nvar inherits = require('inherits'),\n    XhrDriver = require('../driver/xhr');\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\nmodule.exports = XHRCorsObject;","/* global window */\nimport ponyfill from './ponyfill.js';\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;","'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function getOrigin(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n\n    if (!port) {\n      port = p.protocol === 'https:' ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  },\n  isOriginEqual: function isOriginEqual(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  },\n  isSchemeEqual: function isSchemeEqual(a, b) {\n    return a.split(':')[0] === b.split(':')[0];\n  },\n  addPath: function addPath(url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  },\n  addQuery: function addQuery(url, q) {\n    return url + (url.indexOf('?') === -1 ? '?' + q : '&' + q);\n  },\n  isLoopbackAddr: function isLoopbackAddr(addr) {\n    return /^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) || /^\\[::1\\]$/.test(addr);\n  }\n};","'use strict';\n\nvar urlUtils = require('./utils/url'),\n    eventUtils = require('./utils/event'),\n    JSON3 = require('json3'),\n    FacadeJS = require('./facade'),\n    InfoIframeReceiver = require('./info-iframe-receiver'),\n    iframeUtils = require('./utils/iframe'),\n    loc = require('./location');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function (SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function (at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  }); // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n  /* eslint-disable camelcase */\n\n  SockJS.bootstrap_iframe = function () {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n\n    var onMessage = function onMessage(e) {\n      if (e.source !== parent) {\n        return;\n      }\n\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n\n      try {\n        iframeMessage = JSON3.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n\n      switch (iframeMessage.type) {\n        case 's':\n          var p;\n\n          try {\n            p = JSON3.parse(iframeMessage.data);\n          } catch (ignored) {\n            debug('bad json', iframeMessage.data);\n            break;\n          }\n\n          var version = p[0];\n          var transport = p[1];\n          var transUrl = p[2];\n          var baseUrl = p[3];\n          debug(version, transport, transUrl, baseUrl); // change this to semver logic\n\n          if (version !== SockJS.version) {\n            throw new Error('Incompatible SockJS! Main site uses:' + ' \"' + version + '\", the iframe:' + ' \"' + SockJS.version + '\".');\n          }\n\n          if (!urlUtils.isOriginEqual(transUrl, loc.href) || !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n            throw new Error('Can\\'t connect to different domain from within an ' + 'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n          }\n\n          facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n          break;\n\n        case 'm':\n          facade._send(iframeMessage.data);\n\n          break;\n\n        case 'c':\n          if (facade) {\n            facade._close();\n          }\n\n          facade = null;\n          break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage); // Start\n\n    iframeUtils.postMessage('s');\n  };\n};","'use strict';\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function (availableTransports) {\n  return {\n    filterToEnabled: function filterToEnabled(transportsWhitelist, info) {\n      var transports = {\n        main: [],\n        facade: []\n      };\n\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function (trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length && transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XDRObject = require('./sender/xdr'); // According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function (info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;","'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80',\n  protocol: 'http:',\n  host: 'localhost',\n  port: 80,\n  href: 'http://localhost/',\n  hash: ''\n};","/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */\n;\n(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd; // A set of types used to distinguish objects from primitives.\n\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  }; // Detect the `exports` object exposed by CommonJS implementations.\n\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports; // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  } // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n\n\n  function runInContext(context, exports) {\n    context || (context = root.Object());\n    exports || (exports = root.Object()); // Native constructor aliases.\n\n    var Number = context.Number || root.Number,\n        String = context.String || root.String,\n        Object = context.Object || root.Object,\n        Date = context.Date || root.Date,\n        SyntaxError = context.SyntaxError || root.SyntaxError,\n        TypeError = context.TypeError || root.TypeError,\n        Math = context.Math || root.Math,\n        nativeJSON = context.JSON || root.JSON; // Delegate to the native `stringify` and `parse` implementations.\n\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    } // Convenience aliases.\n\n\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty = objectProto.hasOwnProperty,\n        undefined; // Internal: Contains `try...catch` logic used by other functions.\n    // This prevents other functions from being deoptimized.\n\n    function attempt(func, errorFunc) {\n      try {\n        func();\n      } catch (exception) {\n        if (errorFunc) {\n          errorFunc();\n        }\n      }\n    } // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\n\n    var isExtended = new Date(-3509827334573292);\n    attempt(function () {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 && isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    }); // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n\n    function has(name) {\n      if (has[name] != null) {\n        // Return cached feature test result.\n        return has[name];\n      }\n\n      var isSupported;\n\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"date-serialization\") && has(\"json-parse\");\n      } else if (name == \"date-serialization\") {\n        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.\n        isSupported = has(\"json-stringify\") && isExtended;\n\n        if (isSupported) {\n          var stringify = exports.stringify;\n          attempt(function () {\n            isSupported = // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n            // serialize extended years.\n            stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' && // The milliseconds are optional in ES 5, but required in 5.1.\n            stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' && // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n            // four-digit years instead of six-digit years. Credits: @Yaffle.\n            stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' && // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n            // values less than 1000. Credits: @Yaffle.\n            stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          });\n        }\n      } else {\n        var value,\n            serialized = \"{\\\"a\\\":[1,true,false,null,\\\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\\\"]}\"; // Test `JSON.stringify`.\n\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify,\n              stringifySupported = typeof stringify == \"function\";\n\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function value() {\n              return 1;\n            }).toJSON = value;\n            attempt(function () {\n              stringifySupported = // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" && // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' && // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undefined && // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undefined) === undefined && // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undefined && // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" && stringify([value]) == \"[1]\" && // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undefined]) == \"[null]\" && // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" && // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undefined, getClass, null]) == \"[null,null,null]\" && // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({\n                \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n              }) == serialized && // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\";\n            }, function () {\n              stringifySupported = false;\n            });\n          }\n\n          isSupported = stringifySupported;\n        } // Test `JSON.parse`.\n\n\n        if (name == \"json-parse\") {\n          var parse = exports.parse,\n              parseSupported;\n\n          if (typeof parse == \"function\") {\n            attempt(function () {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\n                if (parseSupported) {\n                  attempt(function () {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  });\n\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    });\n                  }\n\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    });\n                  }\n                }\n              }\n            }, function () {\n              parseSupported = false;\n            });\n          }\n\n          isSupported = parseSupported;\n        }\n      }\n\n      return has[name] = !!isSupported;\n    }\n\n    has[\"bug-string-char-index\"] = has[\"date-serialization\"] = has[\"json\"] = has[\"json-stringify\"] = has[\"json-parse\"] = null;\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\"; // Detect incomplete support for accessing string characters by index.\n\n      var charIndexBuggy = has(\"bug-string-char-index\"); // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n\n      var _forOwn = function forOwn(object, callback) {\n        var size = 0,\n            Properties,\n            dontEnums,\n            property; // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\n        (Properties = function Properties() {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0; // Iterate over a new instance of the `Properties` class.\n\n        dontEnums = new Properties();\n\n        for (property in dontEnums) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(dontEnums, property)) {\n            size++;\n          }\n        }\n\n        Properties = dontEnums = null; // Normalize the iteration algorithm.\n\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          dontEnums = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"]; // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n\n          _forOwn = function forOwn(object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n                property,\n                length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            } // Manually invoke the callback for each non-enumerable property.\n\n\n            for (length = dontEnums.length; property = dontEnums[--length];) {\n              if (hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          _forOwn = function forOwn(object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n                property,\n                isConstructor;\n\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            } // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n\n\n            if (isConstructor || isProperty.call(object, property = \"constructor\")) {\n              callback(property);\n            }\n          };\n        }\n\n        return _forOwn(object, callback);\n      }; // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n\n\n      if (!has(\"json-stringify\") && !has(\"date-serialization\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        }; // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n\n        var leadingZeroes = \"000000\";\n\n        var toPaddedString = function toPaddedString(width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        }; // Internal: Serializes a date object.\n\n\n        var _serializeDate = function serializeDate(value) {\n          var getData, year, month, date, time, hours, minutes, seconds, milliseconds; // Define additional utility methods if the `Date` methods are buggy.\n\n          if (!isExtended) {\n            var floor = Math.floor; // A mapping between the months of the year and the number of days between\n            // January 1st and the first of the respective month.\n\n            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334]; // Internal: Calculates the number of days between the Unix epoch and the\n            // first day of the given month.\n\n            var getDay = function getDay(year, month) {\n              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n            };\n\n            getData = function getData(value) {\n              // Manually compute the year, month, date, hours, minutes,\n              // seconds, and milliseconds if the `getUTC*` methods are\n              // buggy. Adapted from @Yaffle's `date-shim` project.\n              date = floor(value / 864e5);\n\n              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++) {\n                ;\n              }\n\n              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++) {\n                ;\n              }\n\n              date = 1 + date - getDay(year, month); // The `time` value specifies the time within the day (see ES\n              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n              // to compute `A modulo B`, as the `%` operator does not\n              // correspond to the `modulo` operation for negative numbers.\n\n              time = (value % 864e5 + 864e5) % 864e5; // The hours, minutes, seconds, and milliseconds are obtained by\n              // decomposing the time within the day. See section 15.9.1.10.\n\n              hours = floor(time / 36e5) % 24;\n              minutes = floor(time / 6e4) % 60;\n              seconds = floor(time / 1e3) % 60;\n              milliseconds = time % 1e3;\n            };\n          } else {\n            getData = function getData(value) {\n              year = value.getUTCFullYear();\n              month = value.getUTCMonth();\n              date = value.getUTCDate();\n              hours = value.getUTCHours();\n              minutes = value.getUTCMinutes();\n              seconds = value.getUTCSeconds();\n              milliseconds = value.getUTCMilliseconds();\n            };\n          }\n\n          _serializeDate = function serializeDate(value) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              getData(value); // Serialize extended years correctly.\n\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) + // Months, dates, hours, minutes, and seconds should have two\n              // digits; milliseconds should have three.\n              \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) + // Milliseconds are optional in ES 5.0, but required in 5.1.\n              \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              year = month = date = hours = minutes = seconds = milliseconds = null;\n            } else {\n              value = null;\n            }\n\n            return value;\n          };\n\n          return _serializeDate(value);\n        }; // For environments with `JSON.stringify` but buggy date serialization,\n        // we override the native `Date#toJSON` implementation with a\n        // spec-compliant one.\n\n\n        if (has(\"json-stringify\") && !has(\"date-serialization\")) {\n          // Internal: the `Date#toJSON` implementation used to override the native one.\n          var dateToJSON = function dateToJSON(key) {\n            return _serializeDate(this);\n          }; // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\n\n          var nativeStringify = exports.stringify;\n\n          exports.stringify = function (source, filter, width) {\n            var nativeToJSON = Date.prototype.toJSON;\n            Date.prototype.toJSON = dateToJSON;\n            var result = nativeStringify(source, filter, width);\n            Date.prototype.toJSON = nativeToJSON;\n            return result;\n          };\n        } else {\n          // Internal: Double-quotes a string `value`, replacing all ASCII control\n          // characters (characters with code unit values between 0 and 31) with\n          // their escaped equivalents. This is an implementation of the\n          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n          var unicodePrefix = \"\\\\u00\";\n\n          var escapeChar = function escapeChar(character) {\n            var charCode = character.charCodeAt(0),\n                escaped = Escapes[charCode];\n\n            if (escaped) {\n              return escaped;\n            }\n\n            return unicodePrefix + toPaddedString(2, charCode.toString(16));\n          };\n\n          var reEscape = /[\\x00-\\x1f\\x22\\x5c]/g;\n\n          var quote = function quote(value) {\n            reEscape.lastIndex = 0;\n            return '\"' + (reEscape.test(value) ? value.replace(reEscape, escapeChar) : value) + '\"';\n          }; // Internal: Recursively serializes an object. Implements the\n          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\n\n          var serialize = function serialize(property, object, callback, properties, whitespace, indentation, stack) {\n            var value, type, className, results, element, index, length, prefix, result;\n            attempt(function () {\n              // Necessary for host object support.\n              value = object[property];\n            });\n\n            if (typeof value == \"object\" && value) {\n              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {\n                value = _serializeDate(value);\n              } else if (typeof value.toJSON == \"function\") {\n                value = value.toJSON(property);\n              }\n            }\n\n            if (callback) {\n              // If a replacement function was provided, call it to obtain the value\n              // for serialization.\n              value = callback.call(object, property, value);\n            } // Exit early if value is `undefined` or `null`.\n\n\n            if (value == undefined) {\n              return value === undefined ? value : \"null\";\n            }\n\n            type = typeof value; // Only call `getClass` if the value is an object.\n\n            if (type == \"object\") {\n              className = getClass.call(value);\n            }\n\n            switch (className || type) {\n              case \"boolean\":\n              case booleanClass:\n                // Booleans are represented literally.\n                return \"\" + value;\n\n              case \"number\":\n              case numberClass:\n                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n                // `\"null\"`.\n                return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\n              case \"string\":\n              case stringClass:\n                // Strings are double-quoted and escaped.\n                return quote(\"\" + value);\n            } // Recursively serialize objects and arrays.\n\n\n            if (typeof value == \"object\") {\n              // Check for cyclic structures. This is a linear search; performance\n              // is inversely proportional to the number of unique nested objects.\n              for (length = stack.length; length--;) {\n                if (stack[length] === value) {\n                  // Cyclic structures cannot be serialized by `JSON.stringify`.\n                  throw TypeError();\n                }\n              } // Add the object to the stack of traversed objects.\n\n\n              stack.push(value);\n              results = []; // Save the current indentation level and indent one additional level.\n\n              prefix = indentation;\n              indentation += whitespace;\n\n              if (className == arrayClass) {\n                // Recursively serialize array elements.\n                for (index = 0, length = value.length; index < length; index++) {\n                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                  results.push(element === undefined ? \"null\" : element);\n                }\n\n                result = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n              } else {\n                // Recursively serialize object members. Members are selected from\n                // either a user-specified list of property names, or the object\n                // itself.\n                _forOwn(properties || value, function (property) {\n                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\n                  if (element !== undefined) {\n                    // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                    // is not the empty string, let `member` {quote(property) + \":\"}\n                    // be the concatenation of `member` and the `space` character.\"\n                    // The \"`space` character\" refers to the literal space\n                    // character, not the `space` {width} argument provided to\n                    // `JSON.stringify`.\n                    results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                  }\n                });\n\n                result = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n              } // Remove the object from the traversed object stack.\n\n\n              stack.pop();\n              return result;\n            }\n          }; // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\n\n          exports.stringify = function (source, filter, width) {\n            var whitespace, callback, properties, className;\n\n            if (objectTypes[typeof filter] && filter) {\n              className = getClass.call(filter);\n\n              if (className == functionClass) {\n                callback = filter;\n              } else if (className == arrayClass) {\n                // Convert the property names array into a makeshift set.\n                properties = {};\n\n                for (var index = 0, length = filter.length, value; index < length;) {\n                  value = filter[index++];\n                  className = getClass.call(value);\n\n                  if (className == \"[object String]\" || className == \"[object Number]\") {\n                    properties[value] = 1;\n                  }\n                }\n              }\n            }\n\n            if (width) {\n              className = getClass.call(width);\n\n              if (className == numberClass) {\n                // Convert the `width` to an integer and create a string containing\n                // `width` number of space characters.\n                if ((width -= width % 1) > 0) {\n                  if (width > 10) {\n                    width = 10;\n                  }\n\n                  for (whitespace = \"\"; whitespace.length < width;) {\n                    whitespace += \" \";\n                  }\n                }\n              } else if (className == stringClass) {\n                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n              }\n            } // Opera <= 7.54u2 discards the values associated with empty string keys\n            // (`\"\"`) only if they are used directly within an object member list\n            // (e.g., `!(\"\" in { \"\": 1})`).\n\n\n            return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n          };\n        }\n      } // Public: Parses a JSON source string.\n\n\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode; // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        }; // Internal: Stores the parser state.\n\n        var Index, Source; // Internal: Resets the parser state and throws a `SyntaxError`.\n\n        var abort = function abort() {\n          Index = Source = null;\n          throw SyntaxError();\n        }; // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n\n\n        var lex = function lex() {\n          var source = Source,\n              length = source.length,\n              value,\n              begin,\n              position,\n              isSigned,\n              charCode;\n\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n\n            switch (charCode) {\n              case 9:\n              case 10:\n              case 13:\n              case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n\n              case 123:\n              case 125:\n              case 91:\n              case 93:\n              case 58:\n              case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n\n                    switch (charCode) {\n                      case 92:\n                      case 34:\n                      case 47:\n                      case 98:\n                      case 116:\n                      case 110:\n                      case 102:\n                      case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index); // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        } // Revive the escaped character.\n\n\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n\n                    charCode = source.charCodeAt(Index);\n                    begin = Index; // Optimize for the common case where a string is valid.\n\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    } // Append the string as-is.\n\n\n                    value += source.slice(begin, Index);\n                  }\n                }\n\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                } // Unterminated string.\n\n\n                abort();\n\n              default:\n                // Parse numbers and literals.\n                begin = Index; // Advance past the negative sign, if one is specified.\n\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                } // Parse an integer or floating-point value.\n\n\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n\n                  isSigned = false; // Parse the integer component.\n\n                  for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++) {\n                    ;\n                  } // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n\n\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index; // Parse the decimal component.\n\n                    for (; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n\n                    Index = position;\n                  } // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n\n\n                  charCode = source.charCodeAt(Index);\n\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index); // Skip past the sign following the exponent, if one is\n                    // specified.\n\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    } // Parse the exponential component.\n\n\n                    for (position = Index; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n\n                    Index = position;\n                  } // Coerce the parsed value to a JavaScript number.\n\n\n                  return +source.slice(begin, Index);\n                } // A negative sign may only precede numbers.\n\n\n                if (isSigned) {\n                  abort();\n                } // `true`, `false`, and `null` literals.\n\n\n                var temp = source.slice(Index, Index + 4);\n\n                if (temp == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (temp == \"fals\" && source.charCodeAt(Index + 4) == 101) {\n                  Index += 5;\n                  return false;\n                } else if (temp == \"null\") {\n                  Index += 4;\n                  return null;\n                } // Unrecognized token.\n\n\n                abort();\n            }\n          } // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n\n\n          return \"$\";\n        }; // Internal: Parses a JSON `value` token.\n\n\n        var get = function get(value) {\n          var results, hasMembers;\n\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            } // Parse object and array literals.\n\n\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n\n              for (;;) {\n                value = lex(); // A closing square bracket marks the end of the array literal.\n\n                if (value == \"]\") {\n                  break;\n                } // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n\n\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                } // Elisions and leading commas are not permitted.\n\n\n                if (value == \",\") {\n                  abort();\n                }\n\n                results.push(get(value));\n              }\n\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n\n              for (;;) {\n                value = lex(); // A closing curly brace marks the end of the object literal.\n\n                if (value == \"}\") {\n                  break;\n                } // If the object literal contains members, the current token\n                // should be a comma separator.\n\n\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                } // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n\n\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n\n                results[value.slice(1)] = get(lex());\n              }\n\n              return results;\n            } // Unexpected token encountered.\n\n\n            abort();\n          }\n\n          return value;\n        }; // Internal: Updates a traversed object member.\n\n\n        var update = function update(source, property, callback) {\n          var element = walk(source, property, callback);\n\n          if (element === undefined) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        }; // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\n\n        var walk = function walk(source, property, callback) {\n          var value = source[property],\n              length;\n\n          if (typeof value == \"object\" && value) {\n            // `forOwn` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(getClass, _forOwn, value, length, callback);\n              }\n            } else {\n              _forOwn(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n\n          return callback.call(source, property, value);\n        }; // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\n\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex()); // If a JSON string contains multiple tokens, it is invalid.\n\n          if (lex() != \"$\") {\n            abort();\n          } // Reset the parser state.\n\n\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports.runInContext = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root.JSON3,\n        isRestored = false;\n    var JSON3 = runInContext(root, root.JSON3 = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function noConflict() {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root.JSON3 = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n\n        return JSON3;\n      }\n    });\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  } // Export for asynchronous module loaders.\n\n\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);","'use strict';\n\nvar inherits = require('inherits'),\n    iframeUtils = require('../../utils/iframe'),\n    urlUtils = require('../../utils/url'),\n    EventEmitter = require('events').EventEmitter,\n    random = require('../../utils/random');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ? iframeUtils.createHtmlfile : iframeUtils.createIframe;\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function start() {\n      debug('start');\n      self.iframeObj.loaded();\n    },\n    message: function message(data) {\n      debug('message', data);\n      self.emit('message', data);\n    },\n    stop: function stop() {\n      debug('stop');\n\n      self._cleanup();\n\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function () {\n    debug('callback');\n\n    self._cleanup();\n\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function () {\n  debug('abort');\n\n  this._cleanup();\n\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function (reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false; // obfuscate to avoid firewalls\n\nvar axo = ['Active'].concat('Object').join('X');\n\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {// intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\nmodule.exports = HtmlfileReceiver;","'use strict';\n\nvar has = Object.prototype.hasOwnProperty,\n    undef;\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\n\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\n\n\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\n\n\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g,\n      result = {},\n      part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1]),\n        value = decode(part[2]); //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\n\n\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n  var pairs = [],\n      value,\n      key; //\n  // Optionally prefix with a '?' if needed\n  //\n\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key]; //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value); //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n\n      if (key === null || value === null) continue;\n      pairs.push(key + '=' + value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n} //\n// Expose the module.\n//\n\n\nexports.stringify = querystringify;\nexports.parse = querystring;","'use strict';\n\nvar utils = require('../../utils/iframe'),\n    random = require('../../utils/random'),\n    browser = require('../../utils/browser'),\n    urlUtils = require('../../utils/url'),\n    inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n  utils.polluteGlobalNamespace();\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n\n  this._createScript(urlWithId); // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n\n\n  this.timeoutId = setTimeout(function () {\n    debug('timeout');\n\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function () {\n  debug('abort');\n\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function (data) {\n  debug('_callback', data);\n\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function (err) {\n  debug('_abort', err);\n\n  this._cleanup();\n\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n\n  if (this.script) {\n    var script = this.script; // Unfortunately, you can't really abort script loading of\n    // the script.\n\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror = script.onload = script.onclick = null;\n    this.script = null;\n  }\n\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function () {\n  debug('_scriptError');\n  var self = this;\n\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function () {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function (url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2; // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n\n  script.onload = function () {\n    debug('onload');\n\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  }; // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n\n\n  script.onreadystatechange = function () {\n    debug('onreadystatechange', script.readyState);\n\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {// intentionally empty\n        }\n      }\n\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  }; // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n\n\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {// intentionally empty\n      }\n\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;","'use strict';\n\nvar inherits = require('inherits'),\n    HtmlfileReceiver = require('./receiver/htmlfile'),\n    XHRLocalObject = require('./sender/xhr-local'),\n    AjaxBasedTransport = require('./lib/ajax-based');\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function (info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\nmodule.exports = HtmlFileTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    Event = require('./event');\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\nmodule.exports = TransportMessageEvent;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    EventSourceReceiver = require('./receiver/eventsource'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    EventSourceDriver = require('eventsource');\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function () {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\nmodule.exports = EventSourceTransport;","'use strict';\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function (eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n\n  var arr = this._listeners[eventType]; // #4\n\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function (eventType, listener) {\n  var arr = this._listeners[eventType];\n\n  if (!arr) {\n    return;\n  }\n\n  var idx = arr.indexOf(listener);\n\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function () {\n  var event = arguments[0];\n  var t = event.type; // equivalent of Array.prototype.slice.call(arguments, 0);\n\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments); // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function () {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n  poll.on('message', function (msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n  poll.once('close', function (code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function () {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;","'use strict';\n\nvar crypto = require('crypto'); // This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\n\n\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function string(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n\n    return ret.join('');\n  },\n  number: function number(max) {\n    return Math.floor(Math.random() * max);\n  },\n  numberString: function numberString(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function (length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function (length) {\n    var bytes = new Array(length);\n\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n\n    return bytes;\n  };\n}"],"sourceRoot":""}